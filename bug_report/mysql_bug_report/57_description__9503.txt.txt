
CREATE TABLE t2 (c0 INT);
CREATE TABLE t4 (c0 INT);
SET @@SESSION.OPTIMIZER_SWITCH = 'derived_merge=on';
SELECT ty.c0 FROM t2 ty JOIN LATERAL (SELECT ty.c0 FROM t4) x(x) ON TRUE GROUP BY x.x;
SET @@SESSION.OPTIMIZER_SWITCH = 'derived_merge=off';
SELECT ty.c0 FROM t2 ty JOIN LATERAL (SELECT ty.c0 FROM t4) x(x) ON TRUE GROUP BY x.x;
CREATE TABLE t0 (c1 INT);
CREATE TABLE t1 (c1 INT, c2 INT);
INSERT INTO t1(c1,c2) VALUES (NULL,76),(131,120);
SET @@SESSION.OPTIMIZER_SWITCH = 'derived_merge=off';
SELECT 1 FROM t1 WHERE ROW(t1.c2, t1.c1) NOT IN (SELECT 3, x.x FROM (SELECT t0.c1 FROM t0 RIGHT JOIN t1 ON FALSE) x(x));
SET @@SESSION.OPTIMIZER_SWITCH = 'derived_merge=on';
SELECT 1 FROM t1 WHERE ROW(t1.c2, t1.c1) NOT IN (SELECT 3, x.x FROM (SELECT t0.c1 FROM t0 RIGHT JOIN t1 ON FALSE) x(x));
