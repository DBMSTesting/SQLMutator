ID: 9537
Title: Possible deadlock of INSERT and DROP PARTITION queries after one replica run out of free space
Description:
**Describe the bug or unexpected behaviour**
One replica run out from free space.
We tried to drop partition from replicated table. 
Drop partition query hang for a long time and we saw it in `system.processes `

**How to reproduce**
Lets try such scenario:
- ClickHouse 19.14.10.16 (LTS)
- Create Replicated table
- Insert data
- Leave no free space on replica
1) Try to drop partition without other running queries
2) Try to run select queries and drop partition
3) Try to run INSERT queries(that will fail on one replica) and drop partition
**Expected behavior**
Drop partition should be executed successfully if there is no free space on one replica.

**Error message and/or stacktrace**
```
919  0x00007f6af964688f in clone () from /lib/x86_64-linux-gnu/libc.so.6
| 919  0x00007f6af9d296db in start_thread () from /lib/x86_64-linux-gnu/libpthread.so.0
| | 919  0x000055fa3ee122a0 in execute_native_thread_routine ()
| | | 919  0x000055fa3e69ca3c in Poco::ThreadImpl::runnableEntry(void*) () at ../contrib/poco/Foundation/include/Poco/SharedPtr.h:380
| | | | 634  0x000055fa3e69ec91 in Poco::PooledThread::run() () at ../contrib/poco/Foundation/src/ThreadPool.cpp:214
| | | | | 625  0x000055fa3cfbb97d in Poco::Net::TCPServerDispatcher::run() () at ../contrib/poco/Net/src/TCPServerDispatcher.cpp:114
| | | | | | 540  0x000055fa3cfbb260 in Poco::Net::TCPServerConnection::start() () at ../contrib/poco/Net/src/TCPServerConnection.cpp:43
| | | | | | | 540  0x000055fa391dc15b in DB::TCPHandler::run() () at ../dbms/programs/server/TCPHandler.cpp:1172
| | | | | | | | 520  0x000055fa391db7c0 in DB::TCPHandler::runImpl() () at ../dbms/programs/server/TCPHandler.cpp:212
| | | | | | | | | 447  0x000055fa3c53222c in DB::executeQuery(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, DB::Context&, bool, DB::QueryProcessingStage::Enum, bool) () at /usr/include/c++/9/bits/basic_string.h:2312
| | | | | | | | | | 447  0x000055fa3c531070 in DB::executeQueryImpl(char const*, char const*, DB::Context&, bool, DB::QueryProcessingStage::Enum, bool) () at ../dbms/src/Interpreters/executeQuery.cpp:286
| | | | | | | | | | | 447  0x000055fa3c3e48ac in DB::InterpreterInsertQuery::execute() () at /usr/include/c++/9/bits/shared_ptr_base.h:1020
| | | | | | | | | | | | 445  0x000055fa3c5f8a28 in DB::IStorage::lockStructureForShare(bool, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) () at /usr/include/c++/9/bits/shared_ptr_base.h:1020
| | | | | | | | | | | | | 445  DB::RWLockImpl::getLock(DB::RWLockImpl::Type, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) () at ../dbms/src/Common/RWLock.cpp:183
| | | | | | | | | | | | | | 445  0x000055fa3cf4eb6b in std::condition_variable::wait<DB::RWLockImpl::getLock(DB::RWLockImpl::Type, const String&)::<lambda()> > at /usr/include/c++/9/bits/stl_list.h:941
| | | | | | | | | | | | | | | 445  0x000055fa3ed9e34c in std::condition_variable::wait(std::unique_lock<std::mutex>&) ()
| | | | | | | | | | | | | | | | 445  0x00007f6af9d2f9f3 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | | | | | | | 447  0x000055fa3cb67824 in DB::InterpreterAlterQuery::execute() () at /usr/include/c++/9/bits/shared_ptr_base.h:1020
| | | | | | | | | | | | 2    0x000055fa3c63a5e9 in DB::StorageMergeTree::alterPartition(std::shared_ptr<DB::IAST> const&, DB::PartitionCommands const&, DB::Context const&) () at ../dbms/src/Storages/StorageMergeTree.cpp:992
| | | | | | | | | | | | | 2    0x000055fa3c6331ad in DB::StorageMergeTree::dropPartition(std::shared_ptr<DB::IAST> const&, bool, DB::Context const&) () at ../dbms/src/Storages/StorageMergeTree.cpp:1057
| | | | | | | | | | | | | | 2    0x000055fa3c5f8c44 in DB::IStorage::lockExclusively(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) () at /usr/include/c++/9/bits/shared_ptr_base.h:1020
| | | | | | | | | | | | | | | 1    DB::RWLockImpl::getLock(DB::RWLockImpl::Type, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) () at ../dbms/src/Common/RWLock.cpp:183
| | | | | | | | | | | | | | | | 1    0x000055fa3cf4eb6b in std::condition_variable::wait<DB::RWLockImpl::getLock(DB::RWLockImpl::Type, const String&)::<lambda()> > at /usr/include/c++/9/bits/stl_list.h:941
| | | | | | | | | | | | | | | | | 1    0x000055fa3ed9e34c in std::condition_variable::wait(std::unique_lock<std::mutex>&) ()
| | | | | | | | | | | | | | | | | | 1    0x00007f6af9d2f9f3 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | | | | | | | | | | 2    0x000055fa3c5f8bee in DB::IStorage::lockExclusively(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) () at /usr/include/c++/9/bits/shared_ptr_base.h:1020
| | | | | | | | | | | | | | | 1    DB::RWLockImpl::getLock(DB::RWLockImpl::Type, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) () at ../dbms/src/Common/RWLock.cpp:183
| | | | | | | | | | | | | | | | 1    0x000055fa3cf4eb6b in std::condition_variable::wait<DB::RWLockImpl::getLock(DB::RWLockImpl::Type, const String&)::<lambda()> > at /usr/include/c++/9/bits/stl_list.h:941
| | | | | | | | | | | | | | | | | 1    0x000055fa3ed9e34c in std::condition_variable::wait(std::unique_lock<std::mutex>&) ()
| | | | | | | | | | | | | | | | | | 1    0x00007f6af9d2f9f3 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | | | | 520  0x000055fa391db34a in DB::TCPHandler::runImpl() () at /usr/include/c++/9/bits/stl_algobase.h:198
| | | | | | | | | 48   DB::ReadBufferFromPocoSocket::poll at ../dbms/src/IO/ReadBufferFromPocoSocket.cpp:70
| | | | | | | | | | 48   0x000055fa3cf6b1bd in Poco::Net::Socket::poll at ../contrib/poco/Net/include/Poco/Net/Socket.h:374
| | | | | | | | | | | 48   0x000055fa3cfb4fd6 in Poco::Net::SocketImpl::poll(Poco::Timespan const&, int) () at ../contrib/poco/Foundation/include/Poco/Timespan.h:195
| | | | | | | | | | | | 48   0x00007f6af9646bb7 in epoll_wait () from /lib/x86_64-linux-gnu/libc.so.6
| | | | | | | | 520  DB::TCPHandler::runImpl() () at ../dbms/programs/server/TCPHandler.cpp:71
| | | | | | | | | 20   std::make_shared<DB::ReadBufferFromPocoSocket, Poco::Net::StreamSocket&> () at /usr/include/c++/9/bits/shared_ptr.h:718
| | | | | | | | | | 20   std::allocate_shared<DB::ReadBufferFromPocoSocket, std::allocator<DB::ReadBufferFromPocoSocket>, Poco::Net::StreamSocket&> at /usr/include/c++/9/bits/shared_ptr.h:702
| | | | | | | | | | | 20   std::shared_ptr<DB::ReadBufferFromPocoSocket>::shared_ptr<std::allocator<DB::ReadBufferFromPocoSocket>, Poco::Net::StreamSocket&> at /usr/include/c++/9/bits/shared_ptr.h:359
| | | | | | | | | | | | 20   std::__shared_ptr<DB::ReadBufferFromPocoSocket, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<DB::ReadBufferFromPocoSocket>, Poco::Net::StreamSocket&> at /usr/include/c++/9/bits/shared_ptr_base.h:1344
| | | | | | | | | | | | | 20   std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<DB::ReadBufferFromPocoSocket, std::allocator<DB::ReadBufferFromPocoSocket>, Poco::Net::StreamSocket&> at /usr/include/c++/9/bits/shared_ptr_base.h:679
| | | | | | | | | | | | | | 20   std::_Sp_counted_ptr_inplace<DB::ReadBufferFromPocoSocket, std::allocator<DB::ReadBufferFromPocoSocket>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<Poco::Net::StreamSocket&> at /usr/include/c++/9/bits/shared_ptr_base.h:548
| | | | | | | | | | | | | | | 20   std::allocator_traits<std::allocator<DB::ReadBufferFromPocoSocket> >::construct<DB::ReadBufferFromPocoSocket, Poco::Net::StreamSocket&> at /usr/include/c++/9/bits/alloc_traits.h:484
| | | | | | | | | | | | | | | | 20   0x000055fa391dae1d in __gnu_cxx::new_allocator<DB::ReadBufferFromPocoSocket>::construct<DB::ReadBufferFromPocoSocket, Poco::Net::StreamSocket&> at /usr/include/c++/9/new:174
| | | | | | | | | | | | | | | | | 20   DB::ReadBufferFromPocoSocket::ReadBufferFromPocoSocket(Poco::Net::Socket&, unsigned long) () at ../dbms/src/IO/ReadBufferFromPocoSocket.cpp:64
| | | | | | | | | | | | | | | | | | 20   DB::BufferWithOwnMemory<DB::ReadBuffer>::BufferWithOwnMemory at ../dbms/src/IO/BufferWithOwnMemory.h:144
| | | | | | | | | | | | | | | | | | | 20   DB::Memory<Allocator<false, false> >::Memory at ../dbms/src/IO/BufferWithOwnMemory.h:43
| | | | | | | | | | | | | | | | | | | | 20   DB::Memory<Allocator<false, false> >::alloc at ../dbms/src/IO/BufferWithOwnMemory.h:117
| | | | | | | | | | | | | | | | | | | | | 20   0x000055fa3cf6b430 in Allocator<false, false>::alloc at ../dbms/src/Common/Allocator.h:92
| | | | | | | | | | | | | | | | | | | | | | 20   0x000055fa391849b8 in Allocator<false, false>::allocNoTrack at ../dbms/src/Common/Allocator.h:185
| | | | | | | | | | | | | | | | | | | | | | | 20   0x000055fa3e5c3e6a in malloc at ../contrib/jemalloc/src/jemalloc.c:2274
| | | | | | | | | | | | | | | | | | | | | | | | 20   malloc_default at ../contrib/jemalloc/src/jemalloc.c:2175
| | | | | | | | | | | | | | | | | | | | | | | | | 20   imalloc at ../contrib/jemalloc/src/jemalloc.c:2145
| | | | | | | | | | | | | | | | | | | | | | | | | | 20   imalloc_body at ../contrib/jemalloc/src/jemalloc.c:2036
| | | | | | | | | | | | | | | | | | | | | | | | | | | 20   imalloc_no_sample at ../contrib/jemalloc/src/jemalloc.c:1840
| | | | | | | | | | | | | | | | | | | | | | | | | | | | 20   iallocztm at ../contrib/jemalloc/include/jemalloc/internal/jemalloc_internal_inlines_c.h:53
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | 20   0x000055fa3e5c3507 in arena_malloc at ../contrib/jemalloc/include/jemalloc/internal/arena_inlines_b.h:151
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 20   0x000055fa3e5eb5f8 in arena_malloc_hard at ../contrib/jemalloc/include/jemalloc/internal/sz.h:207
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 20   large_malloc at ../contrib/jemalloc/src/large.c:17
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 20   0x000055fa3e5ca25a in large_palloc at ../contrib/jemalloc/include/jemalloc/internal/arena_inlines_b.h:13
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 20   0x000055fa3e5e8649 in arena_extent_alloc_large at ../contrib/jemalloc/src/arena.c:385
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 20   extent_alloc_wrapper at ../contrib/jemalloc/src/extent.c:1515
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 20   extent_alloc_retained at ../contrib/jemalloc/src/extent.c:1445
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 20   0x000055fa3e6132ec in malloc_mutex_lock at ../contrib/jemalloc/include/jemalloc/internal/mutex.h:224
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 20   malloc_mutex_lock_slow at ../contrib/jemalloc/src/mutex.c:84
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 20   0x000055fa3e5cd5d0 in malloc_mutex_lock_final at ../contrib/jemalloc/include/jemalloc/internal/mutex.h:160
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 20   0x00007f6af9d2c023 in pthread_mutex_lock () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 20   0x00007f6af9d3310d in __lll_lock_wait () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | | | | 520  0x000055fa391dbf50 in DB::TCPHandler::runImpl() () at ../dbms/programs/server/TCPHandler.cpp:222
| | | | | | | | | 5    0x000055fa391dac62 in DB::TCPHandler::processInsertQuery(DB::Settings const&) () at /usr/include/c++/9/bits/shared_ptr_base.h:1169
| | | | | | | | | | 2    0x000055fa3ca151b1 in DB::SquashingBlockOutputStream::writeSuffix at ../dbms/src/DataStreams/SquashingBlockOutputStream.cpp:50
| | | | | | | | | | | 2    0x000055fa3ca14f83 in DB::SquashingBlockOutputStream::finalize() () at /usr/include/c++/9/bits/shared_ptr_base.h:1020
| | | | | | | | | | | | 2    0x000055fa3ca0abe1 in DB::PushingToViewsBlockOutputStream::write(DB::Block const&) () at ../dbms/src/DataStreams/PushingToViewsBlockOutputStream.cpp:116
| | | | | | | | | | | | | 2    0x000055fa3c6e32c6 in DB::MergeTreeBlockOutputStream::write(DB::Block const&) () at ../dbms/src/Storages/MergeTree/MergeTreeBlockOutputStream.cpp:19
| | | | | | | | | | | | | | 1    0x000055fa3c74ca59 in DB::MergeTreeDataWriter::splitBlockIntoParts(DB::Block const&, unsigned long) () at /usr/include/c++/9/bits/shared_ptr_base.h:1020
| | | | | | | | | | | | | | | 1    0x000055fa3cb336f5 in DB::ExpressionActions::execute at ../dbms/src/Interpreters/ExpressionActions.cpp:758
| | | | | | | | | | | | | | | | 1    0x000055fa3cb31fe1 in DB::ExpressionAction::execute(DB::Block&, bool) const () at /usr/include/c++/9/bits/shared_ptr_base.h:1020
| | | | | | | | | | | | | | | | | 1    0x000055fa3c944774 in DB::PreparedFunctionImpl::execute(DB::Block&, std::vector<unsigned long, std::allocator<unsigned long> > const&, unsigned long, unsigned long, bool) () at ../dbms/src/Functions/IFunction.cpp:473
| | | | | | | | | | | | | | | | | | 1    0x000055fa393ebc31 in DB::FunctionDateOrDateTimeToSomething<DB::DataTypeNumber<unsigned int>, DB::ToYYYYMMDDImpl>::executeImpl(DB::Block&, std::vector<unsigned long, std::allocator<unsigned long> > const&, unsigned long, unsigned long) () at /usr/include/c++/9/ext/new_allocator.h:89
| | | | | | | | | | | | | | | | | | | 1    0x000055fa393eb8e8 in DB::DateTimeTransformImpl<unsigned short, unsigned int, DB::ToYYYYMMDDImpl>::execute(DB::Block&, std::vector<unsigned long, std::allocator<unsigned long> > const&, unsigned long, unsigned long) () at /usr/include/c++/9/ext/new_allocator.h:89
| | | | | | | | | | | | | | | | | | | | 1    malloc_default at ../contrib/jemalloc/src/jemalloc.c:2175
| | | | | | | | | | | | | | | | | | | | | 1    imalloc at ../contrib/jemalloc/src/jemalloc.c:2145
| | | | | | | | | | | | | | | | | | | | | | 1    imalloc_body at ../contrib/jemalloc/src/jemalloc.c:2036
| | | | | | | | | | | | | | | | | | | | | | | 1    imalloc_no_sample at ../contrib/jemalloc/src/jemalloc.c:1840
| | | | | | | | | | | | | | | | | | | | | | | | 1    iallocztm at ../contrib/jemalloc/include/jemalloc/internal/jemalloc_internal_inlines_c.h:53
| | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5c3507 in arena_malloc at ../contrib/jemalloc/include/jemalloc/internal/arena_inlines_b.h:151
| | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5eb5f8 in arena_malloc_hard at ../contrib/jemalloc/include/jemalloc/internal/sz.h:207
| | | | | | | | | | | | | | | | | | | | | | | | | | | 1    large_malloc at ../contrib/jemalloc/src/large.c:17
| | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5ca25a in large_palloc at ../contrib/jemalloc/include/jemalloc/internal/arena_inlines_b.h:13
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5e8649 in arena_extent_alloc_large at ../contrib/jemalloc/src/arena.c:385
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    extent_alloc_wrapper at ../contrib/jemalloc/src/extent.c:1515
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    extent_alloc_retained at ../contrib/jemalloc/src/extent.c:1445
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e6132ec in malloc_mutex_lock at ../contrib/jemalloc/include/jemalloc/internal/mutex.h:224
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    malloc_mutex_lock_slow at ../contrib/jemalloc/src/mutex.c:84
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5cd5d0 in malloc_mutex_lock_final at ../contrib/jemalloc/include/jemalloc/internal/mutex.h:160
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x00007f6af9d2c023 in pthread_mutex_lock () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x00007f6af9d3310d in __lll_lock_wait () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | | | | | | | | | 2    0x000055fa3c6e3354 in DB::MergeTreeBlockOutputStream::write(DB::Block const&) () at ../dbms/src/Storages/MergeTree/MergeTreeBlockOutputStream.cpp:24
| | | | | | | | | | | | | | 1    0x000055fa3c74f2ee in DB::MergeTreeDataWriter::writeTempPart(DB::BlockWithPartition&) () at /usr/include/c++/9/bits/shared_ptr_base.h:1020
| | | | | | | | | | | | | | | 1    0x000055fa3c788b27 in DB::MergedBlockOutputStream::MergedBlockOutputStream(DB::MergeTreeData&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, DB::NamesAndTypesList const&, std::shared_ptr<DB::ICompressionCodec>, bool) () at ../dbms/src/Storages/MergeTree/MergedBlockOutputStream.cpp:37
| | | | | | | | | | | | | | | | 1    DB::MergedBlockOutputStream::init() () at ../dbms/src/Storages/MergeTree/MergedBlockOutputStream.cpp:226
| | | | | | | | | | | | | | | | | 1    0x000055fa3c788204 in std::make_unique<DB::WriteBufferFromFile, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, unsigned long long, int> () at /usr/include/c++/9/bits/unique_ptr.h:852
| | | | | | | | | | | | | | | | | | 1    0x000055fa3cf6b7bd in DB::WriteBufferFromFile::WriteBufferFromFile(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long, int, unsigned int, char*, unsigned long) () at ../dbms/src/IO/WriteBufferFromFile.cpp:27
| | | | | | | | | | | | | | | | | | | 1    0x000055fa39196b1b in DB::WriteBufferFromFileDescriptor::WriteBufferFromFileDescriptor at ../dbms/src/IO/WriteBufferFromFileDescriptor.cpp:79
| | | | | | | | | | | | | | | | | | | | 1    DB::WriteBufferFromFileBase::WriteBufferFromFileBase at ../dbms/src/IO/WriteBufferFromFileBase.cpp:7
| | | | | | | | | | | | | | | | | | | | | 1    DB::BufferWithOwnMemory<DB::WriteBuffer>::BufferWithOwnMemory at ../dbms/src/IO/BufferWithOwnMemory.h:144
| | | | | | | | | | | | | | | | | | | | | | 1    DB::Memory<Allocator<false, false> >::Memory at ../dbms/src/IO/BufferWithOwnMemory.h:43
| | | | | | | | | | | | | | | | | | | | | | | 1    DB::Memory<Allocator<false, false> >::alloc at ../dbms/src/IO/BufferWithOwnMemory.h:117
| | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa391a39da in Allocator<false, false>::alloc at ../dbms/src/Common/Allocator.h:92
| | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa391849b8 in Allocator<false, false>::allocNoTrack at ../dbms/src/Common/Allocator.h:185
| | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5c3e6a in malloc at ../contrib/jemalloc/src/jemalloc.c:2274
| | | | | | | | | | | | | | | | | | | | | | | | | | | 1    malloc_default at ../contrib/jemalloc/src/jemalloc.c:2175
| | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    imalloc at ../contrib/jemalloc/src/jemalloc.c:2145
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    imalloc_body at ../contrib/jemalloc/src/jemalloc.c:2036
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    imalloc_no_sample at ../contrib/jemalloc/src/jemalloc.c:1840
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    iallocztm at ../contrib/jemalloc/include/jemalloc/internal/jemalloc_internal_inlines_c.h:53
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5c3507 in arena_malloc at ../contrib/jemalloc/include/jemalloc/internal/arena_inlines_b.h:151
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5eb5f8 in arena_malloc_hard at ../contrib/jemalloc/include/jemalloc/internal/sz.h:207
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    large_malloc at ../contrib/jemalloc/src/large.c:17
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5ca25a in large_palloc at ../contrib/jemalloc/include/jemalloc/internal/arena_inlines_b.h:13
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5e8649 in arena_extent_alloc_large at ../contrib/jemalloc/src/arena.c:385
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    extent_alloc_wrapper at ../contrib/jemalloc/src/extent.c:1515
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    extent_alloc_retained at ../contrib/jemalloc/src/extent.c:1445
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e6132ec in malloc_mutex_lock at ../contrib/jemalloc/include/jemalloc/internal/mutex.h:224
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    malloc_mutex_lock_slow at ../contrib/jemalloc/src/mutex.c:84
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5cd5d0 in malloc_mutex_lock_final at ../contrib/jemalloc/include/jemalloc/internal/mutex.h:160
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x00007f6af9d2c023 in pthread_mutex_lock () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x00007f6af9d3310d in __lll_lock_wait () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | | | | | 5    0x000055fa391dab01 in DB::TCPHandler::processInsertQuery(DB::Settings const&) () at ../dbms/programs/server/TCPHandler.cpp:417
| | | | | | | | | | 2    0x000055fa391da703 in DB::TCPHandler::readData(DB::Settings const&) () at ../dbms/programs/server/TCPHandler.cpp:388
| | | | | | | | | | | 2    0x000055fa391da4fb in DB::TCPHandler::receivePacket() () at ../dbms/programs/server/TCPHandler.cpp:801
| | | | | | | | | | | | 2    0x000055fa391d8214 in DB::TCPHandler::receiveData() () at /usr/include/c++/9/bits/shared_ptr_base.h:1020
| | | | | | | | | | | | | 2    0x000055fa3c2a2217 in DB::IBlockInputStream::read() () at ../dbms/src/DataStreams/IBlockInputStream.cpp:56
| | | | | | | | | | | | | | 2    0x000055fa3c2afb66 in DB::NativeBlockInputStream::readImpl() () at /usr/include/c++/9/bits/shared_ptr_base.h:1020
| | | | | | | | | | | | | | | 2    DB::NativeBlockInputStream::readData(DB::IDataType const&, DB::IColumn&, DB::ReadBuffer&, unsigned long, double) () at ../dbms/src/DataStreams/NativeBlockInputStream.cpp:70
| | | | | | | | | | | | | | | | 2    0x000055fa3c2af491 in DB::IDataType::deserializeBinaryBulkWithMultipleStreams at ../dbms/src/DataTypes/IDataType.h:193
| | | | | | | | | | | | | | | | | 2    0x000055fa3c353685 in DB::DataTypeString::deserializeBinaryBulk(DB::IColumn&, DB::ReadBuffer&, unsigned long, double) const () at ../dbms/src/DataTypes/DataTypeString.cpp:209
| | | | | | | | | | | | | | | | | | 1    void DB::deserializeBinarySSE2<1>(DB::PODArray<unsigned char, 4096ul, Allocator<false, false>, 15ul, 16ul>&, DB::PODArray<unsigned long, 4096ul, Allocator<false, false>, 15ul, 16ul>&, DB::ReadBuffer&, unsigned long) () at ../dbms/src/DataTypes/DataTypeString.cpp:130
| | | | | | | | | | | | | | | | | | | 1    DB::PODArrayBase<1ul, 4096ul, Allocator<false, false>, 15ul, 16ul>::resize<>(unsigned long) at ../dbms/src/Common/PODArray.h:214
| | | | | | | | | | | | | | | | | | | | 1    DB::PODArrayBase<1ul, 4096ul, Allocator<false, false>, 15ul, 16ul>::reserve<>(unsigned long) at ../dbms/src/Common/PODArray.h:205
| | | | | | | | | | | | | | | | | | | | | 1    DB::PODArrayBase<1ul, 4096ul, Allocator<false, false>, 15ul, 16ul>::reserve<>(unsigned long) at ../dbms/src/Common/PODArray.h:208
| | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3c34ed53 in DB::PODArrayBase<1ul, 4096ul, Allocator<false, false>, 15ul, 16ul>::realloc<>(unsigned long) at ../dbms/src/Common/PODArray.h:200
| | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa39192266 in Allocator<false, false>::realloc at ../libs/libcommon/include/common/mremap.h:71
| | | | | | | | | | | | | | | | | | | | | | | | 1    realloc at ../contrib/jemalloc/src/jemalloc.c:2599
| | | | | | | | | | | | | | | | | | | | | | | | | 1    iralloc at ../contrib/jemalloc/include/jemalloc/internal/jemalloc_internal_inlines_c.h:199
| | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5c16f0 in iralloct at ../contrib/jemalloc/include/jemalloc/internal/jemalloc_internal_inlines_c.h:192
| | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5ebfba in arena_ralloc at ../contrib/jemalloc/src/arena.c:1703
| | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5cb39c in large_ralloc at ../contrib/jemalloc/src/large.c:287
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5cad77 in large_ralloc_no_move at ../contrib/jemalloc/src/large.c:231
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5c9ee4 in large_ralloc_no_move_expand at ../contrib/jemalloc/include/jemalloc/internal/extent_inlines.h:158
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    extent_alloc_wrapper at ../contrib/jemalloc/src/extent.c:1515
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    extent_alloc_retained at ../contrib/jemalloc/src/extent.c:1445
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e6132ec in malloc_mutex_lock at ../contrib/jemalloc/include/jemalloc/internal/mutex.h:224
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    malloc_mutex_lock_slow at ../contrib/jemalloc/src/mutex.c:84
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5cd5d0 in malloc_mutex_lock_final at ../contrib/jemalloc/include/jemalloc/internal/mutex.h:160
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x00007f6af9d2c023 in pthread_mutex_lock () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x00007f6af9d3310d in __lll_lock_wait () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | | | | | | | | | | | | | 2    DB::DataTypeNumberBase<unsigned int>::deserializeBinaryBulk at ../dbms/src/DataTypes/DataTypeNumberBase.cpp:202
| | | | | | | | | | | | | | | | | | 1    DB::PODArrayBase<4ul, 4096ul, Allocator<false, false>, 15ul, 16ul>::resize<>(unsigned long) at ../dbms/src/Common/PODArray.h:214
| | | | | | | | | | | | | | | | | | | 1    0x000055fa3c345a8b in DB::PODArrayBase<4ul, 4096ul, Allocator<false, false>, 15ul, 16ul>::reserve<>(unsigned long) at ../dbms/src/IO/ReadBuffer.h:59
| | | | | | | | | | | | | | | | | | | | 1    DB::PODArrayBase<4ul, 4096ul, Allocator<false, false>, 15ul, 16ul>::reserve<>(unsigned long) at ../dbms/src/Common/PODArray.h:208
| | | | | | | | | | | | | | | | | | | | | 1    DB::PODArrayBase<4ul, 4096ul, Allocator<false, false>, 15ul, 16ul>::realloc<>(unsigned long) at ../dbms/src/Common/PODArray.h:130
| | | | | | | | | | | | | | | | | | | | | | 1    DB::PODArrayBase<4ul, 4096ul, Allocator<false, false>, 15ul, 16ul>::alloc<>(unsigned long) at ../dbms/src/Common/PODArray.h:108
| | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3c33b49d in Allocator<false, false>::alloc at ../dbms/src/Common/Allocator.h:92
| | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa391849b8 in Allocator<false, false>::allocNoTrack at ../dbms/src/Common/Allocator.h:185
| | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5c3e6a in malloc at ../contrib/jemalloc/src/jemalloc.c:2274
| | | | | | | | | | | | | | | | | | | | | | | | | | 1    malloc_default at ../contrib/jemalloc/src/jemalloc.c:2175
| | | | | | | | | | | | | | | | | | | | | | | | | | | 1    imalloc at ../contrib/jemalloc/src/jemalloc.c:2145
| | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    imalloc_body at ../contrib/jemalloc/src/jemalloc.c:2036
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    imalloc_no_sample at ../contrib/jemalloc/src/jemalloc.c:1840
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    iallocztm at ../contrib/jemalloc/include/jemalloc/internal/jemalloc_internal_inlines_c.h:53
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5c3507 in arena_malloc at ../contrib/jemalloc/include/jemalloc/internal/arena_inlines_b.h:151
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5eb5f8 in arena_malloc_hard at ../contrib/jemalloc/include/jemalloc/internal/sz.h:207
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    large_malloc at ../contrib/jemalloc/src/large.c:17
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5ca25a in large_palloc at ../contrib/jemalloc/include/jemalloc/internal/arena_inlines_b.h:13
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5e8649 in arena_extent_alloc_large at ../contrib/jemalloc/src/arena.c:385
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    extent_alloc_wrapper at ../contrib/jemalloc/src/extent.c:1515
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e61311b in extent_alloc_retained at ../contrib/jemalloc/src/extent.c:1447
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    extent_recycle at ../contrib/jemalloc/src/extent.c:1123
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    extent_recycle_extract at ../contrib/jemalloc/src/extent.c:943
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    extents_fit_locked at ../contrib/jemalloc/src/extent.c:517
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e61226e in extents_first_fit_locked at ../contrib/jemalloc/src/extent.c:484
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    extent_heap_first at ../contrib/jemalloc/src/extent.c:289
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    extent_snad_comp at ../contrib/jemalloc/include/jemalloc/internal/extent_inlines.h:422
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    extent_sn_comp at ../contrib/jemalloc/include/jemalloc/internal/extent_inlines.h:422
| | | | | | | | | 5    0x000055fa391daade in DB::TCPHandler::processInsertQuery(DB::Settings const&) () at /usr/include/c++/9/bits/stl_tree.h:720
| | | | | | | | | | 1    0x000055fa391d5f32 in DB::TCPHandler::sendData at ../dbms/programs/server/TCPHandler.cpp:1071
| | | | | | | | | | | 1    DB::TCPHandler::initBlockOutput(DB::Block const&) () at ../dbms/programs/server/TCPHandler.cpp:1007
| | | | | | | | | | | | 1    std::make_shared<DB::CompressedWriteBuffer, DB::WriteBuffer&, std::shared_ptr<DB::ICompressionCodec> > () at /usr/include/c++/9/bits/shared_ptr.h:718
| | | | | | | | | | | | | 1    std::allocate_shared<DB::CompressedWriteBuffer, std::allocator<DB::CompressedWriteBuffer>, DB::WriteBuffer&, std::shared_ptr<DB::ICompressionCodec> > at /usr/include/c++/9/bits/shared_ptr.h:702
| | | | | | | | | | | | | | 1    std::shared_ptr<DB::CompressedWriteBuffer>::shared_ptr<std::allocator<DB::CompressedWriteBuffer>, DB::WriteBuffer&, std::shared_ptr<DB::ICompressionCodec> > at /usr/include/c++/9/bits/shared_ptr.h:359
| | | | | | | | | | | | | | | 1    std::__shared_ptr<DB::CompressedWriteBuffer, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<DB::CompressedWriteBuffer>, DB::WriteBuffer&, std::shared_ptr<DB::ICompressionCodec> > at /usr/include/c++/9/bits/shared_ptr_base.h:1344
| | | | | | | | | | | | | | | | 1    std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<DB::CompressedWriteBuffer, std::allocator<DB::CompressedWriteBuffer>, DB::WriteBuffer&, std::shared_ptr<DB::ICompressionCodec> > at /usr/include/c++/9/bits/shared_ptr_base.h:679
| | | | | | | | | | | | | | | | | 1    std::_Sp_counted_ptr_inplace<DB::CompressedWriteBuffer, std::allocator<DB::CompressedWriteBuffer>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<DB::WriteBuffer&, std::shared_ptr<DB::ICompressionCodec> > at /usr/include/c++/9/bits/shared_ptr_base.h:548
| | | | | | | | | | | | | | | | | | 1    std::allocator_traits<std::allocator<DB::CompressedWriteBuffer> >::construct<DB::CompressedWriteBuffer, DB::WriteBuffer&, std::shared_ptr<DB::ICompressionCodec> > at /usr/include/c++/9/bits/alloc_traits.h:484
| | | | | | | | | | | | | | | | | | | 1    0x000055fa391d5d46 in __gnu_cxx::new_allocator<DB::CompressedWriteBuffer>::construct<DB::CompressedWriteBuffer, DB::WriteBuffer&, std::shared_ptr<DB::ICompressionCodec> > at /usr/include/c++/9/new:174
| | | | | | | | | | | | | | | | | | | | 1    DB::CompressedWriteBuffer::CompressedWriteBuffer at ../dbms/src/Compression/CompressedWriteBuffer.cpp:43
| | | | | | | | | | | | | | | | | | | | | 1    DB::BufferWithOwnMemory<DB::WriteBuffer>::BufferWithOwnMemory at ../dbms/src/IO/BufferWithOwnMemory.h:144
| | | | | | | | | | | | | | | | | | | | | | 1    DB::Memory<Allocator<false, false> >::Memory at ../dbms/src/IO/BufferWithOwnMemory.h:43
| | | | | | | | | | | | | | | | | | | | | | | 1    DB::Memory<Allocator<false, false> >::alloc at ../dbms/src/IO/BufferWithOwnMemory.h:117
| | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3c290968 in Allocator<false, false>::alloc at ../dbms/src/Common/Allocator.h:92
| | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa391849b8 in Allocator<false, false>::allocNoTrack at ../dbms/src/Common/Allocator.h:185
| | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5c3e6a in malloc at ../contrib/jemalloc/src/jemalloc.c:2274
| | | | | | | | | | | | | | | | | | | | | | | | | | | 1    malloc_default at ../contrib/jemalloc/src/jemalloc.c:2175
| | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    imalloc at ../contrib/jemalloc/src/jemalloc.c:2145
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    imalloc_body at ../contrib/jemalloc/src/jemalloc.c:2036
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    imalloc_no_sample at ../contrib/jemalloc/src/jemalloc.c:1840
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    iallocztm at ../contrib/jemalloc/include/jemalloc/internal/jemalloc_internal_inlines_c.h:53
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5c3507 in arena_malloc at ../contrib/jemalloc/include/jemalloc/internal/arena_inlines_b.h:151
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5eb5f8 in arena_malloc_hard at ../contrib/jemalloc/include/jemalloc/internal/sz.h:207
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    large_malloc at ../contrib/jemalloc/src/large.c:17
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5ca25a in large_palloc at ../contrib/jemalloc/include/jemalloc/internal/arena_inlines_b.h:13
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5e8649 in arena_extent_alloc_large at ../contrib/jemalloc/src/arena.c:385
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    extent_alloc_wrapper at ../contrib/jemalloc/src/extent.c:1515
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    extent_alloc_retained at ../contrib/jemalloc/src/extent.c:1445
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e6132ec in malloc_mutex_lock at ../contrib/jemalloc/include/jemalloc/internal/mutex.h:224
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    malloc_mutex_lock_slow at ../contrib/jemalloc/src/mutex.c:84
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5cd5d0 in malloc_mutex_lock_final at ../contrib/jemalloc/include/jemalloc/internal/mutex.h:160
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x00007f6af9d2c023 in pthread_mutex_lock () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x00007f6af9d3310d in __lll_lock_wait () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | | | 540  0x000055fa3cfc0489 in Poco::Net::HTTPServerConnection::run() () at ../contrib/poco/Net/src/HTTPServerConnection.cpp:85
| | | | | | | | 17   0x000055fa391ea409 in DB::HTTPHandler::handleRequest(Poco::Net::HTTPServerRequest&, Poco::Net::HTTPServerResponse&) () at ../dbms/programs/server/HTTPHandler.cpp:736
| | | | | | | | | 17   0x000055fa391e838e in DB::HTTPHandler::processQuery(Poco::Net::HTTPServerRequest&, HTMLForm&, Poco::Net::HTTPServerResponse&, DB::HTTPHandler::Output&) () at /usr/include/c++/9/bits/shared_ptr_base.h:1020
| | | | | | | | | | 13   0x000055fa3c53251d in DB::executeQuery(DB::ReadBuffer&, DB::WriteBuffer&, bool, DB::Context&, std::function<void (std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)>, std::function<void (std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)>) () at /usr/include/c++/9/bits/shared_ptr_base.h:1020
| | | | | | | | | | | 7    DB::copyData(DB::IBlockInputStream&, DB::IBlockOutputStream&, std::atomic<bool>*) () at ../dbms/src/DataStreams/copyData.cpp:61
| | | | | | | | | | | | 7    0x000055fa3c2be7c5 in DB::copyDataImpl<DB::copyData(DB::IBlockInputStream&, DB::IBlockOutputStream&, std::atomic<bool>*)::<lambda()>&, void (&)(const DB::Block&)> at /usr/include/c++/9/bits/stl_tree.h:1907
| | | | | | | | | | | | | 7    0x000055fa3c9aea0c in DB::CountingBlockOutputStream::write at /usr/include/c++/9/bits/shared_ptr_base.h:1020
| | | | | | | | | | | | | | 7    0x000055fa3c99003f in DB::AddingDefaultBlockOutputStream::write(DB::Block const&) () at /usr/include/c++/9/bits/shared_ptr_base.h:1020
| | | | | | | | | | | | | | | 7    0x000055fa3ca0abe1 in DB::PushingToViewsBlockOutputStream::write(DB::Block const&) () at ../dbms/src/DataStreams/PushingToViewsBlockOutputStream.cpp:116
| | | | | | | | | | | | | | | | 7    0x000055fa3c6c2943 in DB::DistributedBlockOutputStream::write(DB::Block const&) () at ../dbms/src/Storages/Distributed/DistributedBlockOutputStream.cpp:101
| | | | | | | | | | | | | | | | | 7    0x000055fa3c6bfe25 in DB::DistributedBlockOutputStream::writeSync(DB::Block const&) () at ../dbms/src/Storages/Distributed/DistributedBlockOutputStream.cpp:365
| | | | | | | | | | | | | | | | | | 7    0x000055fa3c6bcef2 in DB::DistributedBlockOutputStream::waitForJobs() () at /usr/include/c++/9/optional:893
| | | | | | | | | | | | | | | | | | | 7    ThreadPoolImpl<ThreadFromGlobalPool>::wait at ../dbms/src/Common/ThreadPool.cpp:146
| | | | | | | | | | | | | | | | | | | | 7    0x000055fa3919e82b in std::condition_variable::wait<ThreadPoolImpl<ThreadFromGlobalPool>::wait()::{lambda()#1}>(std::unique_lock<std::mutex>&, ThreadPoolImpl<ThreadFromGlobalPool>::wait()::{lambda()#1}) at ../dbms/src/Common/ThreadPool.cpp:146
| | | | | | | | | | | | | | | | | | | | | 7    0x000055fa3ed9e34c in std::condition_variable::wait(std::unique_lock<std::mutex>&) ()
| | | | | | | | | | | | | | | | | | | | | | 7    0x00007f6af9d2f9f3 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | | | | | | 13   0x000055fa3c532f83 in DB::executeQuery(DB::ReadBuffer&, DB::WriteBuffer&, bool, DB::Context&, std::function<void (std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)>, std::function<void (std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)>) () at ../dbms/src/Interpreters/executeQuery.cpp:572
| | | | | | | | | | | 3    0x000055fa3cf72671 in DB::copyData at ../dbms/src/IO/copyData.cpp:55
| | | | | | | | | | | | 3    DB::(anonymous namespace)::copyDataImpl(DB::ReadBuffer&, DB::WriteBuffer&, bool, unsigned long, std::atomic<int> const*) () at ../dbms/src/IO/copyData.cpp:23
| | | | | | | | | | | | | 3    DB::WriteBuffer::write at ../dbms/src/IO/WriteBuffer.h:77
| | | | | | | | | | | | | | 3    DB::WriteBuffer::nextIfAtEnd at ../dbms/src/IO/WriteBuffer.h:67
| | | | | | | | | | | | | | | 3    0x000055fa3cf7258f in DB::WriteBuffer::next at ../dbms/src/IO/WriteBuffer.h:44
| | | | | | | | | | | | | | | | 3    DB::WriteBufferFromVector<DB::PODArray<char, 4096ul, Allocator<false, false>, 0ul, 0ul> >::nextImpl at ../dbms/src/IO/WriteBufferFromVector.h:39
| | | | | | | | | | | | | | | | | 3    DB::PODArrayBase<1ul, 4096ul, Allocator<false, false>, 0ul, 0ul>::resize<>(unsigned long) at ../dbms/src/Common/PODArray.h:214
| | | | | | | | | | | | | | | | | | 3    DB::PODArrayBase<1ul, 4096ul, Allocator<false, false>, 0ul, 0ul>::reserve<>(unsigned long) at ../dbms/src/Common/PODArray.h:205
| | | | | | | | | | | | | | | | | | | 3    DB::PODArrayBase<1ul, 4096ul, Allocator<false, false>, 0ul, 0ul>::reserve<>(unsigned long) at ../dbms/src/Common/PODArray.h:208
| | | | | | | | | | | | | | | | | | | | 3    0x000055fa3c536556 in DB::PODArrayBase<1ul, 4096ul, Allocator<false, false>, 0ul, 0ul>::realloc<>(unsigned long) at ../dbms/src/Common/PODArray.h:126
| | | | | | | | | | | | | | | | | | | | | 3    0x000055fa39192266 in Allocator<false, false>::realloc at ../libs/libcommon/include/common/mremap.h:71
| | | | | | | | | | | | | | | | | | | | | | 3    realloc at ../contrib/jemalloc/src/jemalloc.c:2599
| | | | | | | | | | | | | | | | | | | | | | | 3    iralloc at ../contrib/jemalloc/include/jemalloc/internal/jemalloc_internal_inlines_c.h:199
| | | | | | | | | | | | | | | | | | | | | | | | 3    0x000055fa3e5c16f0 in iralloct at ../contrib/jemalloc/include/jemalloc/internal/jemalloc_internal_inlines_c.h:192
| | | | | | | | | | | | | | | | | | | | | | | | | 3    0x000055fa3e5ebfba in arena_ralloc at ../contrib/jemalloc/src/arena.c:1703
| | | | | | | | | | | | | | | | | | | | | | | | | | 3    0x000055fa3e5cb39c in large_ralloc at ../contrib/jemalloc/src/large.c:287
| | | | | | | | | | | | | | | | | | | | | | | | | | | 3    0x000055fa3e5cad77 in large_ralloc_no_move at ../contrib/jemalloc/src/large.c:231
| | | | | | | | | | | | | | | | | | | | | | | | | | | | 3    0x000055fa3e5c9ee4 in large_ralloc_no_move_expand at ../contrib/jemalloc/include/jemalloc/internal/extent_inlines.h:158
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | 3    extent_alloc_wrapper at ../contrib/jemalloc/src/extent.c:1515
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 3    extent_alloc_retained at ../contrib/jemalloc/src/extent.c:1445
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 3    0x000055fa3e6132ec in malloc_mutex_lock at ../contrib/jemalloc/include/jemalloc/internal/mutex.h:224
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 3    malloc_mutex_lock_slow at ../contrib/jemalloc/src/mutex.c:84
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 3    0x000055fa3e5cd5d0 in malloc_mutex_lock_final at ../contrib/jemalloc/include/jemalloc/internal/mutex.h:160
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 3    0x00007f6af9d2c023 in pthread_mutex_lock () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 3    0x00007f6af9d3310d in __lll_lock_wait () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | | | | | | 13   0x000055fa3c53304f in DB::executeQuery(DB::ReadBuffer&, DB::WriteBuffer&, bool, DB::Context&, std::function<void (std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)>, std::function<void (std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)>) () at ../dbms/src/Interpreters/executeQuery.cpp:651
| | | | | | | | | | | 2    DB::copyData(DB::IBlockInputStream&, DB::IBlockOutputStream&, std::atomic<bool>*) () at ../dbms/src/DataStreams/copyData.cpp:61
| | | | | | | | | | | | 2    0x000055fa3c2be72b in DB::copyDataImpl<DB::copyData(DB::IBlockInputStream&, DB::IBlockOutputStream&, std::atomic<bool>*)::<lambda()>&, void (&)(const DB::Block&)> at ../dbms/src/DataStreams/copyData.cpp:61
| | | | | | | | | | | | | 2    0x000055fa3c2a2217 in DB::IBlockInputStream::read() () at ../dbms/src/DataStreams/IBlockInputStream.cpp:56
| | | | | | | | | | | | | | 2    0x000055fa3c3e6b45 in DB::NullAndDoCopyBlockInputStream::readImpl at /usr/include/c++/9/bits/shared_ptr_base.h:1020
| | | | | | | | | | | | | | | 2    DB::copyData(DB::IBlockInputStream&, DB::IBlockOutputStream&, std::atomic<bool>*) () at ../dbms/src/DataStreams/copyData.cpp:61
| | | | | | | | | | | | | | | | 2    0x000055fa3c2be7c5 in DB::copyDataImpl<DB::copyData(DB::IBlockInputStream&, DB::IBlockOutputStream&, std::atomic<bool>*)::<lambda()>&, void (&)(const DB::Block&)> at /usr/include/c++/9/bits/stl_tree.h:1907
| | | | | | | | | | | | | | | | | 2    0x000055fa3c9aea0c in DB::CountingBlockOutputStream::write at /usr/include/c++/9/bits/shared_ptr_base.h:1020
| | | | | | | | | | | | | | | | | | 2    0x000055fa3c99003f in DB::AddingDefaultBlockOutputStream::write(DB::Block const&) () at /usr/include/c++/9/bits/shared_ptr_base.h:1020
| | | | | | | | | | | | | | | | | | | 2    0x000055fa3ca0abe1 in DB::PushingToViewsBlockOutputStream::write(DB::Block const&) () at ../dbms/src/DataStreams/PushingToViewsBlockOutputStream.cpp:116
| | | | | | | | | | | | | | | | | | | | 2    0x000055fa3c6c2943 in DB::DistributedBlockOutputStream::write(DB::Block const&) () at ../dbms/src/Storages/Distributed/DistributedBlockOutputStream.cpp:101
| | | | | | | | | | | | | | | | | | | | | 2    0x000055fa3c6bfe25 in DB::DistributedBlockOutputStream::writeSync(DB::Block const&) () at ../dbms/src/Storages/Distributed/DistributedBlockOutputStream.cpp:365
| | | | | | | | | | | | | | | | | | | | | | 2    0x000055fa3c6bcef2 in DB::DistributedBlockOutputStream::waitForJobs() () at /usr/include/c++/9/optional:893
| | | | | | | | | | | | | | | | | | | | | | | 2    ThreadPoolImpl<ThreadFromGlobalPool>::wait at ../dbms/src/Common/ThreadPool.cpp:146
| | | | | | | | | | | | | | | | | | | | | | | | 2    0x000055fa3919e82b in std::condition_variable::wait<ThreadPoolImpl<ThreadFromGlobalPool>::wait()::{lambda()#1}>(std::unique_lock<std::mutex>&, ThreadPoolImpl<ThreadFromGlobalPool>::wait()::{lambda()#1}) at ../dbms/src/Common/ThreadPool.cpp:146
| | | | | | | | | | | | | | | | | | | | | | | | | 2    0x000055fa3ed9e34c in std::condition_variable::wait(std::unique_lock<std::mutex>&) ()
| | | | | | | | | | | | | | | | | | | | | | | | | | 2    0x00007f6af9d2f9f3 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | | | | | | 13   0x000055fa3c532437 in DB::executeQuery(DB::ReadBuffer&, DB::WriteBuffer&, bool, DB::Context&, std::function<void (std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)>, std::function<void (std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)>) () at ../dbms/src/Interpreters/executeQuery.cpp:584
| | | | | | | | | | | 1    0x000055fa3c531070 in DB::executeQueryImpl(char const*, char const*, DB::Context&, bool, DB::QueryProcessingStage::Enum, bool) () at ../dbms/src/Interpreters/executeQuery.cpp:286
| | | | | | | | | | | | 1    0x000055fa3cb67824 in DB::InterpreterAlterQuery::execute() () at /usr/include/c++/9/bits/shared_ptr_base.h:1020
| | | | | | | | | | | | | 1    0x000055fa3c63a5e9 in DB::StorageMergeTree::alterPartition(std::shared_ptr<DB::IAST> const&, DB::PartitionCommands const&, DB::Context const&) () at ../dbms/src/Storages/StorageMergeTree.cpp:992
| | | | | | | | | | | | | | 1    0x000055fa3c6331ad in DB::StorageMergeTree::dropPartition(std::shared_ptr<DB::IAST> const&, bool, DB::Context const&) () at ../dbms/src/Storages/StorageMergeTree.cpp:1057
| | | | | | | | | | | | | | | 1    0x000055fa3c5f8bee in DB::IStorage::lockExclusively(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) () at /usr/include/c++/9/bits/shared_ptr_base.h:1020
| | | | | | | | | | | | | | | | 1    DB::RWLockImpl::getLock(DB::RWLockImpl::Type, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) () at ../dbms/src/Common/RWLock.cpp:183
| | | | | | | | | | | | | | | | | 1    0x000055fa3cf4eb6b in std::condition_variable::wait<DB::RWLockImpl::getLock(DB::RWLockImpl::Type, const String&)::<lambda()> > at /usr/include/c++/9/bits/stl_list.h:941
| | | | | | | | | | | | | | | | | | 1    0x000055fa3ed9e34c in std::condition_variable::wait(std::unique_lock<std::mutex>&) ()
| | | | | | | | | | | | | | | | | | | 1    0x00007f6af9d2f9f3 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | | | | | 17   DB::HTTPHandler::processQuery(Poco::Net::HTTPServerRequest&, HTMLForm&, Poco::Net::HTTPServerResponse&, DB::HTTPHandler::Output&) () at ../dbms/programs/server/HTTPHandler.cpp:346
| | | | | | | | | | 4    std::make_shared<DB::WriteBufferFromHTTPServerResponse, Poco::Net::HTTPServerRequest&, Poco::Net::HTTPServerResponse&, unsigned int&, bool&, DB::CompressionMethod&, unsigned long&> () at /usr/include/c++/9/bits/shared_ptr.h:718
| | | | | | | | | | | 4    std::allocate_shared<DB::WriteBufferFromHTTPServerResponse, std::allocator<DB::WriteBufferFromHTTPServerResponse>, Poco::Net::HTTPServerRequest&, Poco::Net::HTTPServerResponse&, unsigned int&, bool&, DB::CompressionMethod&, unsigned long&> at /usr/include/c++/9/bits/shared_ptr.h:702
| | | | | | | | | | | | 4    std::shared_ptr<DB::WriteBufferFromHTTPServerResponse>::shared_ptr<std::allocator<DB::WriteBufferFromHTTPServerResponse>, Poco::Net::HTTPServerRequest&, Poco::Net::HTTPServerResponse&, unsigned int&, bool&, DB::CompressionMethod&, unsigned long&> at /usr/include/c++/9/bits/shared_ptr.h:359
| | | | | | | | | | | | | 4    std::__shared_ptr<DB::WriteBufferFromHTTPServerResponse, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<DB::WriteBufferFromHTTPServerResponse>, Poco::Net::HTTPServerRequest&, Poco::Net::HTTPServerResponse&, unsigned int&, bool&, DB::CompressionMethod&, unsigned long&> at /usr/include/c++/9/bits/shared_ptr_base.h:1344
| | | | | | | | | | | | | | 4    std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<DB::WriteBufferFromHTTPServerResponse, std::allocator<DB::WriteBufferFromHTTPServerResponse>, Poco::Net::HTTPServerRequest&, Poco::Net::HTTPServerResponse&, unsigned int&, bool&, DB::CompressionMethod&, unsigned long&> at /usr/include/c++/9/bits/shared_ptr_base.h:679
| | | | | | | | | | | | | | | 4    std::_Sp_counted_ptr_inplace<DB::WriteBufferFromHTTPServerResponse, std::allocator<DB::WriteBufferFromHTTPServerResponse>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<Poco::Net::HTTPServerRequest&, Poco::Net::HTTPServerResponse&, unsigned int&, bool&, DB::CompressionMethod&, unsigned long&> at /usr/include/c++/9/bits/shared_ptr_base.h:548
| | | | | | | | | | | | | | | | 4    std::allocator_traits<std::allocator<DB::WriteBufferFromHTTPServerResponse> >::construct<DB::WriteBufferFromHTTPServerResponse, Poco::Net::HTTPServerRequest&, Poco::Net::HTTPServerResponse&, unsigned int&, bool&, DB::CompressionMethod&, unsigned long&> at /usr/include/c++/9/bits/alloc_traits.h:484
| | | | | | | | | | | | | | | | | 4    0x000055fa391e7344 in __gnu_cxx::new_allocator<DB::WriteBufferFromHTTPServerResponse>::construct<DB::WriteBufferFromHTTPServerResponse, Poco::Net::HTTPServerRequest&, Poco::Net::HTTPServerResponse&, unsigned int&, bool&, DB::CompressionMethod&, unsigned long&> at /usr/include/c++/9/new:174
| | | | | | | | | | | | | | | | | | 4    DB::WriteBufferFromHTTPServerResponse::WriteBufferFromHTTPServerResponse at ../dbms/src/IO/WriteBufferFromHTTPServerResponse.cpp:187
| | | | | | | | | | | | | | | | | | | 4    DB::BufferWithOwnMemory<DB::WriteBuffer>::BufferWithOwnMemory at ../dbms/src/IO/BufferWithOwnMemory.h:144
| | | | | | | | | | | | | | | | | | | | 4    DB::Memory<Allocator<false, false> >::Memory at ../dbms/src/IO/BufferWithOwnMemory.h:43
| | | | | | | | | | | | | | | | | | | | | 4    DB::Memory<Allocator<false, false> >::alloc at ../dbms/src/IO/BufferWithOwnMemory.h:117
| | | | | | | | | | | | | | | | | | | | | | 4    0x000055fa3cf6e499 in Allocator<false, false>::alloc at ../dbms/src/Common/Allocator.h:92
| | | | | | | | | | | | | | | | | | | | | | | 4    0x000055fa391849b8 in Allocator<false, false>::allocNoTrack at ../dbms/src/Common/Allocator.h:185
| | | | | | | | | | | | | | | | | | | | | | | | 4    0x000055fa3e5c3e6a in malloc at ../contrib/jemalloc/src/jemalloc.c:2274
| | | | | | | | | | | | | | | | | | | | | | | | | 4    malloc_default at ../contrib/jemalloc/src/jemalloc.c:2175
| | | | | | | | | | | | | | | | | | | | | | | | | | 4    imalloc at ../contrib/jemalloc/src/jemalloc.c:2145
| | | | | | | | | | | | | | | | | | | | | | | | | | | 4    imalloc_body at ../contrib/jemalloc/src/jemalloc.c:2036
| | | | | | | | | | | | | | | | | | | | | | | | | | | | 4    imalloc_no_sample at ../contrib/jemalloc/src/jemalloc.c:1840
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | 4    iallocztm at ../contrib/jemalloc/include/jemalloc/internal/jemalloc_internal_inlines_c.h:53
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 4    0x000055fa3e5c3507 in arena_malloc at ../contrib/jemalloc/include/jemalloc/internal/arena_inlines_b.h:151
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 4    0x000055fa3e5eb5f8 in arena_malloc_hard at ../contrib/jemalloc/include/jemalloc/internal/sz.h:207
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 4    large_malloc at ../contrib/jemalloc/src/large.c:17
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 4    0x000055fa3e5ca25a in large_palloc at ../contrib/jemalloc/include/jemalloc/internal/arena_inlines_b.h:13
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 4    0x000055fa3e5e8649 in arena_extent_alloc_large at ../contrib/jemalloc/src/arena.c:385
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 4    extent_alloc_wrapper at ../contrib/jemalloc/src/extent.c:1515
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 4    extent_alloc_retained at ../contrib/jemalloc/src/extent.c:1445
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 4    0x000055fa3e6132ec in malloc_mutex_lock at ../contrib/jemalloc/include/jemalloc/internal/mutex.h:224
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 4    malloc_mutex_lock_slow at ../contrib/jemalloc/src/mutex.c:84
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 4    0x000055fa3e5cd5d0 in malloc_mutex_lock_final at ../contrib/jemalloc/include/jemalloc/internal/mutex.h:160
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 4    0x00007f6af9d2c023 in pthread_mutex_lock () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 4    0x00007f6af9d3310d in __lll_lock_wait () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | | | 540  0x000055fa3cfc0308 in Poco::Net::HTTPServerConnection::run() () at ../contrib/poco/Net/src/HTTPServerConnection.cpp:61
| | | | | | | | 2    Poco::Net::HTTPServerSession::hasMoreRequests at ../contrib/poco/Net/src/HTTPServerSession.cpp:52
| | | | | | | | | 2    0x000055fa3cf93a3a in Poco::Net::Socket::poll at ../contrib/poco/Net/include/Poco/Net/Socket.h:374
| | | | | | | | | | 2    0x000055fa3cfb4fd6 in Poco::Net::SocketImpl::poll(Poco::Timespan const&, int) () at ../contrib/poco/Foundation/include/Poco/Timespan.h:195
| | | | | | | | | | | 2    0x00007f6af9646bb7 in epoll_wait () from /lib/x86_64-linux-gnu/libc.so.6
| | | | | | | 540  0x000055fa3cfc035b in Poco::Net::HTTPServerConnection::run() () at ../contrib/poco/Net/src/HTTPServerConnection.cpp:69
| | | | | | | | 1    0x000055fa3cf9355e in Poco::Net::HTTPServerRequestImpl::HTTPServerRequestImpl(Poco::Net::HTTPServerResponseImpl&, Poco::Net::HTTPServerSession&, Poco::Net::HTTPServerParams*) () at ../contrib/poco/Net/src/HTTPServerRequestImpl.cpp:43
| | | | | | | | | 1    0x000055fa3cf8f119 in Poco::Net::HTTPRequest::read(std::istream&) () at ../contrib/poco/Net/src/HTTPRequest.cpp:211
| | | | | | | | | | 1    0x000055fa3ede0aae in std::istream::get() ()
| | | | | | | | | | | 1    0x000055fa3ee0e286 in std::basic_streambuf<char, std::char_traits<char> >::uflow() ()
| | | | | | | | | | | | 1    0x000055fa3cf8b87b in Poco::BasicBufferedStreamBuf<char, std::char_traits<char>, Poco::Net::HTTPBufferAllocator>::underflow at /usr/include/c++/9/bits/char_traits.h:355
| | | | | | | | | | | | | 1    Poco::Net::HTTPHeaderStreamBuf::readFromDevice at ../contrib/poco/Net/src/HTTPHeaderStream.cpp:41
| | | | | | | | | | | | | | 1    0x000055fa3cf8ba12 in Poco::Net::HTTPHeaderStreamBuf::readFromDevice at ../contrib/poco/Net/src/HTTPHeaderStream.cpp:49
| | | | | | | | | | | | | | | 1    Poco::Net::HTTPSession::get at ../contrib/poco/Net/src/HTTPSession.cpp:112
| | | | | | | | | | | | | | | | 1    0x000055fa3cf940b3 in Poco::Net::HTTPSession::refill at ../contrib/poco/Net/src/HTTPSession.cpp:182
| | | | | | | | | | | | | | | | | 1    0x000055fa3cf94045 in Poco::Net::HTTPSession::receive(char*, int) () at ../contrib/poco/Net/src/HTTPSession.cpp:165
| | | | | | | | | | | | | | | | | | 1    0x000055fa3d09ad70 in Poco::Net::SecureSocketImpl::receiveBytes(void*, int, int) () at ../contrib/poco/NetSSL_OpenSSL/src/SecureSocketImpl.cpp:300
| | | | | | | | | | | | | | | | | | | 1    0x000055fa3d09a6f3 in Poco::Net::SecureSocketImpl::completeHandshake() () at ../contrib/poco/NetSSL_OpenSSL/src/SecureSocketImpl.cpp:335
| | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e733065 in ssl3_accept at ../contrib/ssl/ssl/ssl_srvr.c:221
| | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e7284d5 in ssl3_setup_init_buffer at ../contrib/ssl/ssl/ssl_both.c:654
| | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e747fff in BUF_MEM_grow_clean at ../contrib/ssl/crypto/buffer/buffer.c:121
| | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e7a5864 in recallocarray at ../contrib/ssl/crypto/compat/recallocarray.c:37
| | | | | | | | | | | | | | | | | | | | | | | | 1    calloc at ../contrib/jemalloc/src/jemalloc.c:2378
| | | | | | | | | | | | | | | | | | | | | | | | | 1    imalloc at ../contrib/jemalloc/src/jemalloc.c:2145
| | | | | | | | | | | | | | | | | | | | | | | | | | 1    imalloc_body at ../contrib/jemalloc/src/jemalloc.c:2036
| | | | | | | | | | | | | | | | | | | | | | | | | | | 1    imalloc_no_sample at ../contrib/jemalloc/src/jemalloc.c:1840
| | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    iallocztm at ../contrib/jemalloc/include/jemalloc/internal/jemalloc_internal_inlines_c.h:53
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    arena_malloc at ../contrib/jemalloc/include/jemalloc/internal/arena_inlines_b.h:144
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5c5004 in tcache_alloc_large at ../contrib/jemalloc/include/jemalloc/internal/tsd.h:207
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    large_malloc at ../contrib/jemalloc/src/large.c:17
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5ca25a in large_palloc at ../contrib/jemalloc/include/jemalloc/internal/arena_inlines_b.h:13
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5e8649 in arena_extent_alloc_large at ../contrib/jemalloc/src/arena.c:385
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    extent_alloc_wrapper at ../contrib/jemalloc/src/extent.c:1515
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    extent_alloc_retained at ../contrib/jemalloc/src/extent.c:1445
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e6132ec in malloc_mutex_lock at ../contrib/jemalloc/include/jemalloc/internal/mutex.h:224
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    malloc_mutex_lock_slow at ../contrib/jemalloc/src/mutex.c:84
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5cd5d0 in malloc_mutex_lock_final at ../contrib/jemalloc/include/jemalloc/internal/mutex.h:160
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x00007f6af9d2c023 in pthread_mutex_lock () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x00007f6af9d3310d in __lll_lock_wait () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | 625  0x000055fa3cfbb922 in Poco::Net::TCPServerDispatcher::run() () at ../contrib/poco/Net/src/TCPServerDispatcher.cpp:105
| | | | | | 85   Poco::NotificationQueue::waitDequeueNotification(long) () at ../contrib/poco/Foundation/src/NotificationQueue.cpp:114
| | | | | | | 85   0x000055fa3e66be3a in Poco::Event::tryWait at ../contrib/poco/Foundation/include/Poco/Event.h:109
| | | | | | | | 85   Poco::Event::waitImpl(long) () at ../contrib/poco/Foundation/src/Event.cpp:94
| | | | | | | | | 85   std::condition_variable::wait_for<long int, std::ratio<1, 1000>, Poco::Event::waitImpl(long int)::<lambda()> > at /usr/include/c++/9/condition_variable:166
| | | | | | | | | | 85   std::condition_variable::wait_until<std::chrono::_V2::steady_clock, std::chrono::duration<long int, std::ratio<1, 1000000000> >, Poco::Event::waitImpl(long int)::<lambda()> > at /usr/include/c++/9/condition_variable:138
| | | | | | | | | | | 85   std::condition_variable::wait_until<std::chrono::_V2::steady_clock, std::chrono::duration<long, std::ratio<1l, 1000000000l> > > at /usr/include/c++/9/condition_variable:121
| | | | | | | | | | | | 85   std::condition_variable::__wait_until_impl<std::chrono::duration<long, std::ratio<1l, 1000000000l> > > at /usr/include/c++/9/condition_variable:188
| | | | | | | | | | | | | 85   0x000055fa3e638504 in __gthread_cond_timedwait at /usr/include/x86_64-linux-gnu/c++/9/bits/gthr-default.h:872
| | | | | | | | | | | | | | 85   0x00007f6af9d2ff85 in pthread_cond_timedwait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | 634  Poco::Net::TCPServer::run() () at ../contrib/poco/Net/src/TCPServer.cpp:133
| | | | | 5    0x000055fa3cfbb0a6 in Poco::Net::Socket::poll at ../contrib/poco/Net/include/Poco/Net/Socket.h:374
| | | | | | 5    0x000055fa3cfb4fd6 in Poco::Net::SocketImpl::poll(Poco::Timespan const&, int) () at ../contrib/poco/Foundation/include/Poco/Timespan.h:195
| | | | | | | 5    0x00007f6af9646bb7 in epoll_wait () from /lib/x86_64-linux-gnu/libc.so.6
| | | | 634  0x000055fa3e69ec58 in Poco::PooledThread::run() () at ../contrib/poco/Foundation/src/ThreadPool.cpp:206
| | | | | 2    Poco::Event::wait() () at ../contrib/poco/Foundation/src/Event.cpp:79
| | | | | | 2    0x000055fa3e6383cb in std::condition_variable::wait<Poco::Event::wait()::<lambda()> > at /usr/include/c++/9/condition_variable:98
| | | | | | | 2    0x000055fa3ed9e34c in std::condition_variable::wait(std::unique_lock<std::mutex>&) ()
| | | | | | | | 2    0x00007f6af9d2f9f3 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | 634  0x000055fa3e69ed01 in Poco::PooledThread::run() () at ../contrib/poco/Foundation/src/ThreadPool.cpp:206
| | | | | 1    Poco::Event::wait() () at ../contrib/poco/Foundation/src/Event.cpp:79
| | | | | | 1    0x000055fa3e6383cb in std::condition_variable::wait<Poco::Event::wait()::<lambda()> > at /usr/include/c++/9/condition_variable:98
| | | | | | | 1    0x000055fa3ed9e34c in std::condition_variable::wait(std::unique_lock<std::mutex>&) ()
| | | | | | | | 1    0x00007f6af9d2f9f3 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | 634  SignalListener::run at ../libs/libdaemon/src/BaseDaemon.cpp:147
| | | | | 1    DB::ReadBuffer::eof at ../dbms/src/IO/ReadBuffer.h:81
| | | | | | 1    0x000055fa392ed626 in DB::ReadBuffer::next at ../dbms/src/IO/ReadBuffer.h:53
| | | | | | | 1    DB::ReadBufferFromFileDescriptor::nextImpl() () at ../dbms/src/IO/ReadBufferFromFileDescriptor.cpp:56
| | | | | | | | 1    0x000055fa39184f7a in read at /usr/include/x86_64-linux-gnu/bits/unistd.h:44
| | | | | | | | | 1    0x00007f6af9d33384 in read () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | 919  ThreadPoolImpl<std::thread>::worker at ../dbms/src/Common/ThreadPool.cpp:199
| | | | 224  0x000055fa391a093f in std::condition_variable::wait<ThreadPoolImpl<std::thread>::worker(std::_List_iterator<std::thread>)::{lambda()#1}>(std::unique_lock<std::mutex>&, ThreadPoolImpl<std::thread>::worker(std::_List_iterator<std::thread>)::{lambda()#1}) at /usr/include/c++/9/bits/std_function.h:260
| | | | | 224  0x000055fa3ed9e34c in std::condition_variable::wait(std::unique_lock<std::mutex>&) ()
| | | | | | 224  0x00007f6af9d2f9f3 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | 919  ThreadPoolImpl<std::thread>::worker at ../dbms/src/Common/ThreadPool.cpp:221
| | | | 61   0x000055fa391a088c in std::function<void ()>::operator()() const at /usr/include/c++/9/bits/std_function.h:685
| | | | | 61   ThreadFromGlobalPool::ThreadFromGlobalPool<DB::BackgroundProcessingPool::BackgroundProcessingPool(int)::{lambda()#1}>(DB::BackgroundProcessingPool::BackgroundProcessingPool(int)::{lambda()#1}&&)::{lambda()#1}::operator()() const () at ../dbms/src/Common/ThreadPool.h:151
| | | | | | 16   std::apply<const DB::BackgroundProcessingPool::BackgroundProcessingPool(int)::<lambda()>&, const std::tuple<>&> at /usr/include/c++/9/tuple:1694
| | | | | | | 16   std::__apply_impl<const DB::BackgroundProcessingPool::BackgroundProcessingPool(int)::<lambda()>&, const std::tuple<>&> at /usr/include/c++/9/tuple:1684
| | | | | | | | 16   std::__invoke<const DB::BackgroundProcessingPool::BackgroundProcessingPool(int)::<lambda()>&> at /usr/include/c++/9/bits/invoke.h:95
| | | | | | | | | 16   std::__invoke_impl<void, const DB::BackgroundProcessingPool::BackgroundProcessingPool(int)::<lambda()>&> at /usr/include/c++/9/bits/invoke.h:60
| | | | | | | | | | 16   0x000055fa3c6c71aa in DB::BackgroundProcessingPool::<lambda()>::operator() at ../dbms/src/Storages/MergeTree/BackgroundProcessingPool.cpp:70
| | | | | | | | | | | 16   DB::BackgroundProcessingPool::threadFunction() () at ../dbms/src/Storages/MergeTree/BackgroundProcessingPool.cpp:192
| | | | | | | | | | | | 15   std::condition_variable::wait_for<long, std::ratio<1l, 1000000l> > at /usr/include/c++/9/condition_variable:152
| | | | | | | | | | | | | 15   std::condition_variable::wait_until<std::chrono::_V2::steady_clock, std::chrono::duration<long, std::ratio<1l, 1000000000l> > > at /usr/include/c++/9/condition_variable:121
| | | | | | | | | | | | | | 15   std::condition_variable::__wait_until_impl<std::chrono::duration<long, std::ratio<1l, 1000000000l> > > at /usr/include/c++/9/condition_variable:188
| | | | | | | | | | | | | | | 15   0x000055fa3c6c66ec in __gthread_cond_timedwait at /usr/include/x86_64-linux-gnu/c++/9/bits/gthr-default.h:872
| | | | | | | | | | | | | | | | 15   0x00007f6af9d2ff85 in pthread_cond_timedwait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | | | | | | | 16   DB::BackgroundProcessingPool::threadFunction() () at ../dbms/src/Storages/MergeTree/BackgroundProcessingPool.cpp:203
| | | | | | | | | | | | 1    0x000055fa3c6c6834 in std::function<DB::BackgroundProcessingPoolTaskResult ()>::operator()() const at /usr/include/c++/9/bits/std_function.h:685
| | | | | | | | | | | | | 1    0x000055fa3c63b868 in DB::StorageMergeTree::backgroundTask() () at ../dbms/src/Storages/StorageMergeTree.cpp:790
| | | | | | | | | | | | | | 1    0x000055fa3c6fcfbf in DB::MergeTreeData::clearOldTemporaryDirectories(long) () at ../dbms/src/Storages/MergeTree/MergeTreeData.cpp:977
| | | | | | | | | | | | | | | 1    0x000055fa3e635c95 in Poco::DirectoryIterator::operator++ at ../contrib/poco/Foundation/src/DirectoryIterator.cpp:128
| | | | | | | | | | | | | | | | 1    0x000055fa3e64a6e1 in Poco::File::operator=(Poco::Path const&) () at ../contrib/poco/Foundation/src/File.cpp:95
| | | | | | | | | | | | | | | | | 1    0x000055fa3e681bf1 in Poco::Path::toString[abi:cxx11]() const at ../contrib/poco/Foundation/src/Path.cpp:227
| | | | | | | | | | | | | | | | | | 1    Poco::Path::buildUnix[abi:cxx11]() const () at ../contrib/poco/Foundation/src/Path.cpp:997
| | | | | | | | | | | | | | | | | | | 1    0x000055fa3e681b2b in std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::append at /usr/include/c++/9/bits/basic_string.h:1221
| | | | | | | | | | | | | | | | | | | | 1    0x000055fa3ee10ffb in std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_append(char const*, unsigned long) ()
| | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3ee0f9dd in std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_mutate(unsigned long, unsigned long, char const*, unsigned long) ()
| | | | | | | | | | | | | | | | | | | | | | 1    operator new(unsigned long) () at ../dbms/src/Common/new_delete.cpp:71
| | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa39163449 in Memory::newImpl at ../libs/libcommon/include/common/memory.h:44
| | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5c3e6a in malloc at ../contrib/jemalloc/src/jemalloc.c:2274
| | | | | | | | | | | | | | | | | | | | | | | | | 1    malloc_default at ../contrib/jemalloc/src/jemalloc.c:2175
| | | | | | | | | | | | | | | | | | | | | | | | | | 1    imalloc at ../contrib/jemalloc/src/jemalloc.c:2145
| | | | | | | | | | | | | | | | | | | | | | | | | | | 1    imalloc_body at ../contrib/jemalloc/src/jemalloc.c:2036
| | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    imalloc_no_sample at ../contrib/jemalloc/src/jemalloc.c:1840
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    iallocztm at ../contrib/jemalloc/include/jemalloc/internal/jemalloc_internal_inlines_c.h:53
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    arena_malloc at ../contrib/jemalloc/include/jemalloc/internal/arena_inlines_b.h:144
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    tcache_alloc_large at ../contrib/jemalloc/include/jemalloc/internal/tcache_inlines.h:159
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5c3233 in tcache_event at ../contrib/jemalloc/include/jemalloc/internal/tcache_inlines.h:37
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5e35f9 in tcache_event_hard at ../contrib/jemalloc/src/tcache.c:54
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    tcache_bin_flush_small at ../contrib/jemalloc/src/tcache.c:164
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5e2c46 in arena_decay_ticks at ../contrib/jemalloc/include/jemalloc/internal/arena_inlines_b.h:121
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    arena_decay at ../contrib/jemalloc/src/arena.c:935
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    arena_decay_dirty at ../contrib/jemalloc/src/arena.c:922
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5e8ea3 in arena_decay_impl at ../contrib/jemalloc/src/arena.c:901
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    arena_maybe_decay at ../contrib/jemalloc/src/arena.c:651
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    arena_maybe_decay at ../contrib/jemalloc/src/arena.c:699
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    arena_decay_try_purge at ../contrib/jemalloc/src/arena.c:548
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5e6d79 in arena_decay_try_purge at ../contrib/jemalloc/src/arena.c:659
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    arena_decay_to_limit at ../contrib/jemalloc/src/arena.c:874
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5e6aec in arena_decay_stashed at ../contrib/jemalloc/src/arena.c:817
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    extent_record at ../contrib/jemalloc/src/extent.c:1677
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e6115a8 in malloc_mutex_lock at ../contrib/jemalloc/include/jemalloc/internal/mutex.h:224
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    malloc_mutex_lock_slow at ../contrib/jemalloc/src/mutex.c:84
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5cd5d0 in malloc_mutex_lock_final at ../contrib/jemalloc/include/jemalloc/internal/mutex.h:160
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x00007f6af9d2c023 in pthread_mutex_lock () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x00007f6af9d3310d in __lll_lock_wait () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | 61   ThreadFromGlobalPool::ThreadFromGlobalPool<DB::BackgroundSchedulePool::BackgroundSchedulePool(unsigned long)::{lambda()#1}>(DB::BackgroundSchedulePool::BackgroundSchedulePool(unsigned long)::{lambda()#1}&&)::{lambda()#1}::operator()() const () at ../dbms/src/Common/ThreadPool.h:151
| | | | | | 16   std::apply<const DB::BackgroundSchedulePool::BackgroundSchedulePool(size_t)::<lambda()>&, const std::tuple<>&> at /usr/include/c++/9/tuple:1694
| | | | | | | 16   std::__apply_impl<const DB::BackgroundSchedulePool::BackgroundSchedulePool(size_t)::<lambda()>&, const std::tuple<>&> at /usr/include/c++/9/tuple:1684
| | | | | | | | 16   std::__invoke<const DB::BackgroundSchedulePool::BackgroundSchedulePool(size_t)::<lambda()>&> at /usr/include/c++/9/bits/invoke.h:95
| | | | | | | | | 16   std::__invoke_impl<void, const DB::BackgroundSchedulePool::BackgroundSchedulePool(size_t)::<lambda()>&> at /usr/include/c++/9/bits/invoke.h:60
| | | | | | | | | | 16   0x000055fa3c95da2a in DB::BackgroundSchedulePool::<lambda()>::operator() at ../dbms/src/Core/BackgroundSchedulePool.cpp:165
| | | | | | | | | | | 16   0x000055fa3c95d999 in DB::BackgroundSchedulePool::threadFunction() () at ../dbms/src/Core/BackgroundSchedulePool.cpp:259
| | | | | | | | | | | | 16   0x000055fa3e66bc66 in Poco::NotificationQueue::waitDequeueNotification() () at ../contrib/poco/Foundation/src/NotificationQueue.cpp:96
| | | | | | | | | | | | | 16   Poco::Event::wait() () at ../contrib/poco/Foundation/src/Event.cpp:79
| | | | | | | | | | | | | | 16   0x000055fa3e6383cb in std::condition_variable::wait<Poco::Event::wait()::<lambda()> > at /usr/include/c++/9/condition_variable:98
| | | | | | | | | | | | | | | 16   0x000055fa3ed9e34c in std::condition_variable::wait(std::unique_lock<std::mutex>&) ()
| | | | | | | | | | | | | | | | 16   0x00007f6af9d2f9f3 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | 61   ThreadFromGlobalPool::ThreadFromGlobalPool<void ThreadPoolImpl<ThreadFromGlobalPool>::scheduleImpl<void>(std::function<void ()>, int, std::optional<unsigned long>)::{lambda()#3}>(void ThreadPoolImpl<ThreadFromGlobalPool>::scheduleImpl<void>(std::function<void ()>, int, std::optional<unsigned long>)::{lambda()#3}&&)::{lambda()#1}::operator()() const at ../dbms/src/Common/ThreadPool.h:151
| | | | | | 13   std::apply<void ThreadPoolImpl<ThreadFromGlobalPool>::scheduleImpl<void>(std::function<void ()>, int, std::optional<unsigned long>)::{lambda()#3} const&, std::tuple<> const&>(void ThreadPoolImpl<ThreadFromGlobalPool>::scheduleImpl<void>(std::function<void ()>, int, std::optional<unsigned long>)::{lambda()#3} const&, std::tuple<> const&) at /usr/include/c++/9/tuple:1694
| | | | | | | 13   std::__apply_impl<void ThreadPoolImpl<ThreadFromGlobalPool>::scheduleImpl<void>(std::function<void ()>, int, std::optional<unsigned long>)::{lambda()#3} const&, std::tuple<> const&>(void ThreadPoolImpl<ThreadFromGlobalPool>::scheduleImpl<void>(std::function<void ()>, int, std::optional<unsigned long>)::{lambda()#3} const&, std::tuple<> const&, std::integer_sequence<unsigned long>) at /usr/include/c++/9/tuple:1684
| | | | | | | | 13   std::__invoke<void ThreadPoolImpl<ThreadFromGlobalPool>::scheduleImpl<void>(std::function<void ()>, int, std::optional<unsigned long>)::{lambda()#3} const&>(void ThreadPoolImpl<ThreadFromGlobalPool>::scheduleImpl<void>(std::function<void ()>, int, std::optional<unsigned long>)::{lambda()#3} const&, (std::__invoke_result&&)...) at /usr/include/c++/9/bits/invoke.h:95
| | | | | | | | | 13   std::__invoke_impl<void, void ThreadPoolImpl<ThreadFromGlobalPool>::scheduleImpl<void>(std::function<void ()>, int, std::optional<unsigned long>)::{lambda()#3} const&>(std::__invoke_other, void ThreadPoolImpl<ThreadFromGlobalPool>::scheduleImpl<void>(std::function<void ()>, int, std::optional<unsigned long>)::{lambda()#3} const&) at /usr/include/c++/9/bits/invoke.h:60
| | | | | | | | | | 13   0x000055fa391a33ee in void ThreadPoolImpl<ThreadFromGlobalPool>::scheduleImpl<void>(std::function<void ()>, int, std::optional<unsigned long>)::{lambda()#3}::operator()() const at ../dbms/src/Common/ThreadPool.cpp:102
| | | | | | | | | | | 13   ThreadPoolImpl<ThreadFromGlobalPool>::worker at ../dbms/src/Common/ThreadPool.cpp:221
| | | | | | | | | | | | 9    0x000055fa391a2dde in std::function<void ()>::operator()() const at /usr/include/c++/9/bits/std_function.h:685
| | | | | | | | | | | | | 9    0x000055fa3c6bde47 in DB::DistributedBlockOutputStream::runWritingJob(DB::DistributedBlockOutputStream::JobReplica&, DB::Block const&)::{lambda()#1}::operator()() const () at ../dbms/src/Storages/Distributed/DistributedBlockOutputStream.cpp:248
| | | | | | | | | | | | | | 5    DB::ColumnString::permute(DB::PODArray<unsigned long, 4096ul, Allocator<false, false>, 15ul, 16ul> const&, unsigned long) const () at ../dbms/src/Columns/ColumnString.cpp:146
| | | | | | | | | | | | | | | 4    DB::PODArrayBase<8ul, 4096ul, Allocator<false, false>, 15ul, 16ul>::resize<>(unsigned long) at ../dbms/src/Common/PODArray.h:214
| | | | | | | | | | | | | | | | 4    DB::PODArrayBase<8ul, 4096ul, Allocator<false, false>, 15ul, 16ul>::reserve<>(unsigned long) at ../dbms/src/Common/PODArray.h:205
| | | | | | | | | | | | | | | | | 4    DB::PODArrayBase<8ul, 4096ul, Allocator<false, false>, 15ul, 16ul>::reserve<>(unsigned long) at ../dbms/src/Common/PODArray.h:208
| | | | | | | | | | | | | | | | | | 4    DB::PODArrayBase<8ul, 4096ul, Allocator<false, false>, 15ul, 16ul>::realloc<>(unsigned long) at ../dbms/src/Common/PODArray.h:130
| | | | | | | | | | | | | | | | | | | 4    DB::PODArrayBase<8ul, 4096ul, Allocator<false, false>, 15ul, 16ul>::alloc<>(unsigned long) at ../dbms/src/Common/PODArray.h:108
| | | | | | | | | | | | | | | | | | | | 4    Allocator<false, false>::alloc at ../dbms/src/Common/Allocator.h:95
| | | | | | | | | | | | | | | | | | | | | 4    0x000055fa3c58b8ed in Allocator<false, false>::allocNoTrack at /usr/include/x86_64-linux-gnu/bits/string_fortified.h:71
| | | | | | | | | | | | | | | | | | | | | | 4    0x000055fa3e5c3e6a in malloc at ../contrib/jemalloc/src/jemalloc.c:2274
| | | | | | | | | | | | | | | | | | | | | | | 4    malloc_default at ../contrib/jemalloc/src/jemalloc.c:2175
| | | | | | | | | | | | | | | | | | | | | | | | 4    imalloc at ../contrib/jemalloc/src/jemalloc.c:2145
| | | | | | | | | | | | | | | | | | | | | | | | | 4    imalloc_body at ../contrib/jemalloc/src/jemalloc.c:2036
| | | | | | | | | | | | | | | | | | | | | | | | | | 4    imalloc_no_sample at ../contrib/jemalloc/src/jemalloc.c:1840
| | | | | | | | | | | | | | | | | | | | | | | | | | | 4    iallocztm at ../contrib/jemalloc/include/jemalloc/internal/jemalloc_internal_inlines_c.h:53
| | | | | | | | | | | | | | | | | | | | | | | | | | | | 4    0x000055fa3e5c3507 in arena_malloc at ../contrib/jemalloc/include/jemalloc/internal/arena_inlines_b.h:151
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | 4    0x000055fa3e5eb5f8 in arena_malloc_hard at ../contrib/jemalloc/include/jemalloc/internal/sz.h:207
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 4    large_malloc at ../contrib/jemalloc/src/large.c:17
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 4    0x000055fa3e5ca25a in large_palloc at ../contrib/jemalloc/include/jemalloc/internal/arena_inlines_b.h:13
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 4    0x000055fa3e5e8649 in arena_extent_alloc_large at ../contrib/jemalloc/src/arena.c:385
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 4    extent_alloc_wrapper at ../contrib/jemalloc/src/extent.c:1515
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 4    extent_alloc_retained at ../contrib/jemalloc/src/extent.c:1445
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 4    0x000055fa3e6132ec in malloc_mutex_lock at ../contrib/jemalloc/include/jemalloc/internal/mutex.h:224
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 4    malloc_mutex_lock_slow at ../contrib/jemalloc/src/mutex.c:84
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 4    0x000055fa3e5cd5d0 in malloc_mutex_lock_final at ../contrib/jemalloc/include/jemalloc/internal/mutex.h:160
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 4    0x00007f6af9d2c023 in pthread_mutex_lock () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 4    0x00007f6af9d3310d in __lll_lock_wait () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | | | | | | | | | | 5    DB::ColumnString::permute(DB::PODArray<unsigned long, 4096ul, Allocator<false, false>, 15ul, 16ul> const&, unsigned long) const () at ../dbms/src/Columns/ColumnString.cpp:143
| | | | | | | | | | | | | | | 1    DB::PODArrayBase<1ul, 4096ul, Allocator<false, false>, 15ul, 16ul>::resize<>(unsigned long) at ../dbms/src/Common/PODArray.h:214
| | | | | | | | | | | | | | | | 1    DB::PODArrayBase<1ul, 4096ul, Allocator<false, false>, 15ul, 16ul>::reserve<>(unsigned long) at ../dbms/src/Common/PODArray.h:205
| | | | | | | | | | | | | | | | | 1    DB::PODArrayBase<1ul, 4096ul, Allocator<false, false>, 15ul, 16ul>::reserve<>(unsigned long) at ../dbms/src/Common/PODArray.h:208
| | | | | | | | | | | | | | | | | | 1    DB::PODArrayBase<1ul, 4096ul, Allocator<false, false>, 15ul, 16ul>::realloc<>(unsigned long) at ../dbms/src/Common/PODArray.h:130
| | | | | | | | | | | | | | | | | | | 1    DB::PODArrayBase<1ul, 4096ul, Allocator<false, false>, 15ul, 16ul>::alloc<>(unsigned long) at ../dbms/src/Common/PODArray.h:108
| | | | | | | | | | | | | | | | | | | | 1    0x000055fa3c58b85b in Allocator<false, false>::alloc at ../dbms/src/Common/Allocator.h:92
| | | | | | | | | | | | | | | | | | | | | 1    0x000055fa391849b8 in Allocator<false, false>::allocNoTrack at ../dbms/src/Common/Allocator.h:185
| | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5c3e6a in malloc at ../contrib/jemalloc/src/jemalloc.c:2274
| | | | | | | | | | | | | | | | | | | | | | | 1    malloc_default at ../contrib/jemalloc/src/jemalloc.c:2175
| | | | | | | | | | | | | | | | | | | | | | | | 1    imalloc at ../contrib/jemalloc/src/jemalloc.c:2145
| | | | | | | | | | | | | | | | | | | | | | | | | 1    imalloc_body at ../contrib/jemalloc/src/jemalloc.c:2036
| | | | | | | | | | | | | | | | | | | | | | | | | | 1    imalloc_no_sample at ../contrib/jemalloc/src/jemalloc.c:1840
| | | | | | | | | | | | | | | | | | | | | | | | | | | 1    iallocztm at ../contrib/jemalloc/include/jemalloc/internal/jemalloc_internal_inlines_c.h:53
| | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    arena_malloc at ../contrib/jemalloc/include/jemalloc/internal/arena_inlines_b.h:144
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5c375a in tcache_alloc_large at ../contrib/jemalloc/include/jemalloc/internal/tsd.h:207
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    large_malloc at ../contrib/jemalloc/src/large.c:17
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5ca25a in large_palloc at ../contrib/jemalloc/include/jemalloc/internal/arena_inlines_b.h:13
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5e8649 in arena_extent_alloc_large at ../contrib/jemalloc/src/arena.c:385
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    extent_alloc_wrapper at ../contrib/jemalloc/src/extent.c:1515
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    extent_alloc_retained at ../contrib/jemalloc/src/extent.c:1445
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e6132ec in malloc_mutex_lock at ../contrib/jemalloc/include/jemalloc/internal/mutex.h:224
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    malloc_mutex_lock_slow at ../contrib/jemalloc/src/mutex.c:84
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5cd5d0 in malloc_mutex_lock_final at ../contrib/jemalloc/include/jemalloc/internal/mutex.h:160
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x00007f6af9d2c023 in pthread_mutex_lock () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x00007f6af9d3310d in __lll_lock_wait () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | | | | | | | | | 9    0x000055fa3c6be20e in DB::DistributedBlockOutputStream::runWritingJob(DB::DistributedBlockOutputStream::JobReplica&, DB::Block const&)::{lambda()#1}::operator()() const () at /usr/include/c++/9/bits/shared_ptr_base.h:1020
| | | | | | | | | | | | | | 2    0x000055fa3c7fbe47 in DB::ConnectionPoolWithFailover::getMany(DB::ConnectionTimeouts const&, DB::Settings const*, DB::PoolMode) () at ../dbms/src/Client/ConnectionPoolWithFailover.cpp:85
| | | | | | | | | | | | | | | 2    0x000055fa3c7fbc31 in DB::ConnectionPoolWithFailover::getManyImpl(DB::Settings const*, DB::PoolMode, std::function<PoolWithFailoverBase<DB::IConnectionPool>::TryResult (DB::IConnectionPool&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&)> const&) () at ../dbms/src/Client/ConnectionPoolWithFailover.cpp:160
| | | | | | | | | | | | | | | | 2    PoolWithFailoverBase<DB::IConnectionPool>::getMany(unsigned long, unsigned long, unsigned long, std::function<PoolWithFailoverBase<DB::IConnectionPool>::TryResult (DB::IConnectionPool&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&)> const&, std::function<unsigned long (unsigned long)> const&, bool) at ../dbms/src/Common/PoolWithFailoverBase.h:218
| | | | | | | | | | | | | | | | | 2    0x000055fa3c802325 in std::function<PoolWithFailoverBase<DB::IConnectionPool>::TryResult (DB::IConnectionPool&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&)>::operator()(DB::IConnectionPool&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&) const at /usr/include/c++/9/bits/std_function.h:685
| | | | | | | | | | | | | | | | | | 2    std::_Function_handler<PoolWithFailoverBase<DB::IConnectionPool>::TryResult(DB::IConnectionPool&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&), DB::ConnectionPoolWithFailover::getMany(const DB::ConnectionTimeouts&, const DB::Settings*, DB::PoolMode)::<lambda(PoolWithFailoverBase<DB::IConnectionPool>::NestedPool&, std::string&)> >::_M_invoke(const std::_Any_data &, DB::IConnectionPool &, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > &) at /usr/include/c++/9/bits/std_function.h:286
| | | | | | | | | | | | | | | | | | | 2    0x000055fa3c7fb8b7 in DB::ConnectionPoolWithFailover::<lambda(PoolWithFailoverBase<DB::IConnectionPool>::NestedPool&, std::string&)>::operator() at ../dbms/src/Client/ConnectionPoolWithFailover.cpp:82
| | | | | | | | | | | | | | | | | | | | 2    0x000055fa3c7fa308 in DB::ConnectionPoolWithFailover::tryGetEntry(DB::IConnectionPool&, DB::ConnectionTimeouts const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, DB::Settings const*, DB::QualifiedTableName const*) () at ../dbms/src/Client/ConnectionPoolWithFailover.cpp:182
| | | | | | | | | | | | | | | | | | | | | 2    0x000055fa3c7f318b in DB::Connection::forceConnected(DB::ConnectionTimeouts const&) () at ../dbms/src/Client/Connection.cpp:278
| | | | | | | | | | | | | | | | | | | | | | 2    DB::Connection::connect(DB::ConnectionTimeouts const&) () at ../dbms/src/Client/Connection.cpp:92
| | | | | | | | | | | | | | | | | | | | | | | 2    std::make_shared<DB::ReadBufferFromPocoSocket, Poco::Net::StreamSocket&> () at /usr/include/c++/9/bits/shared_ptr.h:718
| | | | | | | | | | | | | | | | | | | | | | | | 2    std::allocate_shared<DB::ReadBufferFromPocoSocket, std::allocator<DB::ReadBufferFromPocoSocket>, Poco::Net::StreamSocket&> at /usr/include/c++/9/bits/shared_ptr.h:702
| | | | | | | | | | | | | | | | | | | | | | | | | 2    std::shared_ptr<DB::ReadBufferFromPocoSocket>::shared_ptr<std::allocator<DB::ReadBufferFromPocoSocket>, Poco::Net::StreamSocket&> at /usr/include/c++/9/bits/shared_ptr.h:359
| | | | | | | | | | | | | | | | | | | | | | | | | | 2    std::__shared_ptr<DB::ReadBufferFromPocoSocket, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<DB::ReadBufferFromPocoSocket>, Poco::Net::StreamSocket&> at /usr/include/c++/9/bits/shared_ptr_base.h:1344
| | | | | | | | | | | | | | | | | | | | | | | | | | | 2    std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<DB::ReadBufferFromPocoSocket, std::allocator<DB::ReadBufferFromPocoSocket>, Poco::Net::StreamSocket&> at /usr/include/c++/9/bits/shared_ptr_base.h:679
| | | | | | | | | | | | | | | | | | | | | | | | | | | | 2    std::_Sp_counted_ptr_inplace<DB::ReadBufferFromPocoSocket, std::allocator<DB::ReadBufferFromPocoSocket>, (__gnu_cxx::_Lock_policy)2>::_Sp_counted_ptr_inplace<Poco::Net::StreamSocket&> at /usr/include/c++/9/bits/shared_ptr_base.h:548
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | 2    std::allocator_traits<std::allocator<DB::ReadBufferFromPocoSocket> >::construct<DB::ReadBufferFromPocoSocket, Poco::Net::StreamSocket&> at /usr/include/c++/9/bits/alloc_traits.h:484
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 2    0x000055fa3c7f1c42 in __gnu_cxx::new_allocator<DB::ReadBufferFromPocoSocket>::construct<DB::ReadBufferFromPocoSocket, Poco::Net::StreamSocket&> at /usr/include/c++/9/new:174
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 2    DB::ReadBufferFromPocoSocket::ReadBufferFromPocoSocket(Poco::Net::Socket&, unsigned long) () at ../dbms/src/IO/ReadBufferFromPocoSocket.cpp:64
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 2    DB::BufferWithOwnMemory<DB::ReadBuffer>::BufferWithOwnMemory at ../dbms/src/IO/BufferWithOwnMemory.h:144
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 2    DB::Memory<Allocator<false, false> >::Memory at ../dbms/src/IO/BufferWithOwnMemory.h:43
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 2    DB::Memory<Allocator<false, false> >::alloc at ../dbms/src/IO/BufferWithOwnMemory.h:117
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 2    0x000055fa3cf6b430 in Allocator<false, false>::alloc at ../dbms/src/Common/Allocator.h:92
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 2    0x000055fa391849b8 in Allocator<false, false>::allocNoTrack at ../dbms/src/Common/Allocator.h:185
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 2    0x000055fa3e5c3e6a in malloc at ../contrib/jemalloc/src/jemalloc.c:2274
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 2    malloc_default at ../contrib/jemalloc/src/jemalloc.c:2175
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 2    imalloc at ../contrib/jemalloc/src/jemalloc.c:2145
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 2    imalloc_body at ../contrib/jemalloc/src/jemalloc.c:2036
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 2    imalloc_no_sample at ../contrib/jemalloc/src/jemalloc.c:1840
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 2    iallocztm at ../contrib/jemalloc/include/jemalloc/internal/jemalloc_internal_inlines_c.h:53
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 2    0x000055fa3e5c3507 in arena_malloc at ../contrib/jemalloc/include/jemalloc/internal/arena_inlines_b.h:151
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 2    0x000055fa3e5eb5f8 in arena_malloc_hard at ../contrib/jemalloc/include/jemalloc/internal/sz.h:207
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 2    large_malloc at ../contrib/jemalloc/src/large.c:17
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 2    0x000055fa3e5ca25a in large_palloc at ../contrib/jemalloc/include/jemalloc/internal/arena_inlines_b.h:13
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 2    0x000055fa3e5e8649 in arena_extent_alloc_large at ../contrib/jemalloc/src/arena.c:385
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 2    extent_alloc_wrapper at ../contrib/jemalloc/src/extent.c:1515
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 2    extent_alloc_retained at ../contrib/jemalloc/src/extent.c:1445
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 2    0x000055fa3e6132ec in malloc_mutex_lock at ../contrib/jemalloc/include/jemalloc/internal/mutex.h:224
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 2    malloc_mutex_lock_slow at ../contrib/jemalloc/src/mutex.c:84
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 2    0x000055fa3e5cd5d0 in malloc_mutex_lock_final at ../contrib/jemalloc/include/jemalloc/internal/mutex.h:160
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 2    0x00007f6af9d2c023 in pthread_mutex_lock () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 2    0x00007f6af9d3310d in __lll_lock_wait () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | | | | | | | | | 9    0x000055fa3c6be078 in DB::DistributedBlockOutputStream::runWritingJob(DB::DistributedBlockOutputStream::JobReplica&, DB::Block const&)::{lambda()#1}::operator()() const () at /usr/include/c++/9/bits/shared_ptr_base.h:1020
| | | | | | | | | | | | | | 1    0x000055fa3c9aea0c in DB::CountingBlockOutputStream::write at /usr/include/c++/9/bits/shared_ptr_base.h:1020
| | | | | | | | | | | | | | | 1    0x000055fa3c99003f in DB::AddingDefaultBlockOutputStream::write(DB::Block const&) () at /usr/include/c++/9/bits/shared_ptr_base.h:1020
| | | | | | | | | | | | | | | | 1    0x000055fa3ca15465 in DB::SquashingBlockOutputStream::write(DB::Block const&) () at /usr/include/c++/9/bits/stl_tree.h:720
| | | | | | | | | | | | | | | | | 1    DB::Block::mutateColumns() () at ../dbms/src/Core/Block.cpp:337
| | | | | | | | | | | | | | | | | | 1    DB::IColumn::mutate() const && at ../dbms/src/Columns/IColumn.h:284
| | | | | | | | | | | | | | | | | | | 1    0x000055fa3c239270 in COW<DB::IColumn>::shallowMutate at /usr/include/c++/9/bits/atomic_base.h:413
| | | | | | | | | | | | | | | | | | | | 1    COWHelper<DB::IColumn, DB::ColumnString>::clone at ../dbms/src/Common/COW.h:297
| | | | | | | | | | | | | | | | | | | | | 1    DB::ColumnString::ColumnString at ../dbms/src/Columns/ColumnString.h:53
| | | | | | | | | | | | | | | | | | | | | | 1    DB::PODArray<unsigned long, 4096ul, Allocator<false, false>, 15ul, 16ul>::PODArray at ../dbms/src/Common/PODArray.h:308
| | | | | | | | | | | | | | | | | | | | | | | 1    DB::PODArrayBase<8ul, 4096ul, Allocator<false, false>, 15ul, 16ul>::alloc_for_num_elements at ../dbms/src/Common/PODArray.h:102
| | | | | | | | | | | | | | | | | | | | | | | | 1    DB::PODArrayBase<8ul, 4096ul, Allocator<false, false>, 15ul, 16ul>::alloc<>(unsigned long) at ../dbms/src/Common/PODArray.h:108
| | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3c58f735 in Allocator<false, false>::alloc at ../dbms/src/Common/Allocator.h:92
| | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa391849b8 in Allocator<false, false>::allocNoTrack at ../dbms/src/Common/Allocator.h:185
| | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5c3e6a in malloc at ../contrib/jemalloc/src/jemalloc.c:2274
| | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    malloc_default at ../contrib/jemalloc/src/jemalloc.c:2175
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    imalloc at ../contrib/jemalloc/src/jemalloc.c:2145
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    imalloc_body at ../contrib/jemalloc/src/jemalloc.c:2036
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    imalloc_no_sample at ../contrib/jemalloc/src/jemalloc.c:1840
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    iallocztm at ../contrib/jemalloc/include/jemalloc/internal/jemalloc_internal_inlines_c.h:53
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5c3507 in arena_malloc at ../contrib/jemalloc/include/jemalloc/internal/arena_inlines_b.h:151
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5eb5f8 in arena_malloc_hard at ../contrib/jemalloc/include/jemalloc/internal/sz.h:207
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    large_malloc at ../contrib/jemalloc/src/large.c:17
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5ca25a in large_palloc at ../contrib/jemalloc/include/jemalloc/internal/arena_inlines_b.h:13
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5e8649 in arena_extent_alloc_large at ../contrib/jemalloc/src/arena.c:385
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    extent_alloc_wrapper at ../contrib/jemalloc/src/extent.c:1515
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    extent_alloc_retained at ../contrib/jemalloc/src/extent.c:1445
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e6132ec in malloc_mutex_lock at ../contrib/jemalloc/include/jemalloc/internal/mutex.h:224
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    malloc_mutex_lock_slow at ../contrib/jemalloc/src/mutex.c:84
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5cd5d0 in malloc_mutex_lock_final at ../contrib/jemalloc/include/jemalloc/internal/mutex.h:160
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x00007f6af9d2c023 in pthread_mutex_lock () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x00007f6af9d3310d in __lll_lock_wait () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | | | | | | | | | 9    0x000055fa3c6bdf79 in DB::DistributedBlockOutputStream::runWritingJob(DB::DistributedBlockOutputStream::JobReplica&, DB::Block const&)::{lambda()#1}::operator()() const () at /usr/include/c++/9/bits/shared_ptr_base.h:1020
| | | | | | | | | | | | | | 1    0x000055fa3ca0c7c6 in DB::RemoteBlockOutputStream::write(DB::Block const&) () at /usr/include/c++/9/bits/char_traits.h:300
| | | | | | | | | | | | | | | 1    0x000055fa3c7f38cf in DB::Connection::sendData(DB::Block const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) () at /usr/include/c++/9/bits/shared_ptr_base.h:1020
| | | | | | | | | | | | | | | | 1    0x000055fa3c2b3b80 in DB::NativeBlockOutputStream::write(DB::Block const&) () at /usr/include/c++/9/bits/shared_ptr_base.h:1020
| | | | | | | | | | | | | | | | | 1    DB::NativeBlockOutputStream::writeData(DB::IDataType const&, COW<DB::IColumn>::immutable_ptr<DB::IColumn> const&, DB::WriteBuffer&, unsigned long, unsigned long) () at ../dbms/src/DataStreams/NativeBlockOutputStream.cpp:58
| | | | | | | | | | | | | | | | | | 1    0x000055fa3c2b28bd in DB::IDataType::serializeBinaryBulkWithMultipleStreams at ../dbms/src/DataTypes/IDataType.h:182
| | | | | | | | | | | | | | | | | | | 1    DB::DataTypeString::serializeBinaryBulk(DB::IColumn const&, DB::WriteBuffer&, unsigned long, unsigned long) const () at ../dbms/src/DataTypes/DataTypeString.cpp:110
| | | | | | | | | | | | | | | | | | | | 1    DB::WriteBuffer::write at ../dbms/src/IO/WriteBuffer.h:77
| | | | | | | | | | | | | | | | | | | | | 1    DB::WriteBuffer::nextIfAtEnd at ../dbms/src/IO/WriteBuffer.h:67
| | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3c34dc4d in DB::WriteBuffer::next at ../dbms/src/DataTypes/DataTypeString.cpp:106
| | | | | | | | | | | | | | | | | | | | | | | 1    DB::CompressedWriteBuffer::nextImpl() () at ../dbms/src/Compression/CompressedWriteBuffer.cpp:30
| | | | | | | | | | | | | | | | | | | | | | | | 1    DB::PODArrayBase<1ul, 4096ul, Allocator<false, false>, 0ul, 0ul>::resize<>(unsigned long) at ../dbms/src/Common/PODArray.h:214
| | | | | | | | | | | | | | | | | | | | | | | | | 1    DB::PODArrayBase<1ul, 4096ul, Allocator<false, false>, 0ul, 0ul>::reserve<>(unsigned long) at ../dbms/src/Common/PODArray.h:205
| | | | | | | | | | | | | | | | | | | | | | | | | | 1    DB::PODArrayBase<1ul, 4096ul, Allocator<false, false>, 0ul, 0ul>::reserve<>(unsigned long) at ../dbms/src/Common/PODArray.h:208
| | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3c290c54 in DB::PODArrayBase<1ul, 4096ul, Allocator<false, false>, 0ul, 0ul>::realloc<>(unsigned long) at ../dbms/src/Common/PODArray.h:126
| | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa39192266 in Allocator<false, false>::realloc at ../libs/libcommon/include/common/mremap.h:71
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    realloc at ../contrib/jemalloc/src/jemalloc.c:2599
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    iralloc at ../contrib/jemalloc/include/jemalloc/internal/jemalloc_internal_inlines_c.h:199
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5c16f0 in iralloct at ../contrib/jemalloc/include/jemalloc/internal/jemalloc_internal_inlines_c.h:192
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    arena_ralloc at ../contrib/jemalloc/src/arena.c:1711
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    arena_ralloc_move_helper at ../contrib/jemalloc/src/arena.c:1669
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5ec205 in arena_malloc at ../contrib/jemalloc/include/jemalloc/internal/arena_inlines_b.h:151
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5eb5f8 in arena_malloc_hard at ../contrib/jemalloc/include/jemalloc/internal/sz.h:207
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    large_malloc at ../contrib/jemalloc/src/large.c:17
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5ca25a in large_palloc at ../contrib/jemalloc/include/jemalloc/internal/arena_inlines_b.h:13
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5e8649 in arena_extent_alloc_large at ../contrib/jemalloc/src/arena.c:385
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    extent_alloc_wrapper at ../contrib/jemalloc/src/extent.c:1515
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    extent_alloc_retained at ../contrib/jemalloc/src/extent.c:1445
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e6132ec in malloc_mutex_lock at ../contrib/jemalloc/include/jemalloc/internal/mutex.h:224
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    malloc_mutex_lock_slow at ../contrib/jemalloc/src/mutex.c:84
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x000055fa3e5cd5d0 in malloc_mutex_lock_final at ../contrib/jemalloc/include/jemalloc/internal/mutex.h:160
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x00007f6af9d2c023 in pthread_mutex_lock () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | | 1    0x00007f6af9d3310d in __lll_lock_wait () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | | | | | | | 13   ThreadPoolImpl<ThreadFromGlobalPool>::worker at ../dbms/src/Common/ThreadPool.cpp:199
| | | | | | | | | | | | 4    0x000055fa391a2e7f in std::condition_variable::wait<ThreadPoolImpl<ThreadFromGlobalPool>::worker(std::_List_iterator<ThreadFromGlobalPool>)::{lambda()#1}>(std::unique_lock<std::mutex>&, ThreadPoolImpl<ThreadFromGlobalPool>::worker(std::_List_iterator<ThreadFromGlobalPool>)::{lambda()#1}) at /usr/include/c++/9/bits/std_function.h:260
| | | | | | | | | | | | | 4    0x000055fa3ed9e34c in std::condition_variable::wait(std::unique_lock<std::mutex>&) ()
| | | | | | | | | | | | | | 4    0x00007f6af9d2f9f3 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | 61   ThreadFromGlobalPool::ThreadFromGlobalPool<void (DB::DDLWorker::*)(), DB::DDLWorker*>(void (DB::DDLWorker::*&&)(), DB::DDLWorker*&&)::{lambda()#1}::operator()() const at ../dbms/src/Common/ThreadPool.h:151
| | | | | | 2    std::apply<void (DB::DDLWorker::* const&)(), std::tuple<DB::DDLWorker*> const&> at /usr/include/c++/9/tuple:1694
| | | | | | | 2    std::__apply_impl<void (DB::DDLWorker::* const&)(), std::tuple<DB::DDLWorker*> const&, 0ul> at /usr/include/c++/9/tuple:1684
| | | | | | | | 2    std::__invoke<void (DB::DDLWorker::* const&)(), DB::DDLWorker* const&> at /usr/include/c++/9/bits/invoke.h:95
| | | | | | | | | 2    0x000055fa3c3b4afb in std::__invoke_impl<void, void (DB::DDLWorker::* const&)(), DB::DDLWorker* const&> at /usr/include/c++/9/bits/invoke.h:70
| | | | | | | | | | 2    0x000055fa3c3af5d0 in DB::DDLWorker::runCleanupThread() () at /usr/include/c++/9/bits/shared_ptr_base.h:1020
| | | | | | | | | | | 1    Poco::Event::wait() () at ../contrib/poco/Foundation/src/Event.cpp:79
| | | | | | | | | | | | 1    0x000055fa3e6383cb in std::condition_variable::wait<Poco::Event::wait()::<lambda()> > at /usr/include/c++/9/condition_variable:98
| | | | | | | | | | | | | 1    0x000055fa3ed9e34c in std::condition_variable::wait(std::unique_lock<std::mutex>&) ()
| | | | | | | | | | | | | | 1    0x00007f6af9d2f9f3 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | | | | | | 2    0x000055fa3c3b2db3 in DB::DDLWorker::runMainThread() () at /usr/include/c++/9/bits/shared_ptr_base.h:1020
| | | | | | | | | | | 1    Poco::Event::wait() () at ../contrib/poco/Foundation/src/Event.cpp:79
| | | | | | | | | | | | 1    0x000055fa3e6383cb in std::condition_variable::wait<Poco::Event::wait()::<lambda()> > at /usr/include/c++/9/condition_variable:98
| | | | | | | | | | | | | 1    0x000055fa3ed9e34c in std::condition_variable::wait(std::unique_lock<std::mutex>&) ()
| | | | | | | | | | | | | | 1    0x00007f6af9d2f9f3 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | 61   ThreadFromGlobalPool::ThreadFromGlobalPool<void (DB::ConfigReloader::*)(), DB::ConfigReloader*>(void (DB::ConfigReloader::*&&)(), DB::ConfigReloader*&&)::{lambda()#1}::operator()() const at ../dbms/src/Common/ThreadPool.h:151
| | | | | | 2    std::apply<void (DB::ConfigReloader::* const&)(), std::tuple<DB::ConfigReloader*> const&> at /usr/include/c++/9/tuple:1694
| | | | | | | 2    std::__apply_impl<void (DB::ConfigReloader::* const&)(), std::tuple<DB::ConfigReloader*> const&, 0ul> at /usr/include/c++/9/tuple:1684
| | | | | | | | 2    std::__invoke<void (DB::ConfigReloader::* const&)(), DB::ConfigReloader* const&> at /usr/include/c++/9/bits/invoke.h:95
| | | | | | | | | 2    0x000055fa3cc959cb in std::__invoke_impl<void, void (DB::ConfigReloader::* const&)(), DB::ConfigReloader* const&> at /usr/include/c++/9/bits/invoke.h:70
| | | | | | | | | | 2    DB::ConfigReloader::run() () at ../dbms/src/Common/Config/ConfigReloader.cpp:65
| | | | | | | | | | | 2    0x000055fa3cc957e0 in Poco::Event::tryWait at ../contrib/poco/Foundation/include/Poco/Event.h:109
| | | | | | | | | | | | 2    Poco::Event::waitImpl(long) () at ../contrib/poco/Foundation/src/Event.cpp:94
| | | | | | | | | | | | | 2    std::condition_variable::wait_for<long int, std::ratio<1, 1000>, Poco::Event::waitImpl(long int)::<lambda()> > at /usr/include/c++/9/condition_variable:166
| | | | | | | | | | | | | | 2    std::condition_variable::wait_until<std::chrono::_V2::steady_clock, std::chrono::duration<long int, std::ratio<1, 1000000000> >, Poco::Event::waitImpl(long int)::<lambda()> > at /usr/include/c++/9/condition_variable:138
| | | | | | | | | | | | | | | 2    std::condition_variable::wait_until<std::chrono::_V2::steady_clock, std::chrono::duration<long, std::ratio<1l, 1000000000l> > > at /usr/include/c++/9/condition_variable:121
| | | | | | | | | | | | | | | | 2    std::condition_variable::__wait_until_impl<std::chrono::duration<long, std::ratio<1l, 1000000000l> > > at /usr/include/c++/9/condition_variable:188
| | | | | | | | | | | | | | | | | 2    0x000055fa3e638504 in __gthread_cond_timedwait at /usr/include/x86_64-linux-gnu/c++/9/bits/gthr-default.h:872
| | | | | | | | | | | | | | | | | | 2    0x00007f6af9d2ff85 in pthread_cond_timedwait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | 61   ThreadFromGlobalPool::ThreadFromGlobalPool<DB::SystemLog<DB::MetricLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1}>(DB::SystemLog<DB::MetricLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1}&&)::{lambda()#1}::operator()() const at ../dbms/src/Common/ThreadPool.h:151
| | | | | | 1    std::apply<DB::SystemLog<DB::MetricLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1} const&, std::tuple<> const&>(DB::SystemLog<DB::MetricLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1} const&, std::tuple<> const&) at /usr/include/c++/9/tuple:1694
| | | | | | | 1    std::__apply_impl<DB::SystemLog<DB::MetricLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1} const&, std::tuple<> const&>(DB::SystemLog<DB::MetricLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1} const&, std::tuple<> const&, std::integer_sequence<unsigned long>) at /usr/include/c++/9/tuple:1684
| | | | | | | | 1    std::__invoke<DB::SystemLog<DB::MetricLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1} const&>(std::__invoke_result&&, (DB::SystemLog<DB::MetricLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1} const&)...) at /usr/include/c++/9/bits/invoke.h:95
| | | | | | | | | 1    std::__invoke_impl<void, DB::SystemLog<DB::MetricLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1} const&>(std::__invoke_other, DB::SystemLog<DB::MetricLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1} const&) at /usr/include/c++/9/bits/invoke.h:60
| | | | | | | | | | 1    0x000055fa391d34fa in DB::SystemLog<DB::MetricLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1}::operator()() const at ../dbms/src/Interpreters/SystemLog.h:186
| | | | | | | | | | | 1    DB::SystemLog<DB::MetricLogElement>::threadFunction at ../dbms/src/Interpreters/SystemLog.h:274
| | | | | | | | | | | | 1    ConcurrentBoundedQueue<std::pair<DB::SystemLog<DB::MetricLogElement>::EntryType, DB::MetricLogElement> >::tryPop at ../dbms/src/Common/ConcurrentBoundedQueue.h:122
| | | | | | | | | | | | | 1    0x000055fa391d2e66 in Poco::Semaphore::tryWait at ../contrib/poco/Foundation/include/Poco/Semaphore.h:118
| | | | | | | | | | | | | | 1    Poco::Semaphore::waitImpl(long) () at ../contrib/poco/Foundation/src/Semaphore.cpp:76
| | | | | | | | | | | | | | | 1    std::condition_variable::wait_for<long int, std::ratio<1, 1000>, Poco::Semaphore::waitImpl(long int)::<lambda()> > at /usr/include/c++/9/condition_variable:166
| | | | | | | | | | | | | | | | 1    std::condition_variable::wait_until<std::chrono::_V2::steady_clock, std::chrono::duration<long int, std::ratio<1, 1000000000> >, Poco::Semaphore::waitImpl(long int)::<lambda()> > at /usr/include/c++/9/condition_variable:138
| | | | | | | | | | | | | | | | | 1    std::condition_variable::wait_until<std::chrono::_V2::steady_clock, std::chrono::duration<long, std::ratio<1l, 1000000000l> > > at /usr/include/c++/9/condition_variable:121
| | | | | | | | | | | | | | | | | | 1    std::condition_variable::__wait_until_impl<std::chrono::duration<long, std::ratio<1l, 1000000000l> > > at /usr/include/c++/9/condition_variable:188
| | | | | | | | | | | | | | | | | | | 1    0x000055fa3e6914b8 in __gthread_cond_timedwait at /usr/include/x86_64-linux-gnu/c++/9/bits/gthr-default.h:872
| | | | | | | | | | | | | | | | | | | | 1    0x00007f6af9d2ff85 in pthread_cond_timedwait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | 61   ThreadFromGlobalPool::ThreadFromGlobalPool<void (DB::SessionCleaner::*)(), DB::SessionCleaner*>(void (DB::SessionCleaner::*&&)(), DB::SessionCleaner*&&)::{lambda()#1}::operator()() const at ../dbms/src/Common/ThreadPool.h:151
| | | | | | 1    std::apply<void (DB::SessionCleaner::* const&)(), std::tuple<DB::SessionCleaner*> const&> at /usr/include/c++/9/tuple:1694
| | | | | | | 1    std::__apply_impl<void (DB::SessionCleaner::* const&)(), std::tuple<DB::SessionCleaner*> const&, 0ul> at /usr/include/c++/9/tuple:1684
| | | | | | | | 1    std::__invoke<void (DB::SessionCleaner::* const&)(), DB::SessionCleaner* const&> at /usr/include/c++/9/bits/invoke.h:95
| | | | | | | | | 1    0x000055fa391aa44b in std::__invoke_impl<void, void (DB::SessionCleaner::* const&)(), DB::SessionCleaner* const&> at /usr/include/c++/9/bits/invoke.h:70
| | | | | | | | | | 1    DB::SessionCleaner::run() () at ../dbms/src/Interpreters/Context.cpp:2085
| | | | | | | | | | | 1    std::condition_variable::wait_for<long int, std::ratio<1, 1000000000>, DB::SessionCleaner::run()::<lambda()> > at /usr/include/c++/9/condition_variable:166
| | | | | | | | | | | | 1    std::condition_variable::wait_until<std::chrono::_V2::steady_clock, std::chrono::duration<long int, std::ratio<1, 1000000000> >, DB::SessionCleaner::run()::<lambda()> > at /usr/include/c++/9/condition_variable:138
| | | | | | | | | | | | | 1    std::condition_variable::wait_until<std::chrono::_V2::steady_clock, std::chrono::duration<long, std::ratio<1l, 1000000000l> > > at /usr/include/c++/9/condition_variable:121
| | | | | | | | | | | | | | 1    std::condition_variable::__wait_until_impl<std::chrono::duration<long, std::ratio<1l, 1000000000l> > > at /usr/include/c++/9/condition_variable:188
| | | | | | | | | | | | | | | 1    0x000055fa3c39abfb in __gthread_cond_timedwait at /usr/include/x86_64-linux-gnu/c++/9/bits/gthr-default.h:872
| | | | | | | | | | | | | | | | 1    0x00007f6af9d2ff85 in pthread_cond_timedwait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | 61   ThreadFromGlobalPool::ThreadFromGlobalPool<DB::EmbeddedDictionaries::EmbeddedDictionaries(std::unique_ptr<IGeoDictionariesLoader, std::default_delete<IGeoDictionariesLoader> >, DB::Context&, bool)::{lambda()#1}>(DB::EmbeddedDictionaries::EmbeddedDictionaries(std::unique_ptr<IGeoDictionariesLoader, std::default_delete<IGeoDictionariesLoader> >, DB::Context&, bool)::{lambda()#1}&&)::{lambda()#1}::operator()() const () at ../dbms/src/Common/ThreadPool.h:151
| | | | | | 1    std::apply<const DB::EmbeddedDictionaries::EmbeddedDictionaries(std::unique_ptr<IGeoDictionariesLoader>, DB::Context&, bool)::<lambda()>&, const std::tuple<>&> at /usr/include/c++/9/tuple:1694
| | | | | | | 1    std::__apply_impl<const DB::EmbeddedDictionaries::EmbeddedDictionaries(std::unique_ptr<IGeoDictionariesLoader>, DB::Context&, bool)::<lambda()>&, const std::tuple<>&> at /usr/include/c++/9/tuple:1684
| | | | | | | | 1    std::__invoke<const DB::EmbeddedDictionaries::EmbeddedDictionaries(std::unique_ptr<IGeoDictionariesLoader>, DB::Context&, bool)::<lambda()>&> at /usr/include/c++/9/bits/invoke.h:95
| | | | | | | | | 1    std::__invoke_impl<void, const DB::EmbeddedDictionaries::EmbeddedDictionaries(std::unique_ptr<IGeoDictionariesLoader>, DB::Context&, bool)::<lambda()>&> at /usr/include/c++/9/bits/invoke.h:60
| | | | | | | | | | 1    DB::EmbeddedDictionaries::<lambda()>::operator() at ../dbms/src/Interpreters/EmbeddedDictionaries.cpp:133
| | | | | | | | | | | 1    DB::EmbeddedDictionaries::reloadPeriodically at ../dbms/src/Interpreters/EmbeddedDictionaries.cpp:104
| | | | | | | | | | | | 1    0x000055fa3c3bd0d9 in Poco::Event::tryWait at ../contrib/poco/Foundation/include/Poco/Event.h:109
| | | | | | | | | | | | | 1    Poco::Event::waitImpl(long) () at ../contrib/poco/Foundation/src/Event.cpp:94
| | | | | | | | | | | | | | 1    std::condition_variable::wait_for<long int, std::ratio<1, 1000>, Poco::Event::waitImpl(long int)::<lambda()> > at /usr/include/c++/9/condition_variable:166
| | | | | | | | | | | | | | | 1    std::condition_variable::wait_until<std::chrono::_V2::steady_clock, std::chrono::duration<long int, std::ratio<1, 1000000000> >, Poco::Event::waitImpl(long int)::<lambda()> > at /usr/include/c++/9/condition_variable:138
| | | | | | | | | | | | | | | | 1    std::condition_variable::wait_until<std::chrono::_V2::steady_clock, std::chrono::duration<long, std::ratio<1l, 1000000000l> > > at /usr/include/c++/9/condition_variable:121
| | | | | | | | | | | | | | | | | 1    std::condition_variable::__wait_until_impl<std::chrono::duration<long, std::ratio<1l, 1000000000l> > > at /usr/include/c++/9/condition_variable:188
| | | | | | | | | | | | | | | | | | 1    0x000055fa3e638504 in __gthread_cond_timedwait at /usr/include/x86_64-linux-gnu/c++/9/bits/gthr-default.h:872
| | | | | | | | | | | | | | | | | | | 1    0x00007f6af9d2ff85 in pthread_cond_timedwait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | 61   ThreadFromGlobalPool::ThreadFromGlobalPool<void (DB::AIOContextPool::*)(), DB::AIOContextPool*>(void (DB::AIOContextPool::*&&)(), DB::AIOContextPool*&&)::{lambda()#1}::operator()() const at ../dbms/src/Common/ThreadPool.h:151
| | | | | | 1    std::apply<void (DB::AIOContextPool::* const&)(), std::tuple<DB::AIOContextPool*> const&> at /usr/include/c++/9/tuple:1694
| | | | | | | 1    std::__apply_impl<void (DB::AIOContextPool::* const&)(), std::tuple<DB::AIOContextPool*> const&, 0ul> at /usr/include/c++/9/tuple:1684
| | | | | | | | 1    std::__invoke<void (DB::AIOContextPool::* const&)(), DB::AIOContextPool* const&> at /usr/include/c++/9/bits/invoke.h:95
| | | | | | | | | 1    0x000055fa3cf7c98b in std::__invoke_impl<void, void (DB::AIOContextPool::* const&)(), DB::AIOContextPool* const&> at /usr/include/c++/9/bits/invoke.h:70
| | | | | | | | | | 1    0x000055fa3cf7f2c0 in DB::AIOContextPool::doMonitor at ../dbms/src/IO/AIOContextPool.cpp:33
| | | | | | | | | | | 1    0x000055fa3cf7f246 in DB::AIOContextPool::waitForCompletion() () at ../dbms/src/IO/AIOContextPool.cpp:48
| | | | | | | | | | | | 1    0x000055fa3cf7e1e5 in DB::AIOContextPool::getCompletionEvents(io_event*, int) () at ../dbms/src/IO/AIOContextPool.cpp:68
| | | | | | | | | | | | | 1    0x000055fa3cf7e0b5 in io_getevents at ../dbms/src/IO/AIO.cpp:40
| | | | | | | | | | | | | | 1    0x00007f6af9640839 in syscall () from /lib/x86_64-linux-gnu/libc.so.6
| | | | | 61   ThreadFromGlobalPool::ThreadFromGlobalPool<Coordination::ZooKeeper::ZooKeeper(std::vector<Poco::Net::SocketAddress, std::allocator<Poco::Net::SocketAddress> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, Poco::Timespan, Poco::Timespan, Poco::Timespan)::{lambda()#2}>(Coordination::ZooKeeper::ZooKeeper(std::vector<Poco::Net::SocketAddress, std::allocator<Poco::Net::SocketAddress> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, Poco::Timespan, Poco::Timespan, Poco::Timespan)::{lambda()#2}&&)::{lambda()#1}::operator()() const () at ../dbms/src/Common/ThreadPool.h:151
| | | | | | 1    std::apply<const Coordination::ZooKeeper::ZooKeeper(const Addresses&, const String&, const String&, const String&, Poco::Timespan, Poco::Timespan, Poco::Timespan)::<lambda()>&, const std::tuple<>&> at /usr/include/c++/9/tuple:1694
| | | | | | | 1    std::__apply_impl<const Coordination::ZooKeeper::ZooKeeper(const Addresses&, const String&, const String&, const String&, Poco::Timespan, Poco::Timespan, Poco::Timespan)::<lambda()>&, const std::tuple<>&> at /usr/include/c++/9/tuple:1684
| | | | | | | | 1    std::__invoke<const Coordination::ZooKeeper::ZooKeeper(const Addresses&, const String&, const String&, const String&, Poco::Timespan, Poco::Timespan, Poco::Timespan)::<lambda()>&> at /usr/include/c++/9/bits/invoke.h:95
| | | | | | | | | 1    std::__invoke_impl<void, const Coordination::ZooKeeper::ZooKeeper(const Addresses&, const String&, const String&, const String&, Poco::Timespan, Poco::Timespan, Poco::Timespan)::<lambda()>&> at /usr/include/c++/9/bits/invoke.h:60
| | | | | | | | | | 1    0x000055fa3ccfe0aa in Coordination::ZooKeeper::<lambda()>::operator() at ../dbms/src/Common/ZooKeeper/ZooKeeperImpl.cpp:860
| | | | | | | | | | | 1    0x000055fa3ccfdcd9 in Coordination::ZooKeeper::receiveThread() () at /usr/include/c++/9/optional:893
| | | | | | | | | | | | 1    DB::ReadBufferFromPocoSocket::poll at ../dbms/src/IO/ReadBufferFromPocoSocket.cpp:70
| | | | | | | | | | | | | 1    0x000055fa3cf6b1bd in Poco::Net::Socket::poll at ../contrib/poco/Net/include/Poco/Net/Socket.h:374
| | | | | | | | | | | | | | 1    0x000055fa3cfb4fd6 in Poco::Net::SocketImpl::poll(Poco::Timespan const&, int) () at ../contrib/poco/Foundation/include/Poco/Timespan.h:195
| | | | | | | | | | | | | | | 1    0x00007f6af9646bb7 in epoll_wait () from /lib/x86_64-linux-gnu/libc.so.6
| | | | | 61   ThreadFromGlobalPool::ThreadFromGlobalPool<DB::SystemLog<DB::PartLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1}>(DB::SystemLog<DB::PartLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1}&&)::{lambda()#1}::operator()() const at ../dbms/src/Common/ThreadPool.h:151
| | | | | | 1    std::apply<DB::SystemLog<DB::PartLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1} const&, std::tuple<> const&>(DB::SystemLog<DB::PartLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1} const&, std::tuple<> const&) at /usr/include/c++/9/tuple:1694
| | | | | | | 1    std::__apply_impl<DB::SystemLog<DB::PartLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1} const&, std::tuple<> const&>(DB::SystemLog<DB::PartLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1} const&, std::tuple<> const&, std::integer_sequence<unsigned long>) at /usr/include/c++/9/tuple:1684
| | | | | | | | 1    std::__invoke<DB::SystemLog<DB::PartLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1} const&>(std::__invoke_result&&, (DB::SystemLog<DB::PartLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1} const&)...) at /usr/include/c++/9/bits/invoke.h:95
| | | | | | | | | 1    std::__invoke_impl<void, DB::SystemLog<DB::PartLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1} const&>(std::__invoke_other, DB::SystemLog<DB::PartLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1} const&) at /usr/include/c++/9/bits/invoke.h:60
| | | | | | | | | | 1    0x000055fa391cb84a in DB::SystemLog<DB::PartLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1}::operator()() const at ../dbms/src/Interpreters/SystemLog.h:186
| | | | | | | | | | | 1    DB::SystemLog<DB::PartLogElement>::threadFunction at ../dbms/src/Interpreters/SystemLog.h:267
| | | | | | | | | | | | 1    0x000055fa391caf94 in ConcurrentBoundedQueue<std::pair<DB::SystemLog<DB::PartLogElement>::EntryType, DB::PartLogElement> >::pop at ../dbms/src/Common/ConcurrentBoundedQueue.h:80
| | | | | | | | | | | | | 1    Poco::Semaphore::wait() () at ../contrib/poco/Foundation/src/Semaphore.cpp:61
| | | | | | | | | | | | | | 1    0x000055fa3e691383 in std::condition_variable::wait<Poco::Semaphore::wait()::<lambda()> > at ../contrib/poco/Foundation/src/Semaphore.cpp:61
| | | | | | | | | | | | | | | 1    0x000055fa3ed9e34c in std::condition_variable::wait(std::unique_lock<std::mutex>&) ()
| | | | | | | | | | | | | | | | 1    0x00007f6af9d2f9f3 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | 61   ThreadFromGlobalPool::ThreadFromGlobalPool<DB::MetricLog::startCollectMetric(unsigned long)::{lambda()#1}>(DB::MetricLog::startCollectMetric(unsigned long)::{lambda()#1}&&)::{lambda()#1}::operator()() const () at ../dbms/src/Common/ThreadPool.h:151
| | | | | | 1    std::apply<const DB::MetricLog::startCollectMetric(size_t)::<lambda()>&, const std::tuple<>&> at /usr/include/c++/9/tuple:1694
| | | | | | | 1    std::__apply_impl<const DB::MetricLog::startCollectMetric(size_t)::<lambda()>&, const std::tuple<>&> at /usr/include/c++/9/tuple:1684
| | | | | | | | 1    std::__invoke<const DB::MetricLog::startCollectMetric(size_t)::<lambda()>&> at /usr/include/c++/9/bits/invoke.h:95
| | | | | | | | | 1    std::__invoke_impl<void, const DB::MetricLog::startCollectMetric(size_t)::<lambda()>&> at /usr/include/c++/9/bits/invoke.h:60
| | | | | | | | | | 1    0x000055fa3c4b568a in DB::MetricLog::<lambda()>::operator() at ../dbms/src/Interpreters/MetricLog.cpp:60
| | | | | | | | | | | 1    DB::MetricLog::metricThreadFunction() () at ../dbms/src/Interpreters/MetricLog.cpp:124
| | | | | | | | | | | | 1    std::this_thread::sleep_until<std::chrono::_V2::system_clock, std::chrono::duration<long, std::ratio<1l, 1000000000l> > > at /usr/include/c++/9/thread:399
| | | | | | | | | | | | | 1    0x000055fa3c4b5585 in std::this_thread::sleep_for<long, std::ratio<1l, 1000000000l> > at /usr/include/c++/9/thread:378
| | | | | | | | | | | | | | 1    0x00007f6af9d33c60 in nanosleep () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | 61   ThreadFromGlobalPool::ThreadFromGlobalPool<Coordination::ZooKeeper::ZooKeeper(std::vector<Poco::Net::SocketAddress, std::allocator<Poco::Net::SocketAddress> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, Poco::Timespan, Poco::Timespan, Poco::Timespan)::{lambda()#1}>(Coordination::ZooKeeper::ZooKeeper(std::vector<Poco::Net::SocketAddress, std::allocator<Poco::Net::SocketAddress> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, Poco::Timespan, Poco::Timespan, Poco::Timespan)::{lambda()#1}&&)::{lambda()#1}::operator()() const () at ../dbms/src/Common/ThreadPool.h:151
| | | | | | 1    std::apply<const Coordination::ZooKeeper::ZooKeeper(const Addresses&, const String&, const String&, const String&, Poco::Timespan, Poco::Timespan, Poco::Timespan)::<lambda()>&, const std::tuple<>&> at /usr/include/c++/9/tuple:1694
| | | | | | | 1    std::__apply_impl<const Coordination::ZooKeeper::ZooKeeper(const Addresses&, const String&, const String&, const String&, Poco::Timespan, Poco::Timespan, Poco::Timespan)::<lambda()>&, const std::tuple<>&> at /usr/include/c++/9/tuple:1684
| | | | | | | | 1    std::__invoke<const Coordination::ZooKeeper::ZooKeeper(const Addresses&, const String&, const String&, const String&, Poco::Timespan, Poco::Timespan, Poco::Timespan)::<lambda()>&> at /usr/include/c++/9/bits/invoke.h:95
| | | | | | | | | 1    std::__invoke_impl<void, const Coordination::ZooKeeper::ZooKeeper(const Addresses&, const String&, const String&, const String&, Poco::Timespan, Poco::Timespan, Poco::Timespan)::<lambda()>&> at /usr/include/c++/9/bits/invoke.h:60
| | | | | | | | | | 1    0x000055fa3cd00f4a in Coordination::ZooKeeper::<lambda()>::operator() at ../dbms/src/Common/ZooKeeper/ZooKeeperImpl.cpp:859
| | | | | | | | | | | 1    Coordination::ZooKeeper::sendThread() () at ../dbms/src/Common/ZooKeeper/ZooKeeperImpl.cpp:1049
| | | | | | | | | | | | 1    ConcurrentBoundedQueue<Coordination::ZooKeeper::RequestInfo>::tryPop at ../dbms/src/Common/ConcurrentBoundedQueue.h:122
| | | | | | | | | | | | | 1    0x000055fa3cd0052a in Poco::Semaphore::tryWait at ../contrib/poco/Foundation/include/Poco/Semaphore.h:118
| | | | | | | | | | | | | | 1    Poco::Semaphore::waitImpl(long) () at ../contrib/poco/Foundation/src/Semaphore.cpp:76
| | | | | | | | | | | | | | | 1    std::condition_variable::wait_for<long int, std::ratio<1, 1000>, Poco::Semaphore::waitImpl(long int)::<lambda()> > at /usr/include/c++/9/condition_variable:166
| | | | | | | | | | | | | | | | 1    std::condition_variable::wait_until<std::chrono::_V2::steady_clock, std::chrono::duration<long int, std::ratio<1, 1000000000> >, Poco::Semaphore::waitImpl(long int)::<lambda()> > at /usr/include/c++/9/condition_variable:138
| | | | | | | | | | | | | | | | | 1    std::condition_variable::wait_until<std::chrono::_V2::steady_clock, std::chrono::duration<long, std::ratio<1l, 1000000000l> > > at /usr/include/c++/9/condition_variable:121
| | | | | | | | | | | | | | | | | | 1    std::condition_variable::__wait_until_impl<std::chrono::duration<long, std::ratio<1l, 1000000000l> > > at /usr/include/c++/9/condition_variable:188
| | | | | | | | | | | | | | | | | | | 1    0x000055fa3e6914b8 in __gthread_cond_timedwait at /usr/include/x86_64-linux-gnu/c++/9/bits/gthr-default.h:872
| | | | | | | | | | | | | | | | | | | | 1    0x00007f6af9d2ff85 in pthread_cond_timedwait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | 61   ThreadFromGlobalPool::ThreadFromGlobalPool<DB::SystemLog<DB::QueryThreadLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1}>(DB::SystemLog<DB::QueryThreadLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1}&&)::{lambda()#1}::operator()() const at ../dbms/src/Common/ThreadPool.h:151
| | | | | | 1    std::apply<DB::SystemLog<DB::QueryThreadLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1} const&, std::tuple<> const&>(DB::SystemLog<DB::QueryThreadLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1} const&, std::tuple<> const&) at /usr/include/c++/9/tuple:1694
| | | | | | | 1    std::__apply_impl<DB::SystemLog<DB::QueryThreadLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1} const&, std::tuple<> const&>(DB::SystemLog<DB::QueryThreadLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1} const&, std::tuple<> const&, std::integer_sequence<unsigned long>) at /usr/include/c++/9/tuple:1684
| | | | | | | | 1    std::__invoke<DB::SystemLog<DB::QueryThreadLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1} const&>(std::__invoke_result&&, (DB::SystemLog<DB::QueryThreadLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1} const&)...) at /usr/include/c++/9/bits/invoke.h:95
| | | | | | | | | 1    std::__invoke_impl<void, DB::SystemLog<DB::QueryThreadLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1} const&>(std::__invoke_other, DB::SystemLog<DB::QueryThreadLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1} const&) at /usr/include/c++/9/bits/invoke.h:60
| | | | | | | | | | 1    0x000055fa391c8cfa in DB::SystemLog<DB::QueryThreadLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1}::operator()() const at ../dbms/src/Interpreters/SystemLog.h:186
| | | | | | | | | | | 1    DB::SystemLog<DB::QueryThreadLogElement>::threadFunction at ../dbms/src/Interpreters/SystemLog.h:267
| | | | | | | | | | | | 1    0x000055fa391c86dd in ConcurrentBoundedQueue<std::pair<DB::SystemLog<DB::QueryThreadLogElement>::EntryType, DB::QueryThreadLogElement> >::pop at ../dbms/src/Common/ConcurrentBoundedQueue.h:80
| | | | | | | | | | | | | 1    Poco::Semaphore::wait() () at ../contrib/poco/Foundation/src/Semaphore.cpp:61
| | | | | | | | | | | | | | 1    0x000055fa3e691383 in std::condition_variable::wait<Poco::Semaphore::wait()::<lambda()> > at ../contrib/poco/Foundation/src/Semaphore.cpp:61
| | | | | | | | | | | | | | | 1    0x000055fa3ed9e34c in std::condition_variable::wait(std::unique_lock<std::mutex>&) ()
| | | | | | | | | | | | | | | | 1    0x00007f6af9d2f9f3 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | 61   ThreadFromGlobalPool::ThreadFromGlobalPool<DB::SystemLog<DB::QueryLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1}>(DB::SystemLog<DB::QueryLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1}&&)::{lambda()#1}::operator()() const at ../dbms/src/Common/ThreadPool.h:151
| | | | | | 1    std::apply<DB::SystemLog<DB::QueryLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1} const&, std::tuple<> const&>(DB::SystemLog<DB::QueryLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1} const&, std::tuple<> const&) at /usr/include/c++/9/tuple:1694
| | | | | | | 1    std::__apply_impl<DB::SystemLog<DB::QueryLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1} const&, std::tuple<> const&>(DB::SystemLog<DB::QueryLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1} const&, std::tuple<> const&, std::integer_sequence<unsigned long>) at /usr/include/c++/9/tuple:1684
| | | | | | | | 1    std::__invoke<DB::SystemLog<DB::QueryLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1} const&>(std::__invoke_result&&, (DB::SystemLog<DB::QueryLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1} const&)...) at /usr/include/c++/9/bits/invoke.h:95
| | | | | | | | | 1    std::__invoke_impl<void, DB::SystemLog<DB::QueryLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1} const&>(std::__invoke_other, DB::SystemLog<DB::QueryLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1} const&) at /usr/include/c++/9/bits/invoke.h:60
| | | | | | | | | | 1    0x000055fa391c607a in DB::SystemLog<DB::QueryLogElement>::SystemLog(DB::Context&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned long)::{lambda()#1}::operator()() const at ../dbms/src/Interpreters/SystemLog.h:186
| | | | | | | | | | | 1    DB::SystemLog<DB::QueryLogElement>::threadFunction at ../dbms/src/Interpreters/SystemLog.h:267
| | | | | | | | | | | | 1    0x000055fa391c5aed in ConcurrentBoundedQueue<std::pair<DB::SystemLog<DB::QueryLogElement>::EntryType, DB::QueryLogElement> >::pop at ../dbms/src/Common/ConcurrentBoundedQueue.h:80
| | | | | | | | | | | | | 1    Poco::Semaphore::wait() () at ../contrib/poco/Foundation/src/Semaphore.cpp:61
| | | | | | | | | | | | | | 1    0x000055fa3e691383 in std::condition_variable::wait<Poco::Semaphore::wait()::<lambda()> > at ../contrib/poco/Foundation/src/Semaphore.cpp:61
| | | | | | | | | | | | | | | 1    0x000055fa3ed9e34c in std::condition_variable::wait(std::unique_lock<std::mutex>&) ()
| | | | | | | | | | | | | | | | 1    0x00007f6af9d2f9f3 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | 61   ThreadFromGlobalPool::ThreadFromGlobalPool<DB::BackgroundSchedulePool::BackgroundSchedulePool(unsigned long)::{lambda()#2}>(DB::BackgroundSchedulePool::BackgroundSchedulePool(unsigned long)::{lambda()#2}&&)::{lambda()#1}::operator()() const () at ../dbms/src/Common/ThreadPool.h:151
| | | | | | 1    std::apply<const DB::BackgroundSchedulePool::BackgroundSchedulePool(size_t)::<lambda()>&, const std::tuple<>&> at /usr/include/c++/9/tuple:1694
| | | | | | | 1    std::__apply_impl<const DB::BackgroundSchedulePool::BackgroundSchedulePool(size_t)::<lambda()>&, const std::tuple<>&> at /usr/include/c++/9/tuple:1684
| | | | | | | | 1    std::__invoke<const DB::BackgroundSchedulePool::BackgroundSchedulePool(size_t)::<lambda()>&> at /usr/include/c++/9/bits/invoke.h:95
| | | | | | | | | 1    std::__invoke_impl<void, const DB::BackgroundSchedulePool::BackgroundSchedulePool(size_t)::<lambda()>&> at /usr/include/c++/9/bits/invoke.h:60
| | | | | | | | | | 1    0x000055fa3c95e7ba in DB::BackgroundSchedulePool::<lambda()>::operator() at ../dbms/src/Core/BackgroundSchedulePool.cpp:167
| | | | | | | | | | | 1    DB::BackgroundSchedulePool::delayExecutionThreadFunction() () at ../dbms/src/Core/BackgroundSchedulePool.cpp:304
| | | | | | | | | | | | 1    std::condition_variable::wait_for<long, std::ratio<1l, 1000000l> > at /usr/include/c++/9/condition_variable:152
| | | | | | | | | | | | | 1    std::condition_variable::wait_until<std::chrono::_V2::steady_clock, std::chrono::duration<long, std::ratio<1l, 1000000000l> > > at /usr/include/c++/9/condition_variable:121
| | | | | | | | | | | | | | 1    std::condition_variable::__wait_until_impl<std::chrono::duration<long, std::ratio<1l, 1000000000l> > > at /usr/include/c++/9/condition_variable:188
| | | | | | | | | | | | | | | 1    0x000055fa3c95e637 in __gthread_cond_timedwait at /usr/include/x86_64-linux-gnu/c++/9/bits/gthr-default.h:872
| | | | | | | | | | | | | | | | 1    0x00007f6af9d2ff85 in pthread_cond_timedwait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0
| | | | | 61   ThreadFromGlobalPool::ThreadFromGlobalPool<DB::AsynchronousMetrics::AsynchronousMetrics(DB::Context&)::{lambda()#1}>(DB::AsynchronousMetrics::AsynchronousMetrics(DB::Context&)::{lambda()#1}&&)::{lambda()#1}::operator()() const at ../dbms/src/Common/ThreadPool.h:151
| | | | | | 1    std::apply<DB::AsynchronousMetrics::AsynchronousMetrics(DB::Context&)::{lambda()#1} const&, std::tuple<> const&>(DB::AsynchronousMetrics::AsynchronousMetrics(DB::Context&)::{lambda()#1} const&, std::tuple<> const&) at /usr/include/c++/9/tuple:1694
| | | | | | | 1    std::__apply_impl<DB::AsynchronousMetrics::AsynchronousMetrics(DB::Context&)::{lambda()#1} const&, std::tuple<> const&>(DB::AsynchronousMetrics::AsynchronousMetrics(DB::Context&)::{lambda()#1} const&, std::tuple<> const&, std::integer_sequence<unsigned long>) at /usr/include/c++/9/tuple:1684
| | | | | | | | 1    std::__invoke<DB::AsynchronousMetrics::AsynchronousMetrics(DB::Context&)::{lambda()#1} const&>(std::__invoke_result&&, (DB::AsynchronousMetrics::AsynchronousMetrics(DB::Context&)::{lambda()#1} const&)...) at /usr/include/c++/9/bits/invoke.h:95
| | | | | | | | | 1    std::__invoke_impl<void, DB::AsynchronousMetrics::AsynchronousMetrics(DB::Context&)::{lambda()#1} const&>(std::__invoke_other, DB::AsynchronousMetrics::AsynchronousMetrics(DB::Context&)::{lambda()#1} const&) at /usr/include/c++/9/bits/invoke.h:60
| | | | | | | | | | 1    0x000055fa391aaa0a in DB::AsynchronousMetrics::AsynchronousMetrics(DB::Context&)::{lambda()#1}::operator()() const at ../dbms/src/Interpreters/AsynchronousMetrics.h:25
| | | | | | | | | | | 1    DB::AsynchronousMetrics::run() () at ../dbms/src/Interpreters/AsynchronousMetrics.cpp:88
| | | | | | | | | | | | 1    std::condition_variable::wait_until<std::chrono::_V2::system_clock, std::chrono::duration<long int>, DB::AsynchronousMetrics::run()::<lambda()> > at /usr/include/c++/9/condition_variable:138
| | | | | | | | | | | | | 1    std::condition_variable::wait_until<std::chrono::duration<long, std::ratio<1l, 1l> > > at /usr/include/c++/9/condition_variable:108
| | | | | | | | | | | | | | 1    std::condition_variable::__wait_until_impl<std::chrono::duration<long, std::ratio<1l, 1l> > > at /usr/include/c++/9/condition_variable:188
| | | | | | | | | | | | | | | 1    0x000055fa3c37775a in __gthread_cond_timedwait at /usr/include/x86_64-linux-gnu/c++/9/bits/gthr-default.h:872
| | | | | | | | | | | | | | | | 1    0x00007f6af9d2ff85 in pthread_cond_timedwait@@GLIBC_2.3.2 () from /lib/x86_64-linux-gnu/libpthread.so.0
```
