ID: 13576
Title: Bad cast from type DB::ColumnNothing to DB::ColumnString
Description:
```
SELECT has(materialize(['bbbbbb\0b', NULL]), materialize(NULL))

[linux-ubuntu-14-04-trusty] 2020.08.10 03:22:06.009029 [ 254 ] <Fatal> BaseDaemon: ########################################
[linux-ubuntu-14-04-trusty] 2020.08.10 03:22:06.009462 [ 254 ] <Fatal> BaseDaemon: (version 20.8.1.4327, build id: 3F5D7E4E592D8D67) (from thread 252) (query_id: 4102f664-45a8-4755-9523-045562b22768) Received signal Aborted (6)
[linux-ubuntu-14-04-trusty] 2020.08.10 03:22:06.009632 [ 254 ] <Fatal> BaseDaemon: 
[linux-ubuntu-14-04-trusty] 2020.08.10 03:22:06.009835 [ 254 ] <Fatal> BaseDaemon: Stack trace: 0x7f7d5e357f47 0x7f7d5e3598b1 0x7f7d5e34942a 0x7f7d5e3494a2 0x17f2f9f1 0x1819a044 0x1f4a88b0 0x1d57338c 0x1d572855 0x1d4e7fa7 0x1d4e594a 0x1d4e51ad 0x195235bf 0x1958b19b 0x1958c27d 0x1fa9dcc1 0x1faa1453 0x20bd17cc 0x20288a55 0x20948eca 0x209a54ac 0x209a540f 0x209a53cd 0x209a537d 0x209a534d 0x209a44ae 0x17f52735 0x17f51655
[linux-ubuntu-14-04-trusty] 2020.08.10 03:22:06.010205 [ 254 ] <Fatal> BaseDaemon: 4. /build/glibc-2ORdQG/glibc-2.27/signal/../sysdeps/unix/sysv/linux/raise.c:51: raise @ 0x3ef47 in /usr/lib/debug/lib/x86_64-linux-gnu/libc-2.27.so
[linux-ubuntu-14-04-trusty] 2020.08.10 03:22:06.010499 [ 254 ] <Fatal> BaseDaemon: 5. /build/glibc-2ORdQG/glibc-2.27/stdlib/abort.c:81: __GI_abort @ 0x408b1 in /usr/lib/debug/lib/x86_64-linux-gnu/libc-2.27.so
[linux-ubuntu-14-04-trusty] 2020.08.10 03:22:06.010732 [ 254 ] <Fatal> BaseDaemon: 6. /build/glibc-2ORdQG/glibc-2.27/assert/assert.c:89: __assert_fail_base @ 0x3042a in /usr/lib/debug/lib/x86_64-linux-gnu/libc-2.27.so
[linux-ubuntu-14-04-trusty] 2020.08.10 03:22:06.011171 [ 254 ] <Fatal> BaseDaemon: 7. ? @ 0x304a2 in /usr/lib/debug/lib/x86_64-linux-gnu/libc-2.27.so
[linux-ubuntu-14-04-trusty] 2020.08.10 03:22:06.011551 [ 254 ] <Fatal> BaseDaemon: 8. /build/obj-x86_64-linux-gnu/../src/Common/Exception.cpp:48: DB::Exception::Exception(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, int) @ 0x17f2f9f1 in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.08.10 03:22:06.014577 [ 254 ] <Fatal> BaseDaemon: 9. /build/obj-x86_64-linux-gnu/../src/Common/assert_cast.h:47: DB::ColumnString const& assert_cast<DB::ColumnString const&, DB::IColumn const&>(DB::IColumn const&) @ 0x1819a044 in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.08.10 03:22:06.055259 [ 254 ] <Fatal> BaseDaemon: 10. /build/obj-x86_64-linux-gnu/../src/Columns/ColumnString.h:223: DB::ColumnString::compareAt(unsigned long, unsigned long, DB::IColumn const&, int) const @ 0x1f4a88b0 in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.08.10 03:22:06.087783 [ 254 ] <Fatal> BaseDaemon: 11. /build/obj-x86_64-linux-gnu/../src/Functions/array/arrayIndex.h:511: DB::ArrayIndexGenericImpl<DB::IndexToOne, false>::vectorCase4(DB::IColumn const&, DB::PODArray<unsigned long, 4096ul, Allocator<false, false>, 15ul, 16ul> const&, DB::IColumn const&, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> const&, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> const&) @ 0x1d57338c in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.08.10 03:22:06.121014 [ 254 ] <Fatal> BaseDaemon: 12. /build/obj-x86_64-linux-gnu/../src/Functions/array/arrayIndex.h:0: DB::ArrayIndexGenericImpl<DB::IndexToOne, false>::vector(DB::IColumn const&, DB::PODArray<unsigned long, 4096ul, Allocator<false, false>, 15ul, 16ul> const&, DB::IColumn const&, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul>&, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> const*, DB::PODArray<char8_t, 4096ul, Allocator<false, false>, 15ul, 16ul> const*) @ 0x1d572855 in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.08.10 03:22:06.147898 [ 254 ] <Fatal> BaseDaemon: 13. /build/obj-x86_64-linux-gnu/../src/Functions/array/arrayIndex.h:841: DB::FunctionArrayIndex<DB::IndexToOne, DB::NameHas>::executeGeneric(DB::Block&, std::__1::vector<unsigned long, std::__1::allocator<unsigned long> > const&, unsigned long) const @ 0x1d4e7fa7 in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.08.10 03:22:06.173993 [ 254 ] <Fatal> BaseDaemon: 14. /build/obj-x86_64-linux-gnu/../src/Functions/array/arrayIndex.h:990: DB::FunctionArrayIndex<DB::IndexToOne, DB::NameHas>::perform(DB::Block&, std::__1::vector<unsigned long, std::__1::allocator<unsigned long> > const&, unsigned long) const @ 0x1d4e594a in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.08.10 03:22:06.200296 [ 254 ] <Fatal> BaseDaemon: 15. /build/obj-x86_64-linux-gnu/../src/Functions/array/arrayIndex.h:977: DB::FunctionArrayIndex<DB::IndexToOne, DB::NameHas>::executeImpl(DB::Block&, std::__1::vector<unsigned long, std::__1::allocator<unsigned long> > const&, unsigned long, unsigned long) const @ 0x1d4e51ad in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.08.10 03:22:06.206417 [ 254 ] <Fatal> BaseDaemon: 16. /build/obj-x86_64-linux-gnu/../src/Functions/IFunctionAdaptors.h:152: DB::DefaultExecutable::execute(DB::Block&, std::__1::vector<unsigned long, std::__1::allocator<unsigned long> > const&, unsigned long, unsigned long) @ 0x195235bf in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.08.10 03:22:06.212449 [ 254 ] <Fatal> BaseDaemon: 17. /build/obj-x86_64-linux-gnu/../src/Functions/IFunction.cpp:326: DB::ExecutableFunctionAdaptor::executeWithoutLowCardinalityColumns(DB::Block&, std::__1::vector<unsigned long, std::__1::allocator<unsigned long> > const&, unsigned long, unsigned long, bool) @ 0x1958b19b in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.08.10 03:22:06.217997 [ 254 ] <Fatal> BaseDaemon: 18. /build/obj-x86_64-linux-gnu/../src/Functions/IFunction.cpp:486: DB::ExecutableFunctionAdaptor::execute(DB::Block&, std::__1::vector<unsigned long, std::__1::allocator<unsigned long> > const&, unsigned long, unsigned long, bool) @ 0x1958c27d in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.08.10 03:22:06.258414 [ 254 ] <Fatal> BaseDaemon: 19. /build/obj-x86_64-linux-gnu/../src/Interpreters/ExpressionActions.cpp:365: DB::ExpressionAction::execute(DB::Block&, bool) const @ 0x1fa9dcc1 in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.08.10 03:22:06.300618 [ 254 ] <Fatal> BaseDaemon: 20. /build/obj-x86_64-linux-gnu/../src/Interpreters/ExpressionActions.cpp:684: DB::ExpressionActions::execute(DB::Block&, bool) const @ 0x1faa1453 in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.08.10 03:22:06.353500 [ 254 ] <Fatal> BaseDaemon: 21. /build/obj-x86_64-linux-gnu/../src/Processors/Transforms/ExpressionTransform.cpp:41: DB::ExpressionTransform::transform(DB::Chunk&) @ 0x20bd17cc in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.08.10 03:22:06.400610 [ 254 ] <Fatal> BaseDaemon: 22. /build/obj-x86_64-linux-gnu/../src/Processors/ISimpleTransform.h:43: DB::ISimpleTransform::transform(DB::Chunk&, DB::Chunk&) @ 0x20288a55 in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.08.10 03:22:06.449961 [ 254 ] <Fatal> BaseDaemon: 23. /build/obj-x86_64-linux-gnu/../src/Processors/ISimpleTransform.cpp:89: DB::ISimpleTransform::work() @ 0x20948eca in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.08.10 03:22:06.498091 [ 254 ] <Fatal> BaseDaemon: 24. /build/obj-x86_64-linux-gnu/../src/Processors/Executors/PipelineExecutor.cpp:78: DB::executeJob(DB::IProcessor*) @ 0x209a54ac in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.08.10 03:22:06.548950 [ 254 ] <Fatal> BaseDaemon: 25. /build/obj-x86_64-linux-gnu/../src/Processors/Executors/PipelineExecutor.cpp:95: DB::PipelineExecutor::addJob(DB::ExecutingGraph::Node*)::$_0::operator()() const @ 0x209a540f in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.08.10 03:22:06.599582 [ 254 ] <Fatal> BaseDaemon: 26. /build/obj-x86_64-linux-gnu/../contrib/libcxx/include/type_traits:3519: decltype(std::__1::forward<DB::PipelineExecutor::addJob(DB::ExecutingGraph::Node*)::$_0&>(fp)()) std::__1::__invoke<DB::PipelineExecutor::addJob(DB::ExecutingGraph::Node*)::$_0&>(DB::PipelineExecutor::addJob(DB::ExecutingGraph::Node*)::$_0&) @ 0x209a53cd in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.08.10 03:22:06.651028 [ 254 ] <Fatal> BaseDaemon: 27. /build/obj-x86_64-linux-gnu/../contrib/libcxx/include/__functional_base:349: void std::__1::__invoke_void_return_wrapper<void>::__call<DB::PipelineExecutor::addJob(DB::ExecutingGraph::Node*)::$_0&>(DB::PipelineExecutor::addJob(DB::ExecutingGraph::Node*)::$_0&) @ 0x209a537d in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.08.10 03:22:06.701525 [ 254 ] <Fatal> BaseDaemon: 28. /build/obj-x86_64-linux-gnu/../contrib/libcxx/include/functional:1540: std::__1::__function::__alloc_func<DB::PipelineExecutor::addJob(DB::ExecutingGraph::Node*)::$_0, std::__1::allocator<DB::PipelineExecutor::addJob(DB::ExecutingGraph::Node*)::$_0>, void ()>::operator()() @ 0x209a534d in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.08.10 03:22:06.753390 [ 254 ] <Fatal> BaseDaemon: 29. /build/obj-x86_64-linux-gnu/../contrib/libcxx/include/functional:1714: std::__1::__function::__func<DB::PipelineExecutor::addJob(DB::ExecutingGraph::Node*)::$_0, std::__1::allocator<DB::PipelineExecutor::addJob(DB::ExecutingGraph::Node*)::$_0>, void ()>::operator()() @ 0x209a44ae in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.08.10 03:22:06.754032 [ 254 ] <Fatal> BaseDaemon: 30. /build/obj-x86_64-linux-gnu/../contrib/libcxx/include/functional:1867: std::__1::__function::__value_func<void ()>::operator()() const @ 0x17f52735 in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.08.10 03:22:06.754411 [ 254 ] <Fatal> BaseDaemon: 31. /build/obj-x86_64-linux-gnu/../contrib/libcxx/include/functional:2473: std::__1::function<void ()>::operator()() const @ 0x17f51655 in /workspace/clickhouse
Error on processing query: SELECT has(materialize(['bbbbbb\0b', NULL]), materialize(NULL))

```

https://clickhouse-test-reports.s3.yandex.net/13495/3b9f5a827c5ee1d8c5376a8948ecf97516092978/fuzzer/fuzzer.log