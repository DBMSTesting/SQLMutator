ID: 13281
Title: JIT: Symbol not found: memset
Description:
```
SELECT multiIf((number % 10) = 1025, toInt8(7), (number % -2) = 1048577, toInt16('9223372036854775807'), toInt16(257)) FROM system.numbers LIMIT 255 settings compile_expressions = 1, min_count_to_compile_expression = 1

Expected<T> must be checked before access or destruction.
Unchecked Expected<T> contained error:
Symbol not found: memset

2020.07.31 02:40:56.731416 [ 64 ] {} <Trace> BaseDaemon: Received signal 6
2020.07.31 02:40:56.731925 [ 636 ] {} <Fatal> BaseDaemon: ########################################
2020.07.31 02:40:56.732393 [ 636 ] {} <Fatal> BaseDaemon: (version 20.7.1.4229, build id: E9DF5F1A5C246161) (from thread 96) (query_id: b777483b-9555-4874-bd73-488d27d4ff41) Received signal Aborted (6)
2020.07.31 02:40:56.732619 [ 636 ] {} <Fatal> BaseDaemon: 
2020.07.31 02:40:56.732854 [ 636 ] {} <Fatal> BaseDaemon: Stack trace: 0x7ff80c2c3f47 0x7ff80c2c58b1 0x1eda78f4 0x1eda779f 0x1eda75dc 0x1eda7484 0x1eda7402 0x1eda73b2 0x1eda64c3 0x20c8a98d 0x20c8a5c8 0x20cb036e 0x1eda293a 0x20c87813 0x20cb453a 0x20cb3d75 0x20cbcabd 0x20cbcbf1 0x1edb4c2c 0x1edbdf87 0x1edbdf06 0x1edbdea6 0x1edbde66 0x1edbd05d 0x1edc0c5b 0x1edc0a23 0x1edb1f9b 0x1ed9a074
2020.07.31 02:40:56.733256 [ 636 ] {} <Fatal> BaseDaemon: 4. /build/glibc-2ORdQG/glibc-2.27/signal/../sysdeps/unix/sysv/linux/raise.c:51: raise @ 0x3ef47 in /usr/lib/debug/lib/x86_64-linux-gnu/libc-2.27.so
2020.07.31 02:40:56.733576 [ 636 ] {} <Fatal> BaseDaemon: 5. /build/glibc-2ORdQG/glibc-2.27/stdlib/abort.c:81: __GI_abort @ 0x408b1 in /usr/lib/debug/lib/x86_64-linux-gnu/libc-2.27.so
2020.07.31 02:40:56.793640 [ 636 ] {} <Fatal> BaseDaemon: 6. ? @ 0x1eda78f4 in /workspace/clickhouse
2020.07.31 02:40:56.814986 [ 72 ] {} <Trace> SystemLog (system.metric_log): Flushing system log, 8 entries to flush
2020.07.31 02:40:56.835468 [ 636 ] {} <Fatal> BaseDaemon: 7. /build/obj-x86_64-linux-gnu/../contrib/llvm/llvm/include/llvm/Support/Error.h:673: llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >::assertIsChecked() @ 0x1eda779f in /workspace/clickhouse
2020.07.31 02:40:56.875602 [ 72 ] {} <Debug> DiskLocal: Reserving 1.00 MiB on disk `default`, having unreserved 672.22 GiB.
2020.07.31 02:40:56.877936 [ 636 ] {} <Fatal> BaseDaemon: 8. /build/obj-x86_64-linux-gnu/../contrib/llvm/llvm/include/llvm/Support/Error.h:516: llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >::~Expected() @ 0x1eda75dc in /workspace/clickhouse
2020.07.31 02:40:56.916464 [ 72 ] {} <Trace> system.metric_log: Renaming temporary part tmp_insert_202007_431_431_0 to 202007_431_431_0.
2020.07.31 02:40:56.920605 [ 636 ] {} <Fatal> BaseDaemon: 9. /build/obj-x86_64-linux-gnu/../contrib/libcxx/include/type_traits:3519: decltype(std::__1::forward<DB::SymbolResolver::lookup(std::__1::shared_ptr<llvm::orc::AsynchronousSymbolQuery>, llvm::DenseSet<llvm::orc::SymbolStringPtr, llvm::DenseMapInfo<llvm::orc::SymbolStringPtr> >)::'lambda'(llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >)&>(fp)(std::__1::forward<llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > > >(fp0))) std::__1::__invoke<DB::SymbolResolver::lookup(std::__1::shared_ptr<llvm::orc::AsynchronousSymbolQuery>, llvm::DenseSet<llvm::orc::SymbolStringPtr, llvm::DenseMapInfo<llvm::orc::SymbolStringPtr> >)::'lambda'(llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >)&, llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > > >(DB::SymbolResolver::lookup(std::__1::shared_ptr<llvm::orc::AsynchronousSymbolQuery>, llvm::DenseSet<llvm::orc::SymbolStringPtr, llvm::DenseMapInfo<llvm::orc::SymbolStringPtr> >)::'lambda'(llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >)&, llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >&&) @ 0x1eda7484 in /workspace/clickhouse
2020.07.31 02:40:56.921419 [ 110 ] {} <Debug> system.metric_log (MergerMutator): Selected 6 parts from 202007_1_426_85 to 202007_431_431_0
2020.07.31 02:40:56.921640 [ 110 ] {} <Debug> DiskLocal: Reserving 1.00 MiB on disk `default`, having unreserved 672.22 GiB.
2020.07.31 02:40:56.921858 [ 110 ] {} <Debug> system.metric_log (MergerMutator): Merging 6 parts: from 202007_1_426_85 to 202007_431_431_0 into Compact
2020.07.31 02:40:56.930592 [ 110 ] {} <Debug> system.metric_log (MergerMutator): Selected MergeAlgorithm: Horizontal
2020.07.31 02:40:56.932312 [ 72 ] {} <Trace> SystemLog (system.metric_log): Flushed system log
2020.07.31 02:40:56.943716 [ 110 ] {} <Trace> MergeTreeSequentialSource: Reading 2 marks from part 202007_1_426_85, total 3241 rows starting from the beginning of the part
2020.07.31 02:40:56.963382 [ 636 ] {} <Fatal> BaseDaemon: 10. /build/obj-x86_64-linux-gnu/../contrib/libcxx/include/__functional_base:349: void std::__1::__invoke_void_return_wrapper<void>::__call<DB::SymbolResolver::lookup(std::__1::shared_ptr<llvm::orc::AsynchronousSymbolQuery>, llvm::DenseSet<llvm::orc::SymbolStringPtr, llvm::DenseMapInfo<llvm::orc::SymbolStringPtr> >)::'lambda'(llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >)&, llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > > >(DB::SymbolResolver::lookup(std::__1::shared_ptr<llvm::orc::AsynchronousSymbolQuery>, llvm::DenseSet<llvm::orc::SymbolStringPtr, llvm::DenseMapInfo<llvm::orc::SymbolStringPtr> >)::'lambda'(llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >)&, llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >&&) @ 0x1eda7402 in /workspace/clickhouse
2020.07.31 02:40:56.976996 [ 110 ] {} <Trace> MergeTreeSequentialSource: Reading 2 marks from part 202007_427_427_0, total 8 rows starting from the beginning of the part
2020.07.31 02:40:57.004680 [ 636 ] {} <Fatal> BaseDaemon: 11. /build/obj-x86_64-linux-gnu/../contrib/libcxx/include/functional:1540: std::__1::__function::__alloc_func<DB::SymbolResolver::lookup(std::__1::shared_ptr<llvm::orc::AsynchronousSymbolQuery>, llvm::DenseSet<llvm::orc::SymbolStringPtr, llvm::DenseMapInfo<llvm::orc::SymbolStringPtr> >)::'lambda'(llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >), std::__1::allocator<DB::SymbolResolver::lookup(std::__1::shared_ptr<llvm::orc::AsynchronousSymbolQuery>, llvm::DenseSet<llvm::orc::SymbolStringPtr, llvm::DenseMapInfo<llvm::orc::SymbolStringPtr> >)::'lambda'(llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >)>, void (llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >)>::operator()(llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >&&) @ 0x1eda73b2 in /workspace/clickhouse
2020.07.31 02:40:57.009423 [ 110 ] {} <Trace> MergeTreeSequentialSource: Reading 2 marks from part 202007_428_428_0, total 7 rows starting from the beginning of the part
2020.07.31 02:40:57.041974 [ 110 ] {} <Trace> MergeTreeSequentialSource: Reading 2 marks from part 202007_429_429_0, total 8 rows starting from the beginning of the part
2020.07.31 02:40:57.046464 [ 636 ] {} <Fatal> BaseDaemon: 12. /build/obj-x86_64-linux-gnu/../contrib/libcxx/include/functional:1714: std::__1::__function::__func<DB::SymbolResolver::lookup(std::__1::shared_ptr<llvm::orc::AsynchronousSymbolQuery>, llvm::DenseSet<llvm::orc::SymbolStringPtr, llvm::DenseMapInfo<llvm::orc::SymbolStringPtr> >)::'lambda'(llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >), std::__1::allocator<DB::SymbolResolver::lookup(std::__1::shared_ptr<llvm::orc::AsynchronousSymbolQuery>, llvm::DenseSet<llvm::orc::SymbolStringPtr, llvm::DenseMapInfo<llvm::orc::SymbolStringPtr> >)::'lambda'(llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >)>, void (llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >)>::operator()(llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >&&) @ 0x1eda64c3 in /workspace/clickhouse
2020.07.31 02:40:57.074386 [ 110 ] {} <Trace> MergeTreeSequentialSource: Reading 2 marks from part 202007_430_430_0, total 7 rows starting from the beginning of the part
2020.07.31 02:40:57.107012 [ 636 ] {} <Fatal> BaseDaemon: 13. std::__1::__function::__value_func<void (llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >)>::operator()(llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >&&) const @ 0x20c8a98d in /workspace/clickhouse
2020.07.31 02:40:57.107163 [ 110 ] {} <Trace> MergeTreeSequentialSource: Reading 2 marks from part 202007_431_431_0, total 8 rows starting from the beginning of the part
2020.07.31 02:40:57.167378 [ 636 ] {} <Fatal> BaseDaemon: 14. std::__1::function<void (llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >)>::operator()(llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >) const @ 0x20c8a5c8 in /workspace/clickhouse
2020.07.31 02:40:57.227978 [ 636 ] {} <Fatal> BaseDaemon: 15. llvm::LegacyJITSymbolResolver::lookup(std::__1::set<llvm::StringRef, std::__1::less<llvm::StringRef>, std::__1::allocator<llvm::StringRef> > const&, std::__1::function<void (llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >)>) @ 0x20cb036e in /workspace/clickhouse
2020.07.31 02:40:57.269411 [ 636 ] {} <Fatal> BaseDaemon: 16. /build/obj-x86_64-linux-gnu/../src/Interpreters/ExpressionJIT.cpp:153: DB::SymbolResolver::lookup(std::__1::shared_ptr<llvm::orc::AsynchronousSymbolQuery>, llvm::DenseSet<llvm::orc::SymbolStringPtr, llvm::DenseMapInfo<llvm::orc::SymbolStringPtr> >) @ 0x1eda293a in /workspace/clickhouse
2020.07.31 02:40:57.329605 [ 636 ] {} <Fatal> BaseDaemon: 17. llvm::orc::JITSymbolResolverAdapter::lookup(std::__1::set<llvm::StringRef, std::__1::less<llvm::StringRef>, std::__1::allocator<llvm::StringRef> > const&, std::__1::function<void (llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >)>) @ 0x20c87813 in /workspace/clickhouse
2020.07.31 02:40:57.389552 [ 636 ] {} <Fatal> BaseDaemon: 18. llvm::RuntimeDyldImpl::resolveExternalSymbols() @ 0x20cb453a in /workspace/clickhouse
2020.07.31 02:40:57.392366 [ 110 ] {} <Debug> system.metric_log (MergerMutator): Merge sorted 3279 rows, containing 255 columns (255 merged, 0 gathered) in 0.470533583 sec., 6968.684315992808 rows/sec., 13.49 MiB/sec.
2020.07.31 02:40:57.450314 [ 636 ] {} <Fatal> BaseDaemon: 19. llvm::RuntimeDyldImpl::resolveRelocations() @ 0x20cb3d75 in /workspace/clickhouse
2020.07.31 02:40:57.481502 [ 110 ] {} <Trace> system.metric_log: Renaming temporary part tmp_merge_202007_1_431_86 to 202007_1_431_86.
2020.07.31 02:40:57.483150 [ 110 ] {} <Trace> system.metric_log (MergerMutator): Merged 6 parts: from 202007_1_426_85 to 202007_431_431_0
2020.07.31 02:40:57.483310 [ 110 ] {} <Debug> MemoryTracker: Peak memory usage: 16.07 MiB.
2020.07.31 02:40:57.510945 [ 636 ] {} <Fatal> BaseDaemon: 20. llvm::RuntimeDyld::resolveRelocations() @ 0x20cbcabd in /workspace/clickhouse
2020.07.31 02:40:57.570557 [ 636 ] {} <Fatal> BaseDaemon: 21. llvm::RuntimeDyld::finalizeWithMemoryManagerLocking() @ 0x20cbcbf1 in /workspace/clickhouse
2020.07.31 02:40:57.613127 [ 636 ] {} <Fatal> BaseDaemon: 22. /build/obj-x86_64-linux-gnu/../contrib/llvm/llvm/include/llvm/ExecutionEngine/Orc/RTDyldObjectLinkingLayer.h:255: llvm::orc::LegacyRTDyldObjectLinkingLayer::ConcreteLinkedObject<std::__1::shared_ptr<llvm::RuntimeDyld::MemoryManager> >::finalize() @ 0x1edb4c2c in /workspace/clickhouse
2020.07.31 02:40:57.656170 [ 636 ] {} <Fatal> BaseDaemon: 23. /build/obj-x86_64-linux-gnu/../contrib/llvm/llvm/include/llvm/ExecutionEngine/Orc/RTDyldObjectLinkingLayer.h:276: llvm::orc::LegacyRTDyldObjectLinkingLayer::ConcreteLinkedObject<std::__1::shared_ptr<llvm::RuntimeDyld::MemoryManager> >::getSymbolMaterializer(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >)::'lambda'()::operator()() const @ 0x1edbdf87 in /workspace/clickhouse
2020.07.31 02:40:57.699601 [ 636 ] {} <Fatal> BaseDaemon: 24. /build/obj-x86_64-linux-gnu/../contrib/libcxx/include/type_traits:3519: decltype(std::__1::forward<std::__1::shared_ptr<llvm::RuntimeDyld::MemoryManager> >(fp)(std::__1::forward<llvm::orc::LegacyRTDyldObjectLinkingLayer::ConcreteLinkedObject<std::__1::shared_ptr<llvm::RuntimeDyld::MemoryManager> >::getSymbolMaterializer(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >)::'lambda'()&>(fp0)...)) std::__1::__invoke<llvm::orc::LegacyRTDyldObjectLinkingLayer::ConcreteLinkedObject<std::__1::shared_ptr<llvm::RuntimeDyld::MemoryManager> >::getSymbolMaterializer(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >)::'lambda'()&>(std::__1::shared_ptr<llvm::RuntimeDyld::MemoryManager>&&, llvm::orc::LegacyRTDyldObjectLinkingLayer::ConcreteLinkedObject<std::__1::shared_ptr<llvm::RuntimeDyld::MemoryManager> >::getSymbolMaterializer(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >)::'lambda'()&...) @ 0x1edbdf06 in /workspace/clickhouse
2020.07.31 02:40:57.742554 [ 636 ] {} <Fatal> BaseDaemon: 25. /build/obj-x86_64-linux-gnu/../contrib/libcxx/include/__functional_base:317: llvm::Expected<unsigned long> std::__1::__invoke_void_return_wrapper<llvm::Expected<unsigned long> >::__call<llvm::orc::LegacyRTDyldObjectLinkingLayer::ConcreteLinkedObject<std::__1::shared_ptr<llvm::RuntimeDyld::MemoryManager> >::getSymbolMaterializer(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >)::'lambda'()&>(std::__1::shared_ptr<llvm::RuntimeDyld::MemoryManager>&&...) @ 0x1edbdea6 in /workspace/clickhouse
2020.07.31 02:40:57.785083 [ 636 ] {} <Fatal> BaseDaemon: 26. /build/obj-x86_64-linux-gnu/../contrib/libcxx/include/functional:1540: std::__1::__function::__alloc_func<llvm::orc::LegacyRTDyldObjectLinkingLayer::ConcreteLinkedObject<std::__1::shared_ptr<llvm::RuntimeDyld::MemoryManager> >::getSymbolMaterializer(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >)::'lambda'(), std::__1::allocator<llvm::orc::LegacyRTDyldObjectLinkingLayer::ConcreteLinkedObject<std::__1::shared_ptr<llvm::RuntimeDyld::MemoryManager> >::getSymbolMaterializer(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >)::'lambda'()>, llvm::Expected<unsigned long> ()>::operator()() @ 0x1edbde66 in /workspace/clickhouse
2020.07.31 02:40:57.827862 [ 636 ] {} <Fatal> BaseDaemon: 27. /build/obj-x86_64-linux-gnu/../contrib/libcxx/include/functional:1714: std::__1::__function::__func<llvm::orc::LegacyRTDyldObjectLinkingLayer::ConcreteLinkedObject<std::__1::shared_ptr<llvm::RuntimeDyld::MemoryManager> >::getSymbolMaterializer(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >)::'lambda'(), std::__1::allocator<llvm::orc::LegacyRTDyldObjectLinkingLayer::ConcreteLinkedObject<std::__1::shared_ptr<llvm::RuntimeDyld::MemoryManager> >::getSymbolMaterializer(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >)::'lambda'()>, llvm::Expected<unsigned long> ()>::operator()() @ 0x1edbd05d in /workspace/clickhouse
2020.07.31 02:40:57.870703 [ 636 ] {} <Fatal> BaseDaemon: 28. /build/obj-x86_64-linux-gnu/../contrib/libcxx/include/functional:1867: std::__1::__function::__value_func<llvm::Expected<unsigned long> ()>::operator()() const @ 0x1edc0c5b in /workspace/clickhouse
2020.07.31 02:40:57.913450 [ 636 ] {} <Fatal> BaseDaemon: 29. /build/obj-x86_64-linux-gnu/../contrib/libcxx/include/functional:2473: std::__1::function<llvm::Expected<unsigned long> ()>::operator()() const @ 0x1edc0a23 in /workspace/clickhouse
2020.07.31 02:40:57.955835 [ 636 ] {} <Fatal> BaseDaemon: 30. /build/obj-x86_64-linux-gnu/../contrib/llvm/llvm/include/llvm/ExecutionEngine/JITSymbol.h:297: llvm::JITSymbol::getAddress() @ 0x1edb1f9b in /workspace/clickhouse
2020.07.31 02:40:57.996549 [ 636 ] {} <Fatal> BaseDaemon: 31. /build/obj-x86_64-linux-gnu/../src/Interpreters/ExpressionJIT.cpp:241: DB::LLVMContext::compileAllFunctionsToNativeCode() @ 0x1ed9a074 in /workspace/clickhouse
```

Couldn't reproduce locally because I use the split build. In release build I get another error:
```
2020.08.03 18:20:13.187789 [ 156887 ] {2fb69c4b-b33b-41ab-a9ef-f4465ae3a3d4} <Debug> executeQuery: (from [::1]:58342) SELECT multiIf((number % 10) = 1025, toInt8(7), (number % -2) = 1048577, toInt16('9223372036854775807'), toInt16(257)) FROM system.numbers LIMIT 255 settings compile_expressions = 1, min_count_to_compile_expression = 1
2020.08.03 18:20:13.285060 [ 156887 ] {2fb69c4b-b33b-41ab-a9ef-f4465ae3a3d4} <Error> executeQuery: Code: 263, e.displayText() = DB::Exception: Function multiIf(equals(modulo(number, 10), 1025), toInt8(7), equals(modulo(number, -2), 1048577), toInt16('9223372036854775807'), toInt16(257)) failed to link (version 20.7.1.1) (from [::1]:58342) (in query: SELECT multiIf((number % 10) = 1025, toInt8(7), (number % -2) = 1048577, toInt16('9223372036854775807'), toInt16(257)) FROM system.numbers LIMIT 255 settings compile_expressions = 1, min_count_to_compile_expression = 1), Stack trace (when copying this message, always include the lines below):

0. /home/akuzm/ch4/ch/contrib/poco/Foundation/src/Exception.cpp:27: Poco::Exception::Exception(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, int) @ 0x123cc120 in /home/akuzm/ch4/build-gcc9-rel/programs/clickhouse
1. /home/akuzm/ch4/ch/src/Common/Exception.cpp:37: DB::Exception::Exception(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, int) @ 0xa2b02bd in /home/akuzm/ch4/build-gcc9-rel/programs/clickhouse
2. /home/akuzm/ch4/ch/contrib/libcxx/include/string:2134: DB::LLVMContext::compileAllFunctionsToNativeCode() @ 0xf1e60e5 in /home/akuzm/ch4/build-gcc9-rel/programs/clickhouse
3. /home/akuzm/ch4/ch/contrib/libcxx/include/memory:2587: DB::LLVMFunction::LLVMFunction(std::__1::vector<DB::ExpressionAction, std::__1::allocator<DB::ExpressionAction> > const&, DB::Block const&) @ 0xf1c9c1d in /home/akuzm/ch4/build-gcc9-rel/programs/clickhouse
4. /home/akuzm/ch4/ch/contrib/libcxx/include/new:251: DB::compileFunctions(std::__1::vector<DB::ExpressionAction, std::__1::allocator<DB::ExpressionAction> >&, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, DB::Block const&, std::__1::shared_ptr<DB::CompiledExpressionCache>, unsigned long) @ 0xf1cddbd in /home/akuzm/ch4/build-gcc9-rel/programs/clickhouse
5. /home/akuzm/ch4/ch/src/Interpreters/ExpressionActions.cpp:774: DB::ExpressionActions::finalize(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&) @ 0xf1b37ed in /home/akuzm/ch4/build-gcc9-rel/programs/clickhouse
6. /home/akuzm/ch4/ch/contrib/libcxx/include/__hash_table:1541: DB::ExpressionActionsChain::finalize() @ 0xf1b729e in /home/akuzm/ch4/build-gcc9-rel/programs/clickhouse
7. /home/akuzm/ch4/ch/src/Interpreters/ExpressionAnalyzer.cpp:1037: DB::ExpressionAnalysisResult::ExpressionAnalysisResult(DB::SelectQueryExpressionAnalyzer&, std::__1::shared_ptr<DB::StorageInMemoryMetadata const> const&, bool, bool, bool, std::__1::shared_ptr<DB::FilterInfo> const&, DB::Block const&) @ 0xf24b12f in /home/akuzm/ch4/build-gcc9-rel/programs/clickhouse
8. /home/akuzm/ch4/ch/src/Interpreters/ExpressionAnalyzer.h:164: DB::InterpreterSelectQuery::getSampleBlockImpl() @ 0xf1f8d1d in /home/akuzm/ch4/build-gcc9-rel/programs/clickhouse
9. /home/akuzm/ch4/ch/src/Interpreters/InterpreterSelectQuery.cpp:312: DB::InterpreterSelectQuery::InterpreterSelectQuery(std::__1::shared_ptr<DB::IAST> const&, DB::Context const&, std::__1::shared_ptr<DB::IBlockInputStream> const&, std::__1::optional<DB::Pipe>, std::__1::shared_ptr<DB::IStorage> const&, DB::SelectQueryOptions const&, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, std::__1::shared_ptr<DB::StorageInMemoryMetadata const> const&)::'lambda'(bool)::operator()(bool) const @ 0xf1ff58a in /home/akuzm/ch4/build-gcc9-rel/programs/clickhouse
10. /home/akuzm/ch4/ch/src/Interpreters/InterpreterSelectQuery.cpp:408: DB::InterpreterSelectQuery::InterpreterSelectQuery(std::__1::shared_ptr<DB::IAST> const&, DB::Context const&, std::__1::shared_ptr<DB::IBlockInputStream> const&, std::__1::optional<DB::Pipe>, std::__1::shared_ptr<DB::IStorage> const&, DB::SelectQueryOptions const&, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, std::__1::shared_ptr<DB::StorageInMemoryMetadata const> const&) @ 0xf207537 in /home/akuzm/ch4/build-gcc9-rel/programs/clickhouse
11. /home/akuzm/ch4/ch/src/Interpreters/InterpreterSelectQuery.cpp:146: DB::InterpreterSelectQuery::InterpreterSelectQuery(std::__1::shared_ptr<DB::IAST> const&, DB::Context const&, DB::SelectQueryOptions const&, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&) @ 0xf208ee9 in /home/akuzm/ch4/build-gcc9-rel/programs/clickhouse
12. /home/akuzm/ch4/ch/contrib/libcxx/include/vector:1681: DB::InterpreterSelectWithUnionQuery::InterpreterSelectWithUnionQuery(std::__1::shared_ptr<DB::IAST> const&, DB::Context const&, DB::SelectQueryOptions const&, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&) @ 0xf376c27 in /home/akuzm/ch4/build-gcc9-rel/programs/clickhouse
13. /home/akuzm/ch4/ch/contrib/libcxx/include/vector:461: DB::InterpreterFactory::get(std::__1::shared_ptr<DB::IAST>&, DB::Context&, DB::QueryProcessingStage::Enum) @ 0xf171c1f in /home/akuzm/ch4/build-gcc9-rel/programs/clickhouse
14. /home/akuzm/ch4/ch/contrib/libcxx/include/memory:2587: DB::executeQueryImpl(char const*, char const*, DB::Context&, bool, DB::QueryProcessingStage::Enum, bool, DB::ReadBuffer*) @ 0xf4ed85d in /home/akuzm/ch4/build-gcc9-rel/programs/clickhouse
15. /home/akuzm/ch4/ch/src/Interpreters/executeQuery.cpp:655: DB::executeQuery(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, DB::Context&, bool, DB::QueryProcessingStage::Enum, bool) @ 0xf4f1255 in /home/akuzm/ch4/build-gcc9-rel/programs/clickhouse
16. /home/akuzm/ch4/ch/src/Server/TCPHandler.cpp:253: DB::TCPHandler::runImpl() @ 0xfb563a3 in /home/akuzm/ch4/build-gcc9-rel/programs/clickhouse
17. /home/akuzm/ch4/ch/src/Server/TCPHandler.cpp:1215: DB::TCPHandler::run() @ 0xfb5719e in /home/akuzm/ch4/build-gcc9-rel/programs/clickhouse
18. /home/akuzm/ch4/ch/contrib/poco/Net/src/TCPServerConnection.cpp:57: Poco::Net::TCPServerConnection::start() @ 0x122e9f8b in /home/akuzm/ch4/build-gcc9-rel/programs/clickhouse
19. /home/akuzm/ch4/ch/contrib/libcxx/include/atomic:856: Poco::Net::TCPServerDispatcher::run() @ 0x122ea41b in /home/akuzm/ch4/build-gcc9-rel/programs/clickhouse
20. /home/akuzm/ch4/ch/contrib/poco/Foundation/include/Poco/Mutex_POSIX.h:59: Poco::PooledThread::run() @ 0x12468ef6 in /home/akuzm/ch4/build-gcc9-rel/programs/clickhouse
21. /home/akuzm/ch4/ch/contrib/poco/Foundation/include/Poco/AutoPtr.h:223: Poco::ThreadImpl::runnableEntry(void*) @ 0x124642f0 in /home/akuzm/ch4/build-gcc9-rel/programs/clickhouse
22. start_thread @ 0x9609 in /lib/x86_64-linux-gnu/libpthread-2.31.so
23. /build/glibc-YYA7BZ/glibc-2.31/misc/../sysdeps/unix/sysv/linux/x86_64/clone.S:97: clone @ 0x122103 in /usr/lib/debug/lib/x86_64-linux-gnu/libc-2.31.so
```