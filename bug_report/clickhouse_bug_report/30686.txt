ID: 30686
Title: Keep edits in history while navigating with up/down keys in client (2).
Description:
See #9474
Initially fixed here #9790.
We did not have a test for it and it has regressed.
Broken here: #30143

Please add a test with `expect`.