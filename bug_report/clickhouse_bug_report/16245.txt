ID: 16245
Title: Assertion in llvm/include/llvm/Support/Error.h:673
Description:
https://clickhouse-test-reports.s3.yandex.net/16189/62a0ee8255ffc3404b2a1865a509646a629a8ed4/fuzzer/fuzzer.log

```
SELECT
    (257, 255) IN 
    (
        SELECT
            1025 AS x,
            range(65536, range('0.0000000000', 1048576, NULL, NULL), NULL),
            toUInt8((65535, 0, 257, 10.000100135803223, 9223372036854775807, 0, -9223372036854775808, 1025, 256, 1), x + NULL)
    ),
    throwIf(NOT (y < inf))
FROM default_constraints

[linux-ubuntu-14-04-trusty] 2020.10.20 19:13:02.224118 [ 204 ] <Fatal> BaseDaemon: ########################################
[linux-ubuntu-14-04-trusty] 2020.10.20 19:13:02.224668 [ 204 ] <Fatal> BaseDaemon: (version 20.11.1.4954, build id: 5E26BC10389C3885) (from thread 95) (query_id: 69657137-626b-41d4-9100-10b372b473ce) Received signal Aborted (6)
[linux-ubuntu-14-04-trusty] 2020.10.20 19:13:02.224866 [ 204 ] <Fatal> BaseDaemon: 
[linux-ubuntu-14-04-trusty] 2020.10.20 19:13:02.225062 [ 204 ] <Fatal> BaseDaemon: Stack trace: 0x7fc806f1ef47 0x7fc806f208b1 0x18758e94 0x18758d3f 0x18758b7c 0x18758a24 0x187589a2 0x18758952 0x18757a63 0x1a78b25d 0x1a78ae98 0x1a7b0c3e 0x18753eda 0x1a7880e3 0x1a7b4e0a 0x1a7b4645 0x1a7bd38d 0x1a7bd4c1 0x187661cc 0x1876f527 0x1876f4a6 0x1876f446 0x1876f406 0x1876e5fd 0x187721fb 0x18771fc3 0x1876353b 0x1874b614
[linux-ubuntu-14-04-trusty] 2020.10.20 19:13:02.225424 [ 204 ] <Fatal> BaseDaemon: 4. /build/glibc-2ORdQG/glibc-2.27/signal/../sysdeps/unix/sysv/linux/raise.c:51: gsignal @ 0x3ef47 in /usr/lib/debug/lib/x86_64-linux-gnu/libc-2.27.so
[linux-ubuntu-14-04-trusty] 2020.10.20 19:13:02.225684 [ 204 ] <Fatal> BaseDaemon: 5. /build/glibc-2ORdQG/glibc-2.27/stdlib/abort.c:81: abort @ 0x408b1 in /usr/lib/debug/lib/x86_64-linux-gnu/libc-2.27.so
[linux-ubuntu-14-04-trusty] 2020.10.20 19:13:02.279865 [ 204 ] <Fatal> BaseDaemon: 6. ? @ 0x18758e94 in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.10.20 19:13:02.316959 [ 204 ] <Fatal> BaseDaemon: 7. /build/obj-x86_64-linux-gnu/../contrib/llvm/llvm/include/llvm/Support/Error.h:673: llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >::assertIsChecked() @ 0x18758d3f in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.10.20 19:13:02.354013 [ 204 ] <Fatal> BaseDaemon: 8. /build/obj-x86_64-linux-gnu/../contrib/llvm/llvm/include/llvm/Support/Error.h:516: llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >::~Expected() @ 0x18758b7c in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.10.20 19:13:02.390517 [ 204 ] <Fatal> BaseDaemon: 9. /build/obj-x86_64-linux-gnu/../contrib/libcxx/include/type_traits:3519: decltype(std::__1::forward<DB::SymbolResolver::lookup(std::__1::shared_ptr<llvm::orc::AsynchronousSymbolQuery>, llvm::DenseSet<llvm::orc::SymbolStringPtr, llvm::DenseMapInfo<llvm::orc::SymbolStringPtr> >)::'lambda'(llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >)&>(fp)(std::__1::forward<llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > > >(fp0))) std::__1::__invoke<DB::SymbolResolver::lookup(std::__1::shared_ptr<llvm::orc::AsynchronousSymbolQuery>, llvm::DenseSet<llvm::orc::SymbolStringPtr, llvm::DenseMapInfo<llvm::orc::SymbolStringPtr> >)::'lambda'(llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >)&, llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > > >(DB::SymbolResolver::lookup(std::__1::shared_ptr<llvm::orc::AsynchronousSymbolQuery>, llvm::DenseSet<llvm::orc::SymbolStringPtr, llvm::DenseMapInfo<llvm::orc::SymbolStringPtr> >)::'lambda'(llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >)&, llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >&&) @ 0x18758a24 in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.10.20 19:13:02.427760 [ 204 ] <Fatal> BaseDaemon: 10. /build/obj-x86_64-linux-gnu/../contrib/libcxx/include/__functional_base:349: void std::__1::__invoke_void_return_wrapper<void>::__call<DB::SymbolResolver::lookup(std::__1::shared_ptr<llvm::orc::AsynchronousSymbolQuery>, llvm::DenseSet<llvm::orc::SymbolStringPtr, llvm::DenseMapInfo<llvm::orc::SymbolStringPtr> >)::'lambda'(llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >)&, llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > > >(DB::SymbolResolver::lookup(std::__1::shared_ptr<llvm::orc::AsynchronousSymbolQuery>, llvm::DenseSet<llvm::orc::SymbolStringPtr, llvm::DenseMapInfo<llvm::orc::SymbolStringPtr> >)::'lambda'(llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >)&, llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >&&) @ 0x187589a2 in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.10.20 19:13:02.464756 [ 204 ] <Fatal> BaseDaemon: 11. /build/obj-x86_64-linux-gnu/../contrib/libcxx/include/functional:1540: std::__1::__function::__alloc_func<DB::SymbolResolver::lookup(std::__1::shared_ptr<llvm::orc::AsynchronousSymbolQuery>, llvm::DenseSet<llvm::orc::SymbolStringPtr, llvm::DenseMapInfo<llvm::orc::SymbolStringPtr> >)::'lambda'(llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >), std::__1::allocator<DB::SymbolResolver::lookup(std::__1::shared_ptr<llvm::orc::AsynchronousSymbolQuery>, llvm::DenseSet<llvm::orc::SymbolStringPtr, llvm::DenseMapInfo<llvm::orc::SymbolStringPtr> >)::'lambda'(llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >)>, void (llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >)>::operator()(llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >&&) @ 0x18758952 in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.10.20 19:13:02.500897 [ 204 ] <Fatal> BaseDaemon: 12. /build/obj-x86_64-linux-gnu/../contrib/libcxx/include/functional:1714: std::__1::__function::__func<DB::SymbolResolver::lookup(std::__1::shared_ptr<llvm::orc::AsynchronousSymbolQuery>, llvm::DenseSet<llvm::orc::SymbolStringPtr, llvm::DenseMapInfo<llvm::orc::SymbolStringPtr> >)::'lambda'(llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >), std::__1::allocator<DB::SymbolResolver::lookup(std::__1::shared_ptr<llvm::orc::AsynchronousSymbolQuery>, llvm::DenseSet<llvm::orc::SymbolStringPtr, llvm::DenseMapInfo<llvm::orc::SymbolStringPtr> >)::'lambda'(llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >)>, void (llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >)>::operator()(llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >&&) @ 0x18757a63 in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.10.20 19:13:02.554483 [ 204 ] <Fatal> BaseDaemon: 13. std::__1::__function::__value_func<void (llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >)>::operator()(llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >&&) const @ 0x1a78b25d in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.10.20 19:13:02.609037 [ 204 ] <Fatal> BaseDaemon: 14. std::__1::function<void (llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >)>::operator()(llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >) const @ 0x1a78ae98 in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.10.20 19:13:02.662944 [ 204 ] <Fatal> BaseDaemon: 15. llvm::LegacyJITSymbolResolver::lookup(std::__1::set<llvm::StringRef, std::__1::less<llvm::StringRef>, std::__1::allocator<llvm::StringRef> > const&, std::__1::function<void (llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >)>) @ 0x1a7b0c3e in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.10.20 19:13:02.698954 [ 204 ] <Fatal> BaseDaemon: 16. /build/obj-x86_64-linux-gnu/../src/Interpreters/ExpressionJIT.cpp:153: DB::SymbolResolver::lookup(std::__1::shared_ptr<llvm::orc::AsynchronousSymbolQuery>, llvm::DenseSet<llvm::orc::SymbolStringPtr, llvm::DenseMapInfo<llvm::orc::SymbolStringPtr> >) @ 0x18753eda in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.10.20 19:13:02.752440 [ 204 ] <Fatal> BaseDaemon: 17. llvm::orc::JITSymbolResolverAdapter::lookup(std::__1::set<llvm::StringRef, std::__1::less<llvm::StringRef>, std::__1::allocator<llvm::StringRef> > const&, std::__1::function<void (llvm::Expected<std::__1::map<llvm::StringRef, llvm::JITEvaluatedSymbol, std::__1::less<llvm::StringRef>, std::__1::allocator<std::__1::pair<llvm::StringRef const, llvm::JITEvaluatedSymbol> > > >)>) @ 0x1a7880e3 in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.10.20 19:13:02.805908 [ 204 ] <Fatal> BaseDaemon: 18. llvm::RuntimeDyldImpl::resolveExternalSymbols() @ 0x1a7b4e0a in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.10.20 19:13:02.860245 [ 204 ] <Fatal> BaseDaemon: 19. llvm::RuntimeDyldImpl::resolveRelocations() @ 0x1a7b4645 in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.10.20 19:13:02.913844 [ 204 ] <Fatal> BaseDaemon: 20. llvm::RuntimeDyld::resolveRelocations() @ 0x1a7bd38d in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.10.20 19:13:02.968217 [ 204 ] <Fatal> BaseDaemon: 21. llvm::RuntimeDyld::finalizeWithMemoryManagerLocking() @ 0x1a7bd4c1 in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.10.20 19:13:03.006025 [ 204 ] <Fatal> BaseDaemon: 22. /build/obj-x86_64-linux-gnu/../contrib/llvm/llvm/include/llvm/ExecutionEngine/Orc/RTDyldObjectLinkingLayer.h:255: llvm::orc::LegacyRTDyldObjectLinkingLayer::ConcreteLinkedObject<std::__1::shared_ptr<llvm::RuntimeDyld::MemoryManager> >::finalize() @ 0x187661cc in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.10.20 19:13:03.043947 [ 204 ] <Fatal> BaseDaemon: 23. /build/obj-x86_64-linux-gnu/../contrib/llvm/llvm/include/llvm/ExecutionEngine/Orc/RTDyldObjectLinkingLayer.h:276: llvm::orc::LegacyRTDyldObjectLinkingLayer::ConcreteLinkedObject<std::__1::shared_ptr<llvm::RuntimeDyld::MemoryManager> >::getSymbolMaterializer(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >)::'lambda'()::operator()() const @ 0x1876f527 in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.10.20 19:13:03.082138 [ 204 ] <Fatal> BaseDaemon: 24. /build/obj-x86_64-linux-gnu/../contrib/libcxx/include/type_traits:3519: decltype(std::__1::forward<std::__1::shared_ptr<llvm::RuntimeDyld::MemoryManager> >(fp)(std::__1::forward<llvm::orc::LegacyRTDyldObjectLinkingLayer::ConcreteLinkedObject<std::__1::shared_ptr<llvm::RuntimeDyld::MemoryManager> >::getSymbolMaterializer(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >)::'lambda'()&>(fp0)...)) std::__1::__invoke<llvm::orc::LegacyRTDyldObjectLinkingLayer::ConcreteLinkedObject<std::__1::shared_ptr<llvm::RuntimeDyld::MemoryManager> >::getSymbolMaterializer(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >)::'lambda'()&>(std::__1::shared_ptr<llvm::RuntimeDyld::MemoryManager>&&, llvm::orc::LegacyRTDyldObjectLinkingLayer::ConcreteLinkedObject<std::__1::shared_ptr<llvm::RuntimeDyld::MemoryManager> >::getSymbolMaterializer(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >)::'lambda'()&...) @ 0x1876f4a6 in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.10.20 19:13:03.120025 [ 204 ] <Fatal> BaseDaemon: 25. /build/obj-x86_64-linux-gnu/../contrib/libcxx/include/__functional_base:317: llvm::Expected<unsigned long> std::__1::__invoke_void_return_wrapper<llvm::Expected<unsigned long> >::__call<llvm::orc::LegacyRTDyldObjectLinkingLayer::ConcreteLinkedObject<std::__1::shared_ptr<llvm::RuntimeDyld::MemoryManager> >::getSymbolMaterializer(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >)::'lambda'()&>(std::__1::shared_ptr<llvm::RuntimeDyld::MemoryManager>&&...) @ 0x1876f446 in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.10.20 19:13:03.158488 [ 204 ] <Fatal> BaseDaemon: 26. /build/obj-x86_64-linux-gnu/../contrib/libcxx/include/functional:1540: std::__1::__function::__alloc_func<llvm::orc::LegacyRTDyldObjectLinkingLayer::ConcreteLinkedObject<std::__1::shared_ptr<llvm::RuntimeDyld::MemoryManager> >::getSymbolMaterializer(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >)::'lambda'(), std::__1::allocator<llvm::orc::LegacyRTDyldObjectLinkingLayer::ConcreteLinkedObject<std::__1::shared_ptr<llvm::RuntimeDyld::MemoryManager> >::getSymbolMaterializer(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >)::'lambda'()>, llvm::Expected<unsigned long> ()>::operator()() @ 0x1876f406 in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.10.20 19:13:03.195707 [ 204 ] <Fatal> BaseDaemon: 27. /build/obj-x86_64-linux-gnu/../contrib/libcxx/include/functional:1714: std::__1::__function::__func<llvm::orc::LegacyRTDyldObjectLinkingLayer::ConcreteLinkedObject<std::__1::shared_ptr<llvm::RuntimeDyld::MemoryManager> >::getSymbolMaterializer(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >)::'lambda'(), std::__1::allocator<llvm::orc::LegacyRTDyldObjectLinkingLayer::ConcreteLinkedObject<std::__1::shared_ptr<llvm::RuntimeDyld::MemoryManager> >::getSymbolMaterializer(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >)::'lambda'()>, llvm::Expected<unsigned long> ()>::operator()() @ 0x1876e5fd in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.10.20 19:13:03.234105 [ 204 ] <Fatal> BaseDaemon: 28. /build/obj-x86_64-linux-gnu/../contrib/libcxx/include/functional:1867: std::__1::__function::__value_func<llvm::Expected<unsigned long> ()>::operator()() const @ 0x187721fb in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.10.20 19:13:03.272256 [ 204 ] <Fatal> BaseDaemon: 29. /build/obj-x86_64-linux-gnu/../contrib/libcxx/include/functional:2473: std::__1::function<llvm::Expected<unsigned long> ()>::operator()() const @ 0x18771fc3 in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.10.20 19:13:03.309842 [ 204 ] <Fatal> BaseDaemon: 30. /build/obj-x86_64-linux-gnu/../contrib/llvm/llvm/include/llvm/ExecutionEngine/JITSymbol.h:297: llvm::JITSymbol::getAddress() @ 0x1876353b in /workspace/clickhouse
[linux-ubuntu-14-04-trusty] 2020.10.20 19:13:03.345994 [ 204 ] <Fatal> BaseDaemon: 31. /build/obj-x86_64-linux-gnu/../src/Interpreters/ExpressionJIT.cpp:241: DB::LLVMContext::compileAllFunctionsToNativeCode() @ 0x1874b614 in /workspace/clickhouse
```