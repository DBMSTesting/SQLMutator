ID: 6761
Title: Memory leak in "bitmap" functions
Description:
FunctionsBitmap.h:
> auto bd2 = new AggregateFunctionGroupBitmapData<T>();

**operator new** considered harmful.

```
=================================================================
==560==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 2904 byte(s) in 33 object(s) allocated from:
    #0 0x7547308 in operator new(unsigned long) /home/milovidov/ClickHouse/ci/workspace/llvm/llvm/projects/compiler-rt/lib/asan/asan_new_delete.cc:105
    #1 0x7e04a11 in void DB::FunctionBitmapSubsetInRange::executeIntType<unsigned short>(DB::Block&, std::__1::vector<unsigned long, std::__1::allocator<unsigned long> > const&, unsigned long, unsigned long) const (/opt/milovidov/ClickHouse/build_clang9_asan/dbms/programs/clickhouse+0x7e04a11)
    #2 0x7e017a3 in DB::FunctionBitmapSubsetInRange::executeImpl(DB::Block&, std::__1::vector<unsigned long, std::__1::allocator<unsigned long> > const&, unsigned long, unsigned long) (/opt/milovidov/ClickHouse/build_clang9_asan/dbms/programs/clickhouse+0x7e017a3)
    #3 0x135ea87e in DB::PreparedFunctionImpl::executeWithoutLowCardinalityColumns(DB::Block&, std::__1::vector<unsigned long, std::__1::allocator<unsigned long> > const&, unsigned long, unsigned long, bool) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Functions/IFunction.cpp:310:9
    #4 0x135ea87e in DB::PreparedFunctionImpl::defaultImplementationForConstantArguments(DB::Block&, std::__1::vector<unsigned long, std::__1::allocator<unsigned long> > const&, unsigned long, unsigned long, bool) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Functions/IFunction.cpp:259
    #5 0x135ee4c9 in DB::PreparedFunctionImpl::executeWithoutLowCardinalityColumns(DB::Block&, std::__1::vector<unsigned long, std::__1::allocator<unsigned long> > const&, unsigned long, unsigned long, bool) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Functions/IFunction.cpp:303:9
    #6 0x135ee4c9 in DB::PreparedFunctionImpl::execute(DB::Block&, std::__1::vector<unsigned long, std::__1::allocator<unsigned long> > const&, unsigned long, unsigned long, bool) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Functions/IFunction.cpp:463
    #7 0x11f27f56 in DB::ExpressionAction::prepare(DB::Block&, DB::Settings const&, std::__1::unordered_set<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::hash<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >, std::__1::equal_to<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ExpressionActions.cpp:225:27
    #8 0x11f44c02 in DB::ExpressionActions::addImpl(DB::ExpressionAction, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ExpressionActions.cpp:751:12
    #9 0x11f440d8 in DB::ExpressionActions::add(DB::ExpressionAction const&, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ExpressionActions.cpp:714:5
    #10 0x11eff439 in DB::ScopeStack::addAction(DB::ExpressionAction const&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ActionsVisitor.cpp:207:27
    #11 0x11f05f85 in DB::ActionsMatcher::Data::addAction(DB::ExpressionAction const&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ActionsVisitor.h:104:27
    #12 0x11f05f85 in DB::ActionsMatcher::visit(DB::ASTFunction const&, std::__1::shared_ptr<DB::IAST> const&, DB::ActionsMatcher::Data&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ActionsVisitor.cpp:524
    #13 0x11f02b3e in DB::ActionsMatcher::visit(std::__1::shared_ptr<DB::IAST> const&, DB::ActionsMatcher::Data&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ActionsVisitor.cpp:264:9
    #14 0x11f02b3e in DB::ActionsMatcher::visit(DB::ASTFunction const&, std::__1::shared_ptr<DB::IAST> const&, DB::ActionsMatcher::Data&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ActionsVisitor.cpp:436
    #15 0x11edfe33 in DB::InDepthNodeVisitorTemplate<DB::ActionsMatcher, true, std::__1::shared_ptr<DB::IAST> const>::visit(std::__1::shared_ptr<DB::IAST> const&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/InDepthNodeVisitor.h:32:9
    #16 0x11edfea9 in DB::InDepthNodeVisitorTemplate<DB::ActionsMatcher, true, std::__1::shared_ptr<DB::IAST> const>::visitChildren(std::__1::shared_ptr<DB::IAST> const&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/InDepthNodeVisitor.h:47:17
    #17 0x11edfea9 in DB::InDepthNodeVisitorTemplate<DB::ActionsMatcher, true, std::__1::shared_ptr<DB::IAST> const>::visit(std::__1::shared_ptr<DB::IAST> const&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/InDepthNodeVisitor.h:35
    #18 0x11ec57d4 in DB::ExpressionAnalyzer::getRootActions(std::__1::shared_ptr<DB::IAST> const&, bool, std::__1::shared_ptr<DB::ExpressionActions>&, bool) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ExpressionAnalyzer.cpp:322:48
    #19 0x11ed98ec in DB::SelectQueryExpressionAnalyzer::appendSelect(DB::ExpressionActionsChain&, bool) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ExpressionAnalyzer.cpp:739:5
    #20 0x11ff3883 in DB::InterpreterSelectQuery::analyzeExpressions(DB::ASTSelectQuery const&, DB::SelectQueryExpressionAnalyzer&, DB::QueryProcessingStage::Enum, DB::QueryProcessingStage::Enum, DB::Context const&, std::__1::shared_ptr<DB::IStorage> const&, bool, std::__1::shared_ptr<DB::FilterInfo> const&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/InterpreterSelectQuery.cpp:635:24
    #21 0x11fece15 in DB::InterpreterSelectQuery::getSampleBlockImpl() /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/InterpreterSelectQuery.cpp:421:28
    #22 0x11fe60d4 in DB::InterpreterSelectQuery::InterpreterSelectQuery(std::__1::shared_ptr<DB::IAST> const&, DB::Context const&, std::__1::shared_ptr<DB::IBlockInputStream> const&, std::__1::shared_ptr<DB::IStorage> const&, DB::SelectQueryOptions const&, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/InterpreterSelectQuery.cpp:350:21
    #23 0x11fe1d91 in DB::InterpreterSelectQuery::InterpreterSelectQuery(std::__1::shared_ptr<DB::IAST> const&, DB::Context const&, DB::SelectQueryOptions const&, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/InterpreterSelectQuery.cpp:164:7
    #24 0x123b19e2 in std::__1::__unique_if<DB::InterpreterSelectQuery>::__unique_single std::__1::make_unique<DB::InterpreterSelectQuery, std::__1::shared_ptr<DB::IAST>&, DB::Context&, DB::SelectQueryOptions const&, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&>(std::__1::shared_ptr<DB::IAST>&, DB::Context&, DB::SelectQueryOptions const&, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/memory:3131:32
    #25 0x123b19e2 in DB::InterpreterSelectWithUnionQuery::InterpreterSelectWithUnionQuery(std::__1::shared_ptr<DB::IAST> const&, DB::Context const&, DB::SelectQueryOptions const&, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/InterpreterSelectWithUnionQuery.cpp:88
    #26 0x11f854ae in std::__1::__unique_if<DB::InterpreterSelectWithUnionQuery>::__unique_single std::__1::make_unique<DB::InterpreterSelectWithUnionQuery, std::__1::shared_ptr<DB::IAST>&, DB::Context&, DB::SelectQueryOptions>(std::__1::shared_ptr<DB::IAST>&, DB::Context&, DB::SelectQueryOptions&&) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/memory:3131:32
    #27 0x11f854ae in DB::InterpreterFactory::get(std::__1::shared_ptr<DB::IAST>&, DB::Context&, DB::QueryProcessingStage::Enum) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/InterpreterFactory.cpp:94
    #28 0x12763e1a in DB::executeQueryImpl(char const*, char const*, DB::Context&, bool, DB::QueryProcessingStage::Enum, bool) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/executeQuery.cpp:241:28
    #29 0x127621d9 in DB::executeQuery(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, DB::Context&, bool, DB::QueryProcessingStage::Enum, bool) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/executeQuery.cpp:487:38
    #30 0x7774fd7 in DB::TCPHandler::runImpl() /home/milovidov/ClickHouse/build_clang9_asan/../dbms/programs/server/TCPHandler.cpp:210:24
    #31 0x77926a2 in DB::TCPHandler::run() /home/milovidov/ClickHouse/build_clang9_asan/../dbms/programs/server/TCPHandler.cpp:1083:9
    #32 0x13e6145e in Poco::Net::TCPServerConnection::start() /home/milovidov/ClickHouse/build_clang9_asan/../contrib/poco/Net/src/TCPServerConnection.cpp:43:3
    #33 0x13e620f8 in Poco::Net::TCPServerDispatcher::run() /home/milovidov/ClickHouse/build_clang9_asan/../contrib/poco/Net/src/TCPServerDispatcher.cpp:114:20
    #34 0x14d571c4 in Poco::PooledThread::run() /home/milovidov/ClickHouse/build_clang9_asan/../contrib/poco/Foundation/src/ThreadPool.cpp:214:14
    #35 0x14d51e4d in Poco::ThreadImpl::runnableEntry(void*) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/poco/Foundation/src/Thread_STD.cpp:139:27
    #36 0x14d5590d in decltype(std::__1::forward<void* (*)(void*)>(fp)(std::__1::forward<Poco::ThreadImpl*>(fp0))) std::__1::__invoke<void* (*)(void*), Poco::ThreadImpl*>(void* (*&&)(void*), Poco::ThreadImpl*&&) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/type_traits:4410:1
    #37 0x14d5590d in void std::__1::__thread_execute<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct> >, void* (*)(void*), Poco::ThreadImpl*, 2ul>(std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct> >, void* (*)(void*), Poco::ThreadImpl*>&, std::__1::__tuple_indices<2ul>) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/thread:341
    #38 0x14d5590d in void* std::__1::__thread_proxy<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct> >, void* (*)(void*), Poco::ThreadImpl*> >(void*) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/thread:351

Direct leak of 2904 byte(s) in 33 object(s) allocated from:
    #0 0x7547308 in operator new(unsigned long) /home/milovidov/ClickHouse/ci/workspace/llvm/llvm/projects/compiler-rt/lib/asan/asan_new_delete.cc:105
    #1 0x7e04a11 in void DB::FunctionBitmapSubsetInRange::executeIntType<unsigned short>(DB::Block&, std::__1::vector<unsigned long, std::__1::allocator<unsigned long> > const&, unsigned long, unsigned long) const (/opt/milovidov/ClickHouse/build_clang9_asan/dbms/programs/clickhouse+0x7e04a11)
    #2 0x7e017a3 in DB::FunctionBitmapSubsetInRange::executeImpl(DB::Block&, std::__1::vector<unsigned long, std::__1::allocator<unsigned long> > const&, unsigned long, unsigned long) (/opt/milovidov/ClickHouse/build_clang9_asan/dbms/programs/clickhouse+0x7e017a3)
    #3 0x135ea87e in DB::PreparedFunctionImpl::executeWithoutLowCardinalityColumns(DB::Block&, std::__1::vector<unsigned long, std::__1::allocator<unsigned long> > const&, unsigned long, unsigned long, bool) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Functions/IFunction.cpp:310:9
    #4 0x135ea87e in DB::PreparedFunctionImpl::defaultImplementationForConstantArguments(DB::Block&, std::__1::vector<unsigned long, std::__1::allocator<unsigned long> > const&, unsigned long, unsigned long, bool) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Functions/IFunction.cpp:259
    #5 0x135ee4c9 in DB::PreparedFunctionImpl::executeWithoutLowCardinalityColumns(DB::Block&, std::__1::vector<unsigned long, std::__1::allocator<unsigned long> > const&, unsigned long, unsigned long, bool) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Functions/IFunction.cpp:303:9
    #6 0x135ee4c9 in DB::PreparedFunctionImpl::execute(DB::Block&, std::__1::vector<unsigned long, std::__1::allocator<unsigned long> > const&, unsigned long, unsigned long, bool) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Functions/IFunction.cpp:463
    #7 0x11f27f56 in DB::ExpressionAction::prepare(DB::Block&, DB::Settings const&, std::__1::unordered_set<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::hash<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >, std::__1::equal_to<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ExpressionActions.cpp:225:27
    #8 0x11f44c02 in DB::ExpressionActions::addImpl(DB::ExpressionAction, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ExpressionActions.cpp:751:12
    #9 0x11f440d8 in DB::ExpressionActions::add(DB::ExpressionAction const&, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ExpressionActions.cpp:714:5
    #10 0x11eff439 in DB::ScopeStack::addAction(DB::ExpressionAction const&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ActionsVisitor.cpp:207:27
    #11 0x11f05f85 in DB::ActionsMatcher::Data::addAction(DB::ExpressionAction const&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ActionsVisitor.h:104:27
    #12 0x11f05f85 in DB::ActionsMatcher::visit(DB::ASTFunction const&, std::__1::shared_ptr<DB::IAST> const&, DB::ActionsMatcher::Data&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ActionsVisitor.cpp:524
    #13 0x11f02b3e in DB::ActionsMatcher::visit(std::__1::shared_ptr<DB::IAST> const&, DB::ActionsMatcher::Data&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ActionsVisitor.cpp:264:9
    #14 0x11f02b3e in DB::ActionsMatcher::visit(DB::ASTFunction const&, std::__1::shared_ptr<DB::IAST> const&, DB::ActionsMatcher::Data&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ActionsVisitor.cpp:436
    #15 0x11edfe33 in DB::InDepthNodeVisitorTemplate<DB::ActionsMatcher, true, std::__1::shared_ptr<DB::IAST> const>::visit(std::__1::shared_ptr<DB::IAST> const&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/InDepthNodeVisitor.h:32:9
    #16 0x11edfea9 in DB::InDepthNodeVisitorTemplate<DB::ActionsMatcher, true, std::__1::shared_ptr<DB::IAST> const>::visitChildren(std::__1::shared_ptr<DB::IAST> const&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/InDepthNodeVisitor.h:47:17
    #17 0x11edfea9 in DB::InDepthNodeVisitorTemplate<DB::ActionsMatcher, true, std::__1::shared_ptr<DB::IAST> const>::visit(std::__1::shared_ptr<DB::IAST> const&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/InDepthNodeVisitor.h:35
    #18 0x11ec57d4 in DB::ExpressionAnalyzer::getRootActions(std::__1::shared_ptr<DB::IAST> const&, bool, std::__1::shared_ptr<DB::ExpressionActions>&, bool) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ExpressionAnalyzer.cpp:322:48
    #19 0x11ed98ec in DB::SelectQueryExpressionAnalyzer::appendSelect(DB::ExpressionActionsChain&, bool) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ExpressionAnalyzer.cpp:739:5
    #20 0x11ff3883 in DB::InterpreterSelectQuery::analyzeExpressions(DB::ASTSelectQuery const&, DB::SelectQueryExpressionAnalyzer&, DB::QueryProcessingStage::Enum, DB::QueryProcessingStage::Enum, DB::Context const&, std::__1::shared_ptr<DB::IStorage> const&, bool, std::__1::shared_ptr<DB::FilterInfo> const&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/InterpreterSelectQuery.cpp:635:24
    #21 0x12021b3c in void DB::InterpreterSelectQuery::executeImpl<DB::InterpreterSelectQuery::Pipeline>(DB::InterpreterSelectQuery::Pipeline&, std::__1::shared_ptr<DB::IBlockInputStream> const&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/InterpreterSelectQuery.cpp:940:23
    #22 0x11ff0beb in DB::InterpreterSelectQuery::executeWithMultipleStreams() /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/InterpreterSelectQuery.cpp:400:5
    #23 0x123b607e in DB::InterpreterSelectWithUnionQuery::executeWithMultipleStreams() /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/InterpreterSelectWithUnionQuery.cpp:173:50
    #24 0x123b654f in DB::InterpreterSelectWithUnionQuery::execute() /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/InterpreterSelectWithUnionQuery.cpp:190:40
    #25 0x12763fff in DB::executeQueryImpl(char const*, char const*, DB::Context&, bool, DB::QueryProcessingStage::Enum, bool) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/executeQuery.cpp:247:32
    #26 0x127621d9 in DB::executeQuery(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, DB::Context&, bool, DB::QueryProcessingStage::Enum, bool) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/executeQuery.cpp:487:38
    #27 0x7774fd7 in DB::TCPHandler::runImpl() /home/milovidov/ClickHouse/build_clang9_asan/../dbms/programs/server/TCPHandler.cpp:210:24
    #28 0x77926a2 in DB::TCPHandler::run() /home/milovidov/ClickHouse/build_clang9_asan/../dbms/programs/server/TCPHandler.cpp:1083:9
    #29 0x13e6145e in Poco::Net::TCPServerConnection::start() /home/milovidov/ClickHouse/build_clang9_asan/../contrib/poco/Net/src/TCPServerConnection.cpp:43:3
    #30 0x13e620f8 in Poco::Net::TCPServerDispatcher::run() /home/milovidov/ClickHouse/build_clang9_asan/../contrib/poco/Net/src/TCPServerDispatcher.cpp:114:20
    #31 0x14d571c4 in Poco::PooledThread::run() /home/milovidov/ClickHouse/build_clang9_asan/../contrib/poco/Foundation/src/ThreadPool.cpp:214:14
    #32 0x14d51e4d in Poco::ThreadImpl::runnableEntry(void*) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/poco/Foundation/src/Thread_STD.cpp:139:27
    #33 0x14d5590d in decltype(std::__1::forward<void* (*)(void*)>(fp)(std::__1::forward<Poco::ThreadImpl*>(fp0))) std::__1::__invoke<void* (*)(void*), Poco::ThreadImpl*>(void* (*&&)(void*), Poco::ThreadImpl*&&) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/type_traits:4410:1
    #34 0x14d5590d in void std::__1::__thread_execute<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct> >, void* (*)(void*), Poco::ThreadImpl*, 2ul>(std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct> >, void* (*)(void*), Poco::ThreadImpl*>&, std::__1::__tuple_indices<2ul>) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/thread:341
    #35 0x14d5590d in void* std::__1::__thread_proxy<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct> >, void* (*)(void*), Poco::ThreadImpl*> >(void*) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/thread:351
    #36 0x7fc0e72e86da in start_thread (/lib/x86_64-linux-gnu/libpthread.so.0+0x76da)

Direct leak of 1848 byte(s) in 33 object(s) allocated from:
    #0 0x7547308 in operator new(unsigned long) /home/milovidov/ClickHouse/ci/workspace/llvm/llvm/projects/compiler-rt/lib/asan/asan_new_delete.cc:105
    #1 0x7e03671 in void DB::FunctionBitmapSubsetInRange::executeIntType<unsigned char>(DB::Block&, std::__1::vector<unsigned long, std::__1::allocator<unsigned long> > const&, unsigned long, unsigned long) const (/opt/milovidov/ClickHouse/build_clang9_asan/dbms/programs/clickhouse+0x7e03671)
    #2 0x7e016e1 in DB::FunctionBitmapSubsetInRange::executeImpl(DB::Block&, std::__1::vector<unsigned long, std::__1::allocator<unsigned long> > const&, unsigned long, unsigned long) (/opt/milovidov/ClickHouse/build_clang9_asan/dbms/programs/clickhouse+0x7e016e1)
    #3 0x135ea87e in DB::PreparedFunctionImpl::executeWithoutLowCardinalityColumns(DB::Block&, std::__1::vector<unsigned long, std::__1::allocator<unsigned long> > const&, unsigned long, unsigned long, bool) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Functions/IFunction.cpp:310:9
    #4 0x135ea87e in DB::PreparedFunctionImpl::defaultImplementationForConstantArguments(DB::Block&, std::__1::vector<unsigned long, std::__1::allocator<unsigned long> > const&, unsigned long, unsigned long, bool) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Functions/IFunction.cpp:259
    #5 0x135ee4c9 in DB::PreparedFunctionImpl::executeWithoutLowCardinalityColumns(DB::Block&, std::__1::vector<unsigned long, std::__1::allocator<unsigned long> > const&, unsigned long, unsigned long, bool) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Functions/IFunction.cpp:303:9
    #6 0x135ee4c9 in DB::PreparedFunctionImpl::execute(DB::Block&, std::__1::vector<unsigned long, std::__1::allocator<unsigned long> > const&, unsigned long, unsigned long, bool) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Functions/IFunction.cpp:463
    #7 0x11f27f56 in DB::ExpressionAction::prepare(DB::Block&, DB::Settings const&, std::__1::unordered_set<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::hash<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >, std::__1::equal_to<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ExpressionActions.cpp:225:27
    #8 0x11f44c02 in DB::ExpressionActions::addImpl(DB::ExpressionAction, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ExpressionActions.cpp:751:12
    #9 0x11f440d8 in DB::ExpressionActions::add(DB::ExpressionAction const&, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ExpressionActions.cpp:714:5
    #10 0x11eff439 in DB::ScopeStack::addAction(DB::ExpressionAction const&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ActionsVisitor.cpp:207:27
    #11 0x11f05f85 in DB::ActionsMatcher::Data::addAction(DB::ExpressionAction const&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ActionsVisitor.h:104:27
    #12 0x11f05f85 in DB::ActionsMatcher::visit(DB::ASTFunction const&, std::__1::shared_ptr<DB::IAST> const&, DB::ActionsMatcher::Data&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ActionsVisitor.cpp:524
    #13 0x11f02b3e in DB::ActionsMatcher::visit(std::__1::shared_ptr<DB::IAST> const&, DB::ActionsMatcher::Data&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ActionsVisitor.cpp:264:9
    #14 0x11f02b3e in DB::ActionsMatcher::visit(DB::ASTFunction const&, std::__1::shared_ptr<DB::IAST> const&, DB::ActionsMatcher::Data&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ActionsVisitor.cpp:436
    #15 0x11edfe33 in DB::InDepthNodeVisitorTemplate<DB::ActionsMatcher, true, std::__1::shared_ptr<DB::IAST> const>::visit(std::__1::shared_ptr<DB::IAST> const&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/InDepthNodeVisitor.h:32:9
    #16 0x11edfea9 in DB::InDepthNodeVisitorTemplate<DB::ActionsMatcher, true, std::__1::shared_ptr<DB::IAST> const>::visitChildren(std::__1::shared_ptr<DB::IAST> const&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/InDepthNodeVisitor.h:47:17
    #17 0x11edfea9 in DB::InDepthNodeVisitorTemplate<DB::ActionsMatcher, true, std::__1::shared_ptr<DB::IAST> const>::visit(std::__1::shared_ptr<DB::IAST> const&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/InDepthNodeVisitor.h:35
    #18 0x11ec57d4 in DB::ExpressionAnalyzer::getRootActions(std::__1::shared_ptr<DB::IAST> const&, bool, std::__1::shared_ptr<DB::ExpressionActions>&, bool) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ExpressionAnalyzer.cpp:322:48
    #19 0x11ed98ec in DB::SelectQueryExpressionAnalyzer::appendSelect(DB::ExpressionActionsChain&, bool) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ExpressionAnalyzer.cpp:739:5
    #20 0x11ff3883 in DB::InterpreterSelectQuery::analyzeExpressions(DB::ASTSelectQuery const&, DB::SelectQueryExpressionAnalyzer&, DB::QueryProcessingStage::Enum, DB::QueryProcessingStage::Enum, DB::Context const&, std::__1::shared_ptr<DB::IStorage> const&, bool, std::__1::shared_ptr<DB::FilterInfo> const&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/InterpreterSelectQuery.cpp:635:24
    #21 0x11fece15 in DB::InterpreterSelectQuery::getSampleBlockImpl() /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/InterpreterSelectQuery.cpp:421:28
    #22 0x11fe60d4 in DB::InterpreterSelectQuery::InterpreterSelectQuery(std::__1::shared_ptr<DB::IAST> const&, DB::Context const&, std::__1::shared_ptr<DB::IBlockInputStream> const&, std::__1::shared_ptr<DB::IStorage> const&, DB::SelectQueryOptions const&, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/InterpreterSelectQuery.cpp:350:21
    #23 0x11fe1d91 in DB::InterpreterSelectQuery::InterpreterSelectQuery(std::__1::shared_ptr<DB::IAST> const&, DB::Context const&, DB::SelectQueryOptions const&, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/InterpreterSelectQuery.cpp:164:7
    #24 0x123b19e2 in std::__1::__unique_if<DB::InterpreterSelectQuery>::__unique_single std::__1::make_unique<DB::InterpreterSelectQuery, std::__1::shared_ptr<DB::IAST>&, DB::Context&, DB::SelectQueryOptions const&, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&>(std::__1::shared_ptr<DB::IAST>&, DB::Context&, DB::SelectQueryOptions const&, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/memory:3131:32
    #25 0x123b19e2 in DB::InterpreterSelectWithUnionQuery::InterpreterSelectWithUnionQuery(std::__1::shared_ptr<DB::IAST> const&, DB::Context const&, DB::SelectQueryOptions const&, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/InterpreterSelectWithUnionQuery.cpp:88
    #26 0x11f854ae in std::__1::__unique_if<DB::InterpreterSelectWithUnionQuery>::__unique_single std::__1::make_unique<DB::InterpreterSelectWithUnionQuery, std::__1::shared_ptr<DB::IAST>&, DB::Context&, DB::SelectQueryOptions>(std::__1::shared_ptr<DB::IAST>&, DB::Context&, DB::SelectQueryOptions&&) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/memory:3131:32
    #27 0x11f854ae in DB::InterpreterFactory::get(std::__1::shared_ptr<DB::IAST>&, DB::Context&, DB::QueryProcessingStage::Enum) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/InterpreterFactory.cpp:94
    #28 0x12763e1a in DB::executeQueryImpl(char const*, char const*, DB::Context&, bool, DB::QueryProcessingStage::Enum, bool) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/executeQuery.cpp:241:28
    #29 0x127621d9 in DB::executeQuery(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, DB::Context&, bool, DB::QueryProcessingStage::Enum, bool) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/executeQuery.cpp:487:38
    #30 0x7774fd7 in DB::TCPHandler::runImpl() /home/milovidov/ClickHouse/build_clang9_asan/../dbms/programs/server/TCPHandler.cpp:210:24
    #31 0x77926a2 in DB::TCPHandler::run() /home/milovidov/ClickHouse/build_clang9_asan/../dbms/programs/server/TCPHandler.cpp:1083:9
    #32 0x13e6145e in Poco::Net::TCPServerConnection::start() /home/milovidov/ClickHouse/build_clang9_asan/../contrib/poco/Net/src/TCPServerConnection.cpp:43:3
    #33 0x13e620f8 in Poco::Net::TCPServerDispatcher::run() /home/milovidov/ClickHouse/build_clang9_asan/../contrib/poco/Net/src/TCPServerDispatcher.cpp:114:20
    #34 0x14d571c4 in Poco::PooledThread::run() /home/milovidov/ClickHouse/build_clang9_asan/../contrib/poco/Foundation/src/ThreadPool.cpp:214:14
    #35 0x14d51e4d in Poco::ThreadImpl::runnableEntry(void*) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/poco/Foundation/src/Thread_STD.cpp:139:27
    #36 0x14d5590d in decltype(std::__1::forward<void* (*)(void*)>(fp)(std::__1::forward<Poco::ThreadImpl*>(fp0))) std::__1::__invoke<void* (*)(void*), Poco::ThreadImpl*>(void* (*&&)(void*), Poco::ThreadImpl*&&) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/type_traits:4410:1
    #37 0x14d5590d in void std::__1::__thread_execute<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct> >, void* (*)(void*), Poco::ThreadImpl*, 2ul>(std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct> >, void* (*)(void*), Poco::ThreadImpl*>&, std::__1::__tuple_indices<2ul>) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/thread:341
    #38 0x14d5590d in void* std::__1::__thread_proxy<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct> >, void* (*)(void*), Poco::ThreadImpl*> >(void*) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/thread:351

Direct leak of 1848 byte(s) in 33 object(s) allocated from:
    #0 0x7547308 in operator new(unsigned long) /home/milovidov/ClickHouse/ci/workspace/llvm/llvm/projects/compiler-rt/lib/asan/asan_new_delete.cc:105
    #1 0x7e03671 in void DB::FunctionBitmapSubsetInRange::executeIntType<unsigned char>(DB::Block&, std::__1::vector<unsigned long, std::__1::allocator<unsigned long> > const&, unsigned long, unsigned long) const (/opt/milovidov/ClickHouse/build_clang9_asan/dbms/programs/clickhouse+0x7e03671)
    #2 0x7e016e1 in DB::FunctionBitmapSubsetInRange::executeImpl(DB::Block&, std::__1::vector<unsigned long, std::__1::allocator<unsigned long> > const&, unsigned long, unsigned long) (/opt/milovidov/ClickHouse/build_clang9_asan/dbms/programs/clickhouse+0x7e016e1)
    #3 0x135ea87e in DB::PreparedFunctionImpl::executeWithoutLowCardinalityColumns(DB::Block&, std::__1::vector<unsigned long, std::__1::allocator<unsigned long> > const&, unsigned long, unsigned long, bool) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Functions/IFunction.cpp:310:9
    #4 0x135ea87e in DB::PreparedFunctionImpl::defaultImplementationForConstantArguments(DB::Block&, std::__1::vector<unsigned long, std::__1::allocator<unsigned long> > const&, unsigned long, unsigned long, bool) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Functions/IFunction.cpp:259
    #5 0x135ee4c9 in DB::PreparedFunctionImpl::executeWithoutLowCardinalityColumns(DB::Block&, std::__1::vector<unsigned long, std::__1::allocator<unsigned long> > const&, unsigned long, unsigned long, bool) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Functions/IFunction.cpp:303:9
    #6 0x135ee4c9 in DB::PreparedFunctionImpl::execute(DB::Block&, std::__1::vector<unsigned long, std::__1::allocator<unsigned long> > const&, unsigned long, unsigned long, bool) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Functions/IFunction.cpp:463
    #7 0x11f27f56 in DB::ExpressionAction::prepare(DB::Block&, DB::Settings const&, std::__1::unordered_set<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::hash<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >, std::__1::equal_to<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ExpressionActions.cpp:225:27
    #8 0x11f44c02 in DB::ExpressionActions::addImpl(DB::ExpressionAction, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ExpressionActions.cpp:751:12
    #9 0x11f440d8 in DB::ExpressionActions::add(DB::ExpressionAction const&, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ExpressionActions.cpp:714:5
    #10 0x11eff439 in DB::ScopeStack::addAction(DB::ExpressionAction const&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ActionsVisitor.cpp:207:27
    #11 0x11f05f85 in DB::ActionsMatcher::Data::addAction(DB::ExpressionAction const&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ActionsVisitor.h:104:27
    #12 0x11f05f85 in DB::ActionsMatcher::visit(DB::ASTFunction const&, std::__1::shared_ptr<DB::IAST> const&, DB::ActionsMatcher::Data&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ActionsVisitor.cpp:524
    #13 0x11f02b3e in DB::ActionsMatcher::visit(std::__1::shared_ptr<DB::IAST> const&, DB::ActionsMatcher::Data&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ActionsVisitor.cpp:264:9
    #14 0x11f02b3e in DB::ActionsMatcher::visit(DB::ASTFunction const&, std::__1::shared_ptr<DB::IAST> const&, DB::ActionsMatcher::Data&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ActionsVisitor.cpp:436
    #15 0x11edfe33 in DB::InDepthNodeVisitorTemplate<DB::ActionsMatcher, true, std::__1::shared_ptr<DB::IAST> const>::visit(std::__1::shared_ptr<DB::IAST> const&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/InDepthNodeVisitor.h:32:9
    #16 0x11edfea9 in DB::InDepthNodeVisitorTemplate<DB::ActionsMatcher, true, std::__1::shared_ptr<DB::IAST> const>::visitChildren(std::__1::shared_ptr<DB::IAST> const&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/InDepthNodeVisitor.h:47:17
    #17 0x11edfea9 in DB::InDepthNodeVisitorTemplate<DB::ActionsMatcher, true, std::__1::shared_ptr<DB::IAST> const>::visit(std::__1::shared_ptr<DB::IAST> const&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/InDepthNodeVisitor.h:35
    #18 0x11ec57d4 in DB::ExpressionAnalyzer::getRootActions(std::__1::shared_ptr<DB::IAST> const&, bool, std::__1::shared_ptr<DB::ExpressionActions>&, bool) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ExpressionAnalyzer.cpp:322:48
    #19 0x11ed98ec in DB::SelectQueryExpressionAnalyzer::appendSelect(DB::ExpressionActionsChain&, bool) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ExpressionAnalyzer.cpp:739:5
    #20 0x11ff3883 in DB::InterpreterSelectQuery::analyzeExpressions(DB::ASTSelectQuery const&, DB::SelectQueryExpressionAnalyzer&, DB::QueryProcessingStage::Enum, DB::QueryProcessingStage::Enum, DB::Context const&, std::__1::shared_ptr<DB::IStorage> const&, bool, std::__1::shared_ptr<DB::FilterInfo> const&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/InterpreterSelectQuery.cpp:635:24
    #21 0x12021b3c in void DB::InterpreterSelectQuery::executeImpl<DB::InterpreterSelectQuery::Pipeline>(DB::InterpreterSelectQuery::Pipeline&, std::__1::shared_ptr<DB::IBlockInputStream> const&) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/InterpreterSelectQuery.cpp:940:23
    #22 0x11ff0beb in DB::InterpreterSelectQuery::executeWithMultipleStreams() /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/InterpreterSelectQuery.cpp:400:5
    #23 0x123b607e in DB::InterpreterSelectWithUnionQuery::executeWithMultipleStreams() /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/InterpreterSelectWithUnionQuery.cpp:173:50
    #24 0x123b654f in DB::InterpreterSelectWithUnionQuery::execute() /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/InterpreterSelectWithUnionQuery.cpp:190:40
    #25 0x12763fff in DB::executeQueryImpl(char const*, char const*, DB::Context&, bool, DB::QueryProcessingStage::Enum, bool) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/executeQuery.cpp:247:32
    #26 0x127621d9 in DB::executeQuery(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, DB::Context&, bool, DB::QueryProcessingStage::Enum, bool) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/executeQuery.cpp:487:38
    #27 0x7774fd7 in DB::TCPHandler::runImpl() /home/milovidov/ClickHouse/build_clang9_asan/../dbms/programs/server/TCPHandler.cpp:210:24
    #28 0x77926a2 in DB::TCPHandler::run() /home/milovidov/ClickHouse/build_clang9_asan/../dbms/programs/server/TCPHandler.cpp:1083:9
    #29 0x13e6145e in Poco::Net::TCPServerConnection::start() /home/milovidov/ClickHouse/build_clang9_asan/../contrib/poco/Net/src/TCPServerConnection.cpp:43:3
    #30 0x13e620f8 in Poco::Net::TCPServerDispatcher::run() /home/milovidov/ClickHouse/build_clang9_asan/../contrib/poco/Net/src/TCPServerDispatcher.cpp:114:20
    #31 0x14d571c4 in Poco::PooledThread::run() /home/milovidov/ClickHouse/build_clang9_asan/../contrib/poco/Foundation/src/ThreadPool.cpp:214:14
    #32 0x14d51e4d in Poco::ThreadImpl::runnableEntry(void*) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/poco/Foundation/src/Thread_STD.cpp:139:27
    #33 0x14d5590d in decltype(std::__1::forward<void* (*)(void*)>(fp)(std::__1::forward<Poco::ThreadImpl*>(fp0))) std::__1::__invoke<void* (*)(void*), Poco::ThreadImpl*>(void* (*&&)(void*), Poco::ThreadImpl*&&) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/type_traits:4410:1
    #34 0x14d5590d in void std::__1::__thread_execute<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct> >, void* (*)(void*), Poco::ThreadImpl*, 2ul>(std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct> >, void* (*)(void*), Poco::ThreadImpl*>&, std::__1::__tuple_indices<2ul>) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/thread:341
    #35 0x14d5590d in void* std::__1::__thread_proxy<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct> >, void* (*)(void*), Poco::ThreadImpl*> >(void*) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/thread:351
    #36 0x7fc0e72e86da in start_thread (/lib/x86_64-linux-gnu/libpthread.so.0+0x76da)

Direct leak of 1672 byte(s) in 11 object(s) allocated from:
    #0 0x7547308 in operator new(unsigned long) /home/milovidov/ClickHouse/ci/workspace/llvm/llvm/projects/compiler-rt/lib/asan/asan_new_delete.cc:105
    #1 0x7e055d7 in void DB::FunctionBitmapSubsetInRange::executeIntType<unsigned int>(DB::Block&, std::__1::vector<unsigned long, std::__1::allocator<unsigned long> > const&, unsigned long, unsigned long) const (/opt/milovidov/ClickHouse/build_clang9_asan/dbms/programs/clickhouse+0x7e055d7)
    #2 0x7e0171a in DB::FunctionBitmapSubsetInRange::executeImpl(DB::Block&, std::__1::vector<unsigned long, std::__1::allocator<unsigned long> > const&, unsigned long, unsigned long) (/opt/milovidov/ClickHouse/build_clang9_asan/dbms/programs/clickhouse+0x7e0171a)
    #3 0x135f0725 in DB::PreparedFunctionImpl::executeWithoutLowCardinalityColumns(DB::Block&, std::__1::vector<unsigned long, std::__1::allocator<unsigned long> > const&, unsigned long, unsigned long, bool) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Functions/IFunction.cpp:312:9
    #4 0x135f0725 in DB::PreparedFunctionImpl::execute(DB::Block&, std::__1::vector<unsigned long, std::__1::allocator<unsigned long> > const&, unsigned long, unsigned long, bool) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Functions/IFunction.cpp:463
    #5 0x11f2d575 in DB::ExpressionAction::execute(DB::Block&, bool) const /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ExpressionActions.cpp:429:23
    #6 0x11f4811d in DB::ExpressionActions::execute(DB::Block&, bool) const /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ExpressionActions.cpp:809:16
    #7 0x12350631 in DB::ExpressionBlockInputStream::readImpl() /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/DataStreams/ExpressionBlockInputStream.cpp:35:21
    #8 0x11a8eb79 in DB::IBlockInputStream::read() /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/DataStreams/IBlockInputStream.cpp:56:15
    #9 0x123505dd in DB::ExpressionBlockInputStream::readImpl() /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/DataStreams/ExpressionBlockInputStream.cpp:33:34
    #10 0x11a8eb79 in DB::IBlockInputStream::read() /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/DataStreams/IBlockInputStream.cpp:56:15
    #11 0x11a89e79 in DB::AsynchronousBlockInputStream::calculate() /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/DataStreams/AsynchronousBlockInputStream.cpp:74:34
    #12 0x11a8ae46 in DB::AsynchronousBlockInputStream::next()::$_0::operator()() const /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/DataStreams/AsynchronousBlockInputStream.cpp:59:9
    #13 0x11a8ae46 in decltype(std::__1::forward<DB::AsynchronousBlockInputStream::next()::$_0&>(fp)()) std::__1::__invoke<DB::AsynchronousBlockInputStream::next()::$_0&>(DB::AsynchronousBlockInputStream::next()::$_0&) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/type_traits:4410
    #14 0x11a8ae46 in void std::__1::__invoke_void_return_wrapper<void>::__call<DB::AsynchronousBlockInputStream::next()::$_0&>(DB::AsynchronousBlockInputStream::next()::$_0&) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/__functional_base:348
    #15 0x11a8ae46 in std::__1::__function::__alloc_func<DB::AsynchronousBlockInputStream::next()::$_0, std::__1::allocator<DB::AsynchronousBlockInputStream::next()::$_0>, void ()>::operator()() /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/functional:1527
    #16 0x11a8ae46 in std::__1::__function::__func<DB::AsynchronousBlockInputStream::next()::$_0, std::__1::allocator<DB::AsynchronousBlockInputStream::next()::$_0>, void ()>::operator()() /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/functional:1651
    #17 0x768da66 in std::__1::__function::__value_func<void ()>::operator()() const /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/functional:1799:16
    #18 0x768da66 in std::__1::function<void ()>::operator()() const /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/functional:2347
    #19 0x768da66 in ThreadPoolImpl<ThreadFromGlobalPool>::worker(std::__1::__list_iterator<ThreadFromGlobalPool, void*>) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Common/ThreadPool.cpp:221
    #20 0x7696226 in void ThreadPoolImpl<ThreadFromGlobalPool>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda1'()::operator()() const /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Common/ThreadPool.cpp:102:73
    #21 0x7696226 in decltype(std::__1::forward<void>(fp)()) std::__1::__invoke_constexpr<void ThreadPoolImpl<ThreadFromGlobalPool>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda1'() const&>(void&&) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/type_traits:4416
    #22 0x7696226 in decltype(auto) std::__1::__apply_tuple_impl<void ThreadPoolImpl<ThreadFromGlobalPool>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda1'() const&, std::__1::tuple<> const&>(void&&, std::__1::tuple<> const&, std::__1::__tuple_indices<>) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/tuple:1358
    #23 0x7696226 in decltype(auto) std::__1::apply<void ThreadPoolImpl<ThreadFromGlobalPool>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda1'() const&, std::__1::tuple<> const&>(void&&, std::__1::tuple<> const&) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/tuple:1367
    #24 0x7696226 in ThreadFromGlobalPool::ThreadFromGlobalPool<void ThreadPoolImpl<ThreadFromGlobalPool>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda1'()>(void&&)::'lambda'()::operator()() const /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Common/ThreadPool.h:151
    #25 0x7696226 in decltype(std::__1::forward<void>(fp)()) std::__1::__invoke<ThreadFromGlobalPool::ThreadFromGlobalPool<void ThreadPoolImpl<ThreadFromGlobalPool>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda1'()>(void&&)::'lambda'()&>(void&&) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/type_traits:4410
    #26 0x7696226 in void std::__1::__invoke_void_return_wrapper<void>::__call<ThreadFromGlobalPool::ThreadFromGlobalPool<void ThreadPoolImpl<ThreadFromGlobalPool>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda1'()>(void&&)::'lambda'()&>(ThreadFromGlobalPool::ThreadFromGlobalPool<void ThreadPoolImpl<ThreadFromGlobalPool>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda1'()>(void&&)::'lambda'()&) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/__functional_base:348
    #27 0x7696226 in std::__1::__function::__alloc_func<ThreadFromGlobalPool::ThreadFromGlobalPool<void ThreadPoolImpl<ThreadFromGlobalPool>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda1'()>(void&&)::'lambda'(), std::__1::allocator<ThreadFromGlobalPool::ThreadFromGlobalPool<void ThreadPoolImpl<ThreadFromGlobalPool>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda1'()>(void&&)::'lambda'()>, void ()>::operator()() /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/functional:1527
    #28 0x7696226 in std::__1::__function::__func<ThreadFromGlobalPool::ThreadFromGlobalPool<void ThreadPoolImpl<ThreadFromGlobalPool>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda1'()>(void&&)::'lambda'(), std::__1::allocator<ThreadFromGlobalPool::ThreadFromGlobalPool<void ThreadPoolImpl<ThreadFromGlobalPool>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda1'()>(void&&)::'lambda'()>, void ()>::operator()() /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/functional:1651
    #29 0x7688f23 in std::__1::__function::__value_func<void ()>::operator()() const /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/functional:1799:16
    #30 0x7688f23 in std::__1::function<void ()>::operator()() const /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/functional:2347
    #31 0x7688f23 in ThreadPoolImpl<std::__1::thread>::worker(std::__1::__list_iterator<std::__1::thread, void*>) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Common/ThreadPool.cpp:221
    #32 0x7691257 in void ThreadPoolImpl<std::__1::thread>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda1'()::operator()() const /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Common/ThreadPool.cpp:102:73
    #33 0x7691257 in decltype(std::__1::forward<void>(fp)()) std::__1::__invoke<void ThreadPoolImpl<std::__1::thread>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda1'()>(void&&) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/type_traits:4410
    #34 0x7691257 in void std::__1::__thread_execute<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct> >, void ThreadPoolImpl<std::__1::thread>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda1'()>(std::__1::tuple<void, void ThreadPoolImpl<std::__1::thread>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda1'()>&, std::__1::__tuple_indices<>) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/thread:341
    #35 0x7691257 in void* std::__1::__thread_proxy<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct> >, void ThreadPoolImpl<std::__1::thread>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda1'()> >(void*) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/thread:351
    #36 0x7fc0e72e86da in start_thread (/lib/x86_64-linux-gnu/libpthread.so.0+0x76da)

Direct leak of 1409 byte(s) in 39 object(s) allocated from:
    #0 0x7505c5d in __interceptor_posix_memalign /home/milovidov/ClickHouse/ci/workspace/llvm/llvm/projects/compiler-rt/lib/asan/asan_malloc_linux.cc:218
    #1 0xce73603 in simdjson::aligned_malloc(unsigned long, unsigned long) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/simdjson/include/simdjson/portability.h:156:7
    #2 0xce73603 in simdjson::aligned_malloc_char(unsigned long, unsigned long) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/simdjson/include/simdjson/portability.h:164
    #3 0xce73603 in simdjson::allocate_padded_buffer(unsigned long) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/simdjson/src/jsonioutil.cpp:11
    #4 0xce734c8 in int simdjson::json_parse_implementation<(simdjson::Architecture)0>(unsigned char const*, unsigned long, simdjson::ParsedJson&, bool) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/simdjson/include/simdjson/jsonparser.h:27:24
    #5 0x7b12402 in DB::FunctionJSON<DB::NameJSONLength, DB::JSONLengthImpl>::Executor<DB::SimdJSONParser>::run(DB::Block&, std::__1::vector<unsigned long, std::__1::allocator<unsigned long> > const&, unsigned long, unsigned long) (/opt/milovidov/ClickHouse/build_clang9_asan/dbms/programs/clickhouse+0x7b12402)
    #6 0x7b111ac in DB::FunctionJSON<DB::NameJSONLength, DB::JSONLengthImpl>::executeImpl(DB::Block&, std::__1::vector<unsigned long, std::__1::allocator<unsigned long> > const&, unsigned long, unsigned long) (/opt/milovidov/ClickHouse/build_clang9_asan/dbms/programs/clickhouse+0x7b111ac)
    #7 0x135f0725 in DB::PreparedFunctionImpl::executeWithoutLowCardinalityColumns(DB::Block&, std::__1::vector<unsigned long, std::__1::allocator<unsigned long> > const&, unsigned long, unsigned long, bool) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Functions/IFunction.cpp:312:9
    #8 0x135f0725 in DB::PreparedFunctionImpl::execute(DB::Block&, std::__1::vector<unsigned long, std::__1::allocator<unsigned long> > const&, unsigned long, unsigned long, bool) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Functions/IFunction.cpp:463
    #9 0x11f2d575 in DB::ExpressionAction::execute(DB::Block&, bool) const /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ExpressionActions.cpp:429:23
    #10 0x11f4811d in DB::ExpressionActions::execute(DB::Block&, bool) const /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Interpreters/ExpressionActions.cpp:809:16
    #11 0x12350631 in DB::ExpressionBlockInputStream::readImpl() /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/DataStreams/ExpressionBlockInputStream.cpp:35:21
    #12 0x11a8eb79 in DB::IBlockInputStream::read() /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/DataStreams/IBlockInputStream.cpp:56:15
    #13 0x123505dd in DB::ExpressionBlockInputStream::readImpl() /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/DataStreams/ExpressionBlockInputStream.cpp:33:34
    #14 0x11a8eb79 in DB::IBlockInputStream::read() /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/DataStreams/IBlockInputStream.cpp:56:15
    #15 0x11a89e79 in DB::AsynchronousBlockInputStream::calculate() /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/DataStreams/AsynchronousBlockInputStream.cpp:74:34
    #16 0x11a8ae46 in DB::AsynchronousBlockInputStream::next()::$_0::operator()() const /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/DataStreams/AsynchronousBlockInputStream.cpp:59:9
    #17 0x11a8ae46 in decltype(std::__1::forward<DB::AsynchronousBlockInputStream::next()::$_0&>(fp)()) std::__1::__invoke<DB::AsynchronousBlockInputStream::next()::$_0&>(DB::AsynchronousBlockInputStream::next()::$_0&) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/type_traits:4410
    #18 0x11a8ae46 in void std::__1::__invoke_void_return_wrapper<void>::__call<DB::AsynchronousBlockInputStream::next()::$_0&>(DB::AsynchronousBlockInputStream::next()::$_0&) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/__functional_base:348
    #19 0x11a8ae46 in std::__1::__function::__alloc_func<DB::AsynchronousBlockInputStream::next()::$_0, std::__1::allocator<DB::AsynchronousBlockInputStream::next()::$_0>, void ()>::operator()() /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/functional:1527
    #20 0x11a8ae46 in std::__1::__function::__func<DB::AsynchronousBlockInputStream::next()::$_0, std::__1::allocator<DB::AsynchronousBlockInputStream::next()::$_0>, void ()>::operator()() /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/functional:1651
    #21 0x768da66 in std::__1::__function::__value_func<void ()>::operator()() const /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/functional:1799:16
    #22 0x768da66 in std::__1::function<void ()>::operator()() const /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/functional:2347
    #23 0x768da66 in ThreadPoolImpl<ThreadFromGlobalPool>::worker(std::__1::__list_iterator<ThreadFromGlobalPool, void*>) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Common/ThreadPool.cpp:221
    #24 0x7696226 in void ThreadPoolImpl<ThreadFromGlobalPool>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda1'()::operator()() const /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Common/ThreadPool.cpp:102:73
    #25 0x7696226 in decltype(std::__1::forward<void>(fp)()) std::__1::__invoke_constexpr<void ThreadPoolImpl<ThreadFromGlobalPool>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda1'() const&>(void&&) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/type_traits:4416
    #26 0x7696226 in decltype(auto) std::__1::__apply_tuple_impl<void ThreadPoolImpl<ThreadFromGlobalPool>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda1'() const&, std::__1::tuple<> const&>(void&&, std::__1::tuple<> const&, std::__1::__tuple_indices<>) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/tuple:1358
    #27 0x7696226 in decltype(auto) std::__1::apply<void ThreadPoolImpl<ThreadFromGlobalPool>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda1'() const&, std::__1::tuple<> const&>(void&&, std::__1::tuple<> const&) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/tuple:1367
    #28 0x7696226 in ThreadFromGlobalPool::ThreadFromGlobalPool<void ThreadPoolImpl<ThreadFromGlobalPool>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda1'()>(void&&)::'lambda'()::operator()() const /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Common/ThreadPool.h:151
    #29 0x7696226 in decltype(std::__1::forward<void>(fp)()) std::__1::__invoke<ThreadFromGlobalPool::ThreadFromGlobalPool<void ThreadPoolImpl<ThreadFromGlobalPool>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda1'()>(void&&)::'lambda'()&>(void&&) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/type_traits:4410
    #30 0x7696226 in void std::__1::__invoke_void_return_wrapper<void>::__call<ThreadFromGlobalPool::ThreadFromGlobalPool<void ThreadPoolImpl<ThreadFromGlobalPool>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda1'()>(void&&)::'lambda'()&>(ThreadFromGlobalPool::ThreadFromGlobalPool<void ThreadPoolImpl<ThreadFromGlobalPool>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda1'()>(void&&)::'lambda'()&) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/__functional_base:348
    #31 0x7696226 in std::__1::__function::__alloc_func<ThreadFromGlobalPool::ThreadFromGlobalPool<void ThreadPoolImpl<ThreadFromGlobalPool>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda1'()>(void&&)::'lambda'(), std::__1::allocator<ThreadFromGlobalPool::ThreadFromGlobalPool<void ThreadPoolImpl<ThreadFromGlobalPool>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda1'()>(void&&)::'lambda'()>, void ()>::operator()() /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/functional:1527
    #32 0x7696226 in std::__1::__function::__func<ThreadFromGlobalPool::ThreadFromGlobalPool<void ThreadPoolImpl<ThreadFromGlobalPool>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda1'()>(void&&)::'lambda'(), std::__1::allocator<ThreadFromGlobalPool::ThreadFromGlobalPool<void ThreadPoolImpl<ThreadFromGlobalPool>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda1'()>(void&&)::'lambda'()>, void ()>::operator()() /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/functional:1651
    #33 0x7688f23 in std::__1::__function::__value_func<void ()>::operator()() const /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/functional:1799:16
    #34 0x7688f23 in std::__1::function<void ()>::operator()() const /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/functional:2347
    #35 0x7688f23 in ThreadPoolImpl<std::__1::thread>::worker(std::__1::__list_iterator<std::__1::thread, void*>) /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Common/ThreadPool.cpp:221
    #36 0x7691257 in void ThreadPoolImpl<std::__1::thread>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda1'()::operator()() const /home/milovidov/ClickHouse/build_clang9_asan/../dbms/src/Common/ThreadPool.cpp:102:73
    #37 0x7691257 in decltype(std::__1::forward<void>(fp)()) std::__1::__invoke<void ThreadPoolImpl<std::__1::thread>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda1'()>(void&&) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/type_traits:4410
    #38 0x7691257 in void std::__1::__thread_execute<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct> >, void ThreadPoolImpl<std::__1::thread>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda1'()>(std::__1::tuple<void, void ThreadPoolImpl<std::__1::thread>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda1'()>&, std::__1::__tuple_indices<>) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/thread:341
    #39 0x7691257 in void* std::__1::__thread_proxy<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct> >, void ThreadPoolImpl<std::__1::thread>::scheduleImpl<void>(std::__1::function<void ()>, int, std::__1::optional<unsigned long>)::'lambda1'()> >(void*) /home/milovidov/ClickHouse/build_clang9_asan/../contrib/libcxx/include/thread:351
    #40 0x7fc0e72e86da in start_thread (/lib/x86_64-linux-gnu/libpthread.so.0+0x76da)


... comment too long

SUMMARY: AddressSanitizer: 43388 byte(s) leaked in 1011 allocation(s).
```

After running stress test.