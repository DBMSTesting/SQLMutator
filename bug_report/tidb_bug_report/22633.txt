ID: 22633
Title: Common test failed on CI but passed in local
Description:
## Bug Report

### 1. Minimal reproduce step (Required)
SQL to reproduce  the subquery inside select:

```
drop table if exists t2;
create table t2(d date, id int) ;
insert into t2 values ('2002-06-09', 1),('2002-06-09', 1	),('2002-06-09', 1	),('2002-06-09', 1	),('2002-06-09', 1	),('2002-06-09', 1	),('2002-06-09', 1	),('2002-06-09', 2	),('2002-06-09', 2	),('2002-06-09', 2	),('2002-06-09', 2	),('2002-06-09', 2	),('2002-06-09', 2	),('2002-06-09', 2	),('2002-06-09', 3	),('2002-06-09', 3	),('2002-06-09', 3	),('2002-06-09', 3	),('2002-06-09', 3	),('2002-06-09', 3	),('2002-06-09', 3	),('2002-06-09', 4	),('2002-06-09', 4	),('2002-06-09', 4	),('2002-06-09', 4	),('2002-06-09', 4	),('2002-06-09', 4	),('2002-06-09', 4	),('2002-06-09', 5	),('2002-06-09', 5	),('2002-06-09', 5	),('2002-06-09', 5	),('2002-06-09', 5	),('2002-06-09', 5	),('2002-06-09', 5	),('2002-06-09', 10),('2002-06-09', 10),('2002-06-09', 10),('2002-06-09', 10),('2002-06-09', 10),('2002-06-09', 10),('2002-06-09', 10),('2002-06-09', 11),('2002-06-09', 11),('2002-06-09', 11),('2002-06-09', 11),('2002-06-09', 11),('2002-06-09', 11),('2002-06-09', 11);

/* Inconsistent query result in CI */
 select d, id, percent_rank() over w p, cume_dist() over w c_dist from t2 window w as (partition by d order by id); 
```
<!-- a step by step guide for reproducing the bug. -->

### 2. What did you expect to see? (Required)
Common test in CI should pass.
### 3. What did you see instead (Required)
Here's the [common test](https://internal.pingcap.net/idc-jenkins/blue/organizations/jenkins/tidb_ghpr_common_test/detail/tidb_ghpr_common_test/30593/pipeline/)

![image](https://user-images.githubusercontent.com/34013484/106375523-c504cd00-63c7-11eb-969c-f5e29d64277c.png)

I formatted the output:

```
we need(2425):
SELECT * from (SELECT  date,id, PERCENT_RANK() OVER w AS `p_rank`, CUME_DIST() OVER w as `c_dist` FROM t1,t2 WINDOW w AS (PARTITION BY date ORDER BY id)) t;
date	id	p_rank	c_dist
2002-06-09, 1	,0	0.14285714285714285
2002-06-09, 1	,0	0.14285714285714285
2002-06-09, 1	,0	0.14285714285714285
2002-06-09, 1	,0	0.14285714285714285
2002-06-09, 1	,0	0.14285714285714285
2002-06-09, 1	,0	0.14285714285714285
2002-06-09, 1	,0	0.14285714285714285
2002-06-09, 2	,0.14583333333333334	0.2857142857142857
2002-06-09, 2	,0.14583333333333334	0.2857142857142857
2002-06-09, 2	,0.14583333333333334	0.2857142857142857
2002-06-09, 2	,0.14583333333333334	0.2857142857142857
2002-06-09, 2	,0.14583333333333334	0.2857142857142857
2002-06-09, 2	,0.14583333333333334	0.2857142857142857
2002-06-09, 2	,0.14583333333333334	0.2857142857142857
2002-06-09, 3	,0.2916666666666667	0.42857142857142855
2002-06-09, 3	,0.2916666666666667	0.42857142857142855
2002-06-09, 3	,0.2916666666666667	0.42857142857142855
2002-06-09, 3	,0.2916666666666667	0.42857142857142855
2002-06-09, 3	,0.2916666666666667	0.42857142857142855
2002-06-09, 3	,0.2916666666666667	0.42857142857142855
2002-06-09, 3	,0.2916666666666667	0.42857142857142855
2002-06-09, 4	,0.4375	0.5714285714285714
2002-06-09, 4	,0.4375	0.5714285714285714
2002-06-09, 4	,0.4375	0.5714285714285714
2002-06-09, 4	,0.4375	0.5714285714285714
2002-06-09, 4	,0.4375	0.5714285714285714
2002-06-09, 4	,0.4375	0.5714285714285714
2002-06-09, 4	,0.4375	0.5714285714285714
2002-06-09, 5	,0.5833333333333334	0.7142857142857143
2002-06-09, 5	,0.5833333333333334	0.7142857142857143
2002-06-09, 5	,0.5833333333333334	0.7142857142857143
2002-06-09, 5	,0.5833333333333334	0.7142857142857143
2002-06-09, 5	,0.5833333333333334	0.7142857142857143
2002-06-09, 5	,0.5833333333333334	0.7142857142857143
2002-06-09, 5	,0.5833333333333334	0.7142857142857143
2002-06-09, 10,	0.7291666666666666	0.8571428571428571
2002-06-09, 10,	0.7291666666666666	0.8571428571428571
2002-06-09, 10,	0.7291666666666666	0.8571428571428571
2002-06-09, 10,	0.7291666666666666	0.8571428571428571
2002-06-09, 10,	0.7291666666666666	0.8571428571428571
2002-06-09, 10,	0.7291666666666666	0.8571428571428571
2002-06-09, 10,	0.7291666666666666	0.8571428571428571
2002-06-09, 11,	0.875	1
2002-06-09, 11,	0.875	1
2002-06-09, 11,	0.875	1
2002-06-09, 11,	0.875	1
2002-06-09, 11,	0.875	1
2002-06-09, 11,	0.875	1
2002-06-09, 11,	0.875	1


----------------------------------------------------------------------


-    Window function in parent and subquery
----------
but got(2425):
SELECT * from (SELECT  date,id, PERCENT_RANK() OVER w AS `p_rank`, CUME_DIST() OVER w as `c_dist` FROM t1,t2 WINDOW w AS (PARTITION BY date ORDER BY id)) t;
date	id	p_rank	c_dist
2002-06-09	1	0	0.14285714285714285
2002-06-09	1	0	0.14285714285714285
2002-06-09	1	0	0.14285714285714285
2002-06-09	1	0	0.14285714285714285
2002-06-09	1	0	0.14285714285714285
2002-06-09	1	0	0.14285714285714285
2002-06-09	1	0	0.14285714285714285
2002-06-09	2	0.14583333333333334	0.2857142857142857
2002-06-09	2	0.14583333333333334	0.2857142857142857
2002-06-09	2	0.14583333333333334	0.2857142857142857
2002-06-09	2	0.14583333333333334	0.2857142857142857
2002-06-09	2	0.14583333333333334	0.2857142857142857
2002-06-09	2	0.14583333333333334	0.2857142857142857
2002-06-09	2	0.14583333333333334	0.2857142857142857
2002-06-09	3	0.2916666666666667	0.42857142857142855
2002-06-09	3	0.2916666666666667	0.42857142857142855
2002-06-09	3	0.2916666666666667	0.42857142857142855
2002-06-09	3	0.2916666666666667	0.42857142857142855
2002-06-09	3	0.2916666666666667	0.42857142857142855
2002-06-09	3	0.2916666666666667	0.42857142857142855
2002-06-09	3	0.2916666666666667	0.42857142857142855
2002-06-09	4	0.4375	0.5714285714285714
2002-06-09	4	0.4375	0.5714285714285714
2002-06-09	4	0.4375	0.5714285714285714
2002-06-09	4	0.4375	0.5714285714285714
2002-06-09	4	0.4375	0.5714285714285714
2002-06-09	4	0.4375	0.5714285714285714
2002-06-09	4	0.4375	0.5714285714285714
2002-06-09	5	0.5833333333333334	0.7142857142857143
2002-06-09	5	0.5833333333333334	0.7142857142857143
2002-06-09	5	0.5833333333333334	0.7142857142857143
2002-06-09	5	0.5833333333333334	0.7142857142857143
2002-06-09	5	0.28865979381443296	0.35714285714285715
2002-06-09	5	0.28865979381443296	0.35714285714285715
2002-06-09	5	0.28865979381443296	0.35714285714285715
2002-06-09	10	0.36082474226804123	0.42857142857142855
2002-06-09	10	0.36082474226804123	0.42857142857142855
2002-06-09	10	0.36082474226804123	0.42857142857142855
2002-06-09	10	0.36082474226804123	0.42857142857142855
2002-06-09	10	0.36082474226804123	0.42857142857142855
2002-06-09	10	0.36082474226804123	0.42857142857142855
2002-06-09	10	0.36082474226804123	0.42857142857142855
2002-06-09	11	0.4329896907216495	0.5
2002-06-09	11	0.4329896907216495	0.5
2002-06-09	11	0.4329896907216495	0.5
2002-06-09	11	0.4329896907216495	0.5
2002-06-09	11	0.4329896907216495	0.5
2002-06-09	11	0.4329896907216495	0.5
2002-06-09	11	0.4329896907216495	0.5
```

### 4. What is your TiDB version? (Required)

<!-- Paste the output of SELECT tidb_version() -->
```
| Release Version: v4.0.0-beta.2-2089-g0755feca8
Edition: Community
Git Commit Hash: 0755feca883fae44727db7da376f409cf2916f2e
Git Branch: refineWindowProcessor
UTC Build Time: 2021-01-31 07:15:08
GoVersion: go1.15.6
Race Enabled: false
TiKV Min Version: v3.0.0-60965b006877ca7234adaced7890d7b029ed1306
Check Table Before Drop: false  
```
