ID: 34795
Title: DATA RACE on the compactRequestMocker.receivedRequestsOfAddr
Description:
## Bug Report

Please answer these questions before submitting your issue. Thanks!

### 1. Minimal reproduce step (Required)

```
==================
WARNING: DATA RACE
Read at 0x00c02071f830 by goroutine 20:
  runtime.mapaccess1_faststr()
      /usr/local/go/src/runtime/map_faststr.go:13 +0x0
  github.com/pingcap/tidb/executor_test.(*compactRequestMocker).SendRequest()
      /go/tidb/executor/compact_table_test.go:704 +0xd7
  github.com/tikv/client-go/v2/internal/client.interceptedClient.SendRequest()
      /home/prow/go/pkg/mod/github.com/tikv/client-go/v2@v2.0.1-0.20220518162527-de7ca289ac77/internal/client/client_interceptor.go:42 +0x20b
  github.com/tikv/client-go/v2/internal/client.(*interceptedClient).SendRequest()
      <autogenerated>:1 +0xae
  github.com/tikv/client-go/v2/internal/client.reqCollapse.SendRequest()
      /home/prow/go/pkg/mod/github.com/tikv/client-go/v2@v2.0.1-0.20220518162527-de7ca289ac77/internal/client/client_collapse.go:74 +0x130
  github.com/tikv/client-go/v2/internal/client.(*reqCollapse).SendRequest()
      <autogenerated>:1 +0xae
  github.com/pingcap/tidb/executor.(*storeCompactTask).sendRequestWithRetry()
      /go/tidb/executor/compact_table.go:324 +0x1a7
  github.com/pingcap/tidb/executor.(*storeCompactTask).compactOnePhysicalTable()
      /go/tidb/executor/compact_table.go:234 +0x2d1
  github.com/pingcap/tidb/executor.(*storeCompactTask).work()
      /go/tidb/executor/compact_table.go:166 +0x6fc
  github.com/pingcap/tidb/executor.(*storeCompactTask).work-fm()
      <autogenerated>:1 +0x39
  golang.org/x/sync/errgroup.(*Group).Go.func1()
      /home/prow/go/pkg/mod/golang.org/x/sync@v0.0.0-20220513210516-0976fa681c29/errgroup/errgroup.go:74 +0x86
Previous write at 0x00c02071f830 by goroutine 91:
  runtime.mapassign_faststr()
      /usr/local/go/src/runtime/map_faststr.go:203 +0x0
  github.com/pingcap/tidb/executor_test.(*compactRequestMocker).SendRequest()
      /go/tidb/executor/compact_table_test.go:704 +0x11b
  github.com/tikv/client-go/v2/internal/client.interceptedClient.SendRequest()
      /home/prow/go/pkg/mod/github.com/tikv/client-go/v2@v2.0.1-0.20220518162527-de7ca289ac77/internal/client/client_interceptor.go:42 +0x20b
  github.com/tikv/client-go/v2/internal/client.(*interceptedClient).SendRequest()
      <autogenerated>:1 +0xae
  github.com/tikv/client-go/v2/internal/client.reqCollapse.SendRequest()
      /home/prow/go/pkg/mod/github.com/tikv/client-go/v2@v2.0.1-0.20220518162527-de7ca289ac77/internal/client/client_collapse.go:74 +0x130
  github.com/tikv/client-go/v2/internal/client.(*reqCollapse).SendRequest()
      <autogenerated>:1 +0xae
  github.com/pingcap/tidb/executor.(*storeCompactTask).sendRequestWithRetry()
      /go/tidb/executor/compact_table.go:324 +0x1a7
  github.com/pingcap/tidb/executor.(*storeCompactTask).compactOnePhysicalTable()
      /go/tidb/executor/compact_table.go:234 +0x2d1
  github.com/pingcap/tidb/executor.(*storeCompactTask).work()
      /go/tidb/executor/compact_table.go:166 +0x6fc
  github.com/pingcap/tidb/executor.(*storeCompactTask).work-fm()
      <autogenerated>:1 +0x39
  golang.org/x/sync/errgroup.(*Group).Go.func1()
      /home/prow/go/pkg/mod/golang.org/x/sync@v0.0.0-20220513210516-0976fa681c29/errgroup/errgroup.go:74 +0x86
Goroutine 20 (running) created at:
  golang.org/x/sync/errgroup.(*Group).Go()
      /home/prow/go/pkg/mod/golang.org/x/sync@v0.0.0-20220513210516-0976fa681c29/errgroup/errgroup.go:71 +0x12e
  github.com/pingcap/tidb/executor.(*CompactTableTiFlashExec).doCompact()
      /go/tidb/executor/compact_table.go:110 +0x4e6
  github.com/pingcap/tidb/executor.(*CompactTableTiFlashExec).Next()
      /go/tidb/executor/compact_table.go:82 +0x11a
  github.com/pingcap/tidb/executor.Next()
      /go/tidb/executor/executor.go:319 +0x5af
  github.com/pingcap/tidb/executor.(*ExecStmt).handleNoDelayExecutor()
      /go/tidb/executor/adapter.go:665 +0x6a4
  github.com/pingcap/tidb/executor.(*ExecStmt).handleNoDelay()
      /go/tidb/executor/adapter.go:516 +0x29c
  github.com/pingcap/tidb/executor.(*ExecStmt).Exec()
      /go/tidb/executor/adapter.go:465 +0xfc9
  github.com/pingcap/tidb/session.runStmt()
      /go/tidb/session/session.go:2069 +0x6cb
  github.com/pingcap/tidb/session.(*session).ExecuteStmt()
      /go/tidb/session/session.go:1938 +0xdba
  github.com/pingcap/tidb/testkit.(*TestKit).Exec()
      /go/tidb/testkit/testkit.go:214 +0x701
  github.com/pingcap/tidb/testkit.(*TestKit).MustExec()
      /go/tidb/testkit/testkit.go:88 +0x99
  github.com/pingcap/tidb/executor_test.TestCompactTableMultipleTiFlashWithError()
      /go/tidb/executor/compact_table_test.go:378 +0x725
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1439 +0x213
  testing.(*T).Run.func1()
      /usr/local/go/src/testing/testing.go:1486 +0x47
Goroutine 91 (running) created at:
  golang.org/x/sync/errgroup.(*Group).Go()
      /home/prow/go/pkg/mod/golang.org/x/sync@v0.0.0-20220513210516-0976fa681c29/errgroup/errgroup.go:71 +0x12e
  github.com/pingcap/tidb/executor.(*CompactTableTiFlashExec).doCompact()
      /go/tidb/executor/compact_table.go:110 +0x4e6
  github.com/pingcap/tidb/executor.(*CompactTableTiFlashExec).Next()
      /go/tidb/executor/compact_table.go:82 +0x11a
  github.com/pingcap/tidb/executor.Next()
      /go/tidb/executor/executor.go:319 +0x5af
  github.com/pingcap/tidb/executor.(*ExecStmt).handleNoDelayExecutor()
      /go/tidb/executor/adapter.go:665 +0x6a4
  github.com/pingcap/tidb/executor.(*ExecStmt).handleNoDelay()
      /go/tidb/executor/adapter.go:516 +0x29c
  github.com/pingcap/tidb/executor.(*ExecStmt).Exec()
      /go/tidb/executor/adapter.go:465 +0xfc9
  github.com/pingcap/tidb/session.runStmt()
      /go/tidb/session/session.go:2069 +0x6cb
  github.com/pingcap/tidb/session.(*session).ExecuteStmt()
      /go/tidb/session/session.go:1938 +0xdba
  github.com/pingcap/tidb/testkit.(*TestKit).Exec()
      /go/tidb/testkit/testkit.go:214 +0x701
  github.com/pingcap/tidb/testkit.(*TestKit).MustExec()
      /go/tidb/testkit/testkit.go:88 +0x99
  github.com/pingcap/tidb/executor_test.TestCompactTableMultipleTiFlashWithError()
      /go/tidb/executor/compact_table_test.go:378 +0x725
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1439 +0x213
  testing.(*T).Run.func1()
      /usr/local/go/src/testing/testing.go:1486 +0x47
================== 
```
<!-- a step by step guide for reproducing the bug. -->

### 2. What did you expect to see? (Required)

### 3. What did you see instead (Required)

### 4. What is your TiDB version? (Required)

<!-- Paste the output of SELECT tidb_version() -->

