ID: 41662
Title: data race in the TestCursorReadHoldTS
Description:
## Bug Report

Please answer these questions before submitting your issue. Thanks!

### 1. Minimal reproduce step (Required)

<!-- a step by step guide for reproducing the bug. -->

### 2. What did you expect to see? (Required)

### 3. What did you see instead (Required)

```
==================
WARNING: DATA RACE
Write at 0x00c005bc5b28 by goroutine 293:
  github.com/pingcap/tidb/sessionctx/variable.(*SessionVars).InitStatementContext()
      sessionctx/variable/session.go:1414 +0xd7
  github.com/pingcap/tidb/executor.ResetContextOfStmt()
      executor/executor.go:1945 +0x184
  github.com/pingcap/tidb/session.(*session).ExecuteStmt()
      session/session.go:2138 +0x408
  github.com/pingcap/tidb/server.(*TiDBContext).ExecuteStmt()
      server/driver_tidb.go:247 +0x12d
  github.com/pingcap/tidb/server.(*clientConn).executePreparedStmtAndWriteResult()
      server/conn_stmt.go:272 +0x4ac
  github.com/pingcap/tidb/server.(*clientConn).executePlanCacheStmt()
      server/conn_stmt.go:221 +0x1c4
  github.com/pingcap/tidb/server.(*clientConn).handleStmtExecute()
      server/conn_stmt.go:213 +0xa1a
  github.com/pingcap/tidb/server.(*clientConn).dispatch()
      server/conn.go:1430 +0x1a5a
  github.com/pingcap/tidb/server.(*mockConn).Dispatch()
      server/mock_conn.go:66 +0x8a
  github.com/pingcap/tidb/server.TestCursorReadHoldTS()
      server/conn_stmt_test.go:326 +0x148e
  github.com/pingcap/tidb/domain.(*Domain).rebuildSysVarCache()
      domain/sysvar_cache.go:146 +0x73c
  github.com/pingcap/tidb/domain.(*Domain).LoadSysVarCacheLoop()
      domain/domain.go:1370 +0xb9
  github.com/pingcap/tidb/session.BootstrapSession()
      session/session.go:3316 +0x78c
  github.com/pingcap/tidb/domain.(*Domain).GetSessionCache()
      domain/sysvar_cache.go:62 +0x6a
  github.com/pingcap/tidb/session.(*session).loadCommonGlobalVariablesIfNeeded()
      session/session.go:3582 +0x11e
  github.com/pingcap/tidb/session.(*session).ExecuteStmt()
      session/session.go:2130 +0x2fb
  github.com/pingcap/tidb/session.(*session).ExecuteInternal()
      session/session.go:1676 +0x4eb
  github.com/pingcap/tidb/domain.(*Domain).LoadPrivilegeLoop()
      domain/domain.go:1312 +0x143
  github.com/pingcap/tidb/session.BootstrapSession()
      session/session.go:3309 +0x72c
  github.com/pingcap/tidb/testkit.bootstrap()
      testkit/mockstore.go:84 +0x84
  github.com/pingcap/tidb/testkit.CreateMockStoreAndDomain()
      testkit/mockstore.go:69 +0xd0
  github.com/pingcap/tidb/server.TestCursorReadHoldTS()
      server/conn_stmt_test.go:259 +0x58
  testing.tRunner()
      GOROOT/src/testing/testing.go:1446 +0x216
  testing.(*T).Run.func1()
      GOROOT/src/testing/testing.go:1493 +0x47

Previous read at 0x00c005bc5b28 by goroutine 14387:
  sync/atomic.LoadInt64()
      src/runtime/race_amd64.s:208 +0xb
  sync/atomic.LoadPointer()
      <autogenerated>:1 +0x16
  github.com/pingcap/tidb/util/memory.(*Tracker).Consume()
      util/memory/tracker.go:409 +0x1ba
  github.com/pingcap/tidb/store/copr.(*copIteratorWorker).sendToRespCh()
      store/copr/coprocessor.go:810 +0x2b4
  github.com/pingcap/tidb/store/copr.(*copIteratorWorker).handleCopResponse()
      store/copr/coprocessor.go:1257 +0x2e07
  github.com/pingcap/tidb/store/copr.(*copIteratorWorker).handleCopPagingResult()
      store/copr/coprocessor.go:1113 +0xfd
  github.com/pingcap/tidb/store/copr.(*copIteratorWorker).handleTaskOnce()
      store/copr/coprocessor.go:1052 +0x1c97
  github.com/pingcap/tidb/store/copr.(*copIteratorWorker).handleTask()
      store/copr/coprocessor.go:933 +0x224
  github.com/pingcap/tidb/store/copr.(*copIteratorWorker).run()
      store/copr/coprocessor.go:643 +0x1e4
  github.com/pingcap/tidb/store/copr.(*copIterator).open.func1()
      store/copr/coprocessor.go:683 +0x58

Goroutine 293 (running) created at:
  testing.(*T).Run()
      GOROOT/src/testing/testing.go:1493 +0x75d
  testing.runTests.func1()
      GOROOT/src/testing/testing.go:1846 +0x99
  testing.tRunner()
      GOROOT/src/testing/testing.go:1446 +0x216
  testing.runTests()
      GOROOT/src/testing/testing.go:1844 +0x7ec
  testing.(*M).Run()
      GOROOT/src/testing/testing.go:1726 +0xa84
  go.uber.org/goleak.VerifyTestMain()
      external/org_uber_go_goleak/testmain.go:53 +0x70
  github.com/pingcap/tidb/server.TestMain()
      server/main_test.go:74 +0xe8f
  main.main()
      bazel-out/k8-fastbuild/bin/server/server_test_/testmain.go:284 +0x7c9

Goroutine 14387 (running) created at:
  github.com/pingcap/tidb/store/copr.(*copIterator).open()
      store/copr/coprocessor.go:683 +0x11d
  github.com/pingcap/tidb/store/copr.(*CopClient).Send()
      store/copr/coprocessor.go:103 +0x36e
  github.com/pingcap/tidb/distsql.Select()
      distsql/distsql.go:102 +0x9f4
  github.com/pingcap/tidb/distsql.SelectWithRuntimeStats()
      distsql/distsql.go:143 +0xcc
  github.com/pingcap/tidb/executor.selectResultHook.SelectResult()
      executor/table_reader.go:58 +0x204
  github.com/pingcap/tidb/executor.(*TableReaderExecutor).buildResp()
      executor/table_reader.go:326 +0x7eb
  github.com/pingcap/tidb/executor.(*TableReaderExecutor).Open()
      executor/table_reader.go:223 +0x1433
  github.com/pingcap/tidb/executor.(*ExecStmt).openExecutor()
      executor/adapter.go:1135 +0x109
  github.com/pingcap/tidb/executor.(*ExecStmt).Exec()
      executor/adapter.go:508 +0xbc4
  github.com/pingcap/tidb/session.runStmt()
      session/session.go:2351 +0x85c
  github.com/pingcap/tidb/session.(*session).ExecuteStmt()
      session/session.go:2215 +0x1266
  github.com/pingcap/tidb/server.(*TiDBContext).ExecuteStmt()
      server/driver_tidb.go:247 +0x12d
  github.com/pingcap/tidb/server.(*clientConn).executePreparedStmtAndWriteResult()
      server/conn_stmt.go:272 +0x4ac
  github.com/pingcap/tidb/server.(*clientConn).executePlanCacheStmt()
      server/conn_stmt.go:221 +0x1c4
  github.com/pingcap/tidb/server.(*clientConn).handleStmtExecute()
      server/conn_stmt.go:213 +0xa1a
  github.com/pingcap/tidb/server.(*clientConn).dispatch()
      server/conn.go:1430 +0x1a5a
  github.com/pingcap/tidb/server.(*mockConn).Dispatch()
      server/mock_conn.go:66 +0x8a
  github.com/pingcap/tidb/server.TestCursorReadHoldTS()
      server/conn_stmt_test.go:318 +0x123c
  github.com/pingcap/tidb/domain.(*Domain).rebuildSysVarCache()
      domain/sysvar_cache.go:146 +0x73c
  github.com/pingcap/tidb/domain.(*Domain).LoadSysVarCacheLoop()
      domain/domain.go:1370 +0xb9
  github.com/pingcap/tidb/session.BootstrapSession()
      session/session.go:3316 +0x78c
  github.com/pingcap/tidb/domain.(*Domain).GetSessionCache()
      domain/sysvar_cache.go:62 +0x6a
  github.com/pingcap/tidb/session.(*session).loadCommonGlobalVariablesIfNeeded()
      session/session.go:3582 +0x11e
  github.com/pingcap/tidb/session.(*session).ExecuteStmt()
      session/session.go:2130 +0x2fb
  github.com/pingcap/tidb/session.(*session).ExecuteInternal()
      session/session.go:1676 +0x4eb
  github.com/pingcap/tidb/domain.(*Domain).LoadPrivilegeLoop()
      domain/domain.go:1312 +0x143
  github.com/pingcap/tidb/session.BootstrapSession()
      session/session.go:3309 +0x72c
  github.com/pingcap/tidb/testkit.bootstrap()
      testkit/mockstore.go:84 +0x84
  github.com/pingcap/tidb/testkit.CreateMockStoreAndDomain()
      testkit/mockstore.go:69 +0xd0
  github.com/pingcap/tidb/server.TestCursorReadHoldTS()
      server/conn_stmt_test.go:259 +0x58
  testing.tRunner()
      GOROOT/src/testing/testing.go:1446 +0x216
  testing.(*T).Run.func1()
      GOROOT/src/testing/testing.go:1493 +0x47
==================
```
### 4. What is your TiDB version? (Required)

<!-- Paste the output of SELECT tidb_version() -->

