ID: 33030
Title: DATA RACE in the TestLocatePartition
Description:
## Bug Report

Please answer these questions before submitting your issue. Thanks!

### 1. Minimal reproduce step (Required)

<!-- a step by step guide for reproducing the bug. -->

```
==================
WARNING: DATA RACE
Write at 0x00c003f0f748 by goroutine 82:
  github.com/pingcap/tidb/table/tables.(*ForListColumnPruning).buildPartitionValueMapAndSorted()
      /go/tidb/table/tables/partition.go:790 +0x6b4
  github.com/pingcap/tidb/table/tables.(*ForListColumnPruning).LocatePartition()
      /go/tidb/table/tables/partition.go:834 +0x51
  github.com/pingcap/tidb/planner/core.(*listPartitionPruner).locateColumnPartitionsByCondition()
      /go/tidb/planner/core/rule_partition_processor.go:489 +0x3a7
  github.com/pingcap/tidb/planner/core.(*listPartitionPruner).locatePartitionByColumn()
      /go/tidb/planner/core/rule_partition_processor.go:472 +0x204
  github.com/pingcap/tidb/planner/core.(*listPartitionPruner).locatePartition()
      /go/tidb/planner/core/rule_partition_processor.go:406 +0x1a4
  github.com/pingcap/tidb/planner/core.(*listPartitionPruner).locatePartitionByCNFCondition()
      /go/tidb/planner/core/rule_partition_processor.go:418 +0xfe
  github.com/pingcap/tidb/planner/core.(*listPartitionPruner).findUsedListColumnsPartitions()
      /go/tidb/planner/core/rule_partition_processor.go:544 +0x64
  github.com/pingcap/tidb/planner/core.(*partitionProcessor).findUsedListPartitions()
      /go/tidb/planner/core/rule_partition_processor.go:606 +0x1f8
  github.com/pingcap/tidb/planner/core.(*partitionProcessor).pruneListPartition()
      /go/tidb/planner/core/rule_partition_processor.go:625 +0xdd
  github.com/pingcap/tidb/planner/core.PartitionPruning()
      /go/tidb/planner/core/partition_prune.go:49 +0x199
  github.com/pingcap/tidb/planner/core.partitionAccessObject()
      /go/tidb/planner/core/explain.go:394 +0x1e6
  github.com/pingcap/tidb/planner/core.getAccessObjectForTableScan()
      /go/tidb/planner/core/explain.go:345 +0x1e4
  github.com/pingcap/tidb/planner/core.(*PhysicalTableReader).accessObject()
      /go/tidb/planner/core/explain.go:354 +0x18f
  github.com/pingcap/tidb/planner/core.(*Explain).getOperatorInfo()
      /go/tidb/planner/core/common_plans.go:1524 +0x2ef
  github.com/pingcap/tidb/planner/core.(*Explain).prepareOperatorInfo()
      /go/tidb/planner/core/common_plans.go:1480 +0x184
  github.com/pingcap/tidb/planner/core.(*Explain).explainPlanInRowFormat()
      /go/tidb/planner/core/common_plans.go:1318 +0xd5
  github.com/pingcap/tidb/planner/core.(*Explain).RenderResult()
      /go/tidb/planner/core/common_plans.go:1273 +0x268
  github.com/pingcap/tidb/executor.(*ExplainExec).generateExplainInfo()
      /go/tidb/executor/explain.go:108 +0x72
  github.com/pingcap/tidb/executor.(*ExplainExec).Next()
      /go/tidb/executor/explain.go:59 +0xa4
  github.com/pingcap/tidb/executor.Next()
      /go/tidb/executor/executor.go:302 +0x56f
  github.com/pingcap/tidb/executor.(*recordSet).Next()
      /go/tidb/executor/adapter.go:149 +0x13b
  github.com/pingcap/tidb/session.(*execStmtResult).Next()
      <autogenerated>:1 +0x7b
  github.com/pingcap/tidb/session.GetRows4Test()
      /go/tidb/session/tidb.go:325 +0xea
  github.com/pingcap/tidb/session.ResultSetToStringSlice()
      /go/tidb/session/tidb.go:343 +0xb4
  github.com/pingcap/tidb/testkit.(*TestKit).ResultSetToResultWithCtx()
      /go/tidb/testkit/testkit.go:175 +0xbc
  github.com/pingcap/tidb/testkit.(*TestKit).ResultSetToResult()
      /go/tidb/testkit/testkit.go:170 +0x26a
  github.com/pingcap/tidb/testkit.(*TestKit).MustQuery()
      /go/tidb/testkit/testkit.go:110 +0x270
  github.com/pingcap/tidb/table/tables_test.TestLocatePartition.func1()
      /go/tidb/table/tables/partition_test.go:430 +0x64
  github.com/pingcap/tidb/table/tables_test.TestLocatePartition.func2.1()
      /go/tidb/table/tables/partition_test.go:436 +0x3e
  github.com/pingcap/tidb/util.(*WaitGroupWrapper).Run.func1()
      /go/tidb/util/wait_group_wrapper.go:33 +0x7e
Previous read at 0x00c003f0f748 by goroutine 165:
  runtime.racereadrange()
      <autogenerated>:1 +0x1b
  github.com/pingcap/tidb/planner/core.(*listPartitionPruner).locateColumnPartitionsByCondition()
      /go/tidb/planner/core/rule_partition_processor.go:514 +0x6f2
  github.com/pingcap/tidb/planner/core.(*listPartitionPruner).locatePartitionByColumn()
      /go/tidb/planner/core/rule_partition_processor.go:472 +0x204
  github.com/pingcap/tidb/planner/core.(*listPartitionPruner).locatePartition()
      /go/tidb/planner/core/rule_partition_processor.go:406 +0x1a4
  github.com/pingcap/tidb/planner/core.(*listPartitionPruner).locatePartitionByCNFCondition()
      /go/tidb/planner/core/rule_partition_processor.go:418 +0xfe
  github.com/pingcap/tidb/planner/core.(*listPartitionPruner).findUsedListColumnsPartitions()
      /go/tidb/planner/core/rule_partition_processor.go:544 +0x64
  github.com/pingcap/tidb/planner/core.(*partitionProcessor).findUsedListPartitions()
      /go/tidb/planner/core/rule_partition_processor.go:606 +0x1f8
  github.com/pingcap/tidb/planner/core.(*partitionProcessor).pruneListPartition()
      /go/tidb/planner/core/rule_partition_processor.go:625 +0xdd
  github.com/pingcap/tidb/planner/core.PartitionPruning()
      /go/tidb/planner/core/partition_prune.go:49 +0x199
  github.com/pingcap/tidb/planner/core.partitionAccessObject()
      /go/tidb/planner/core/explain.go:394 +0x1e6
  github.com/pingcap/tidb/planner/core.getAccessObjectForTableScan()
      /go/tidb/planner/core/explain.go:345 +0x1e4
  github.com/pingcap/tidb/planner/core.(*PhysicalTableReader).accessObject()
      /go/tidb/planner/core/explain.go:354 +0x18f
  github.com/pingcap/tidb/planner/core.(*Explain).getOperatorInfo()
      /go/tidb/planner/core/common_plans.go:1524 +0x2ef
  github.com/pingcap/tidb/planner/core.(*Explain).prepareOperatorInfo()
      /go/tidb/planner/core/common_plans.go:1480 +0x184
  github.com/pingcap/tidb/planner/core.(*Explain).explainPlanInRowFormat()
      /go/tidb/planner/core/common_plans.go:1318 +0xd5
  github.com/pingcap/tidb/planner/core.(*Explain).RenderResult()
      /go/tidb/planner/core/common_plans.go:1273 +0x268
  github.com/pingcap/tidb/executor.(*ExplainExec).generateExplainInfo()
      /go/tidb/executor/explain.go:108 +0x72
  github.com/pingcap/tidb/executor.(*ExplainExec).Next()
      /go/tidb/executor/explain.go:59 +0xa4
  github.com/pingcap/tidb/executor.Next()
      /go/tidb/executor/executor.go:302 +0x56f
  github.com/pingcap/tidb/executor.(*recordSet).Next()
      /go/tidb/executor/adapter.go:149 +0x13b
  github.com/pingcap/tidb/session.(*execStmtResult).Next()
      <autogenerated>:1 +0x7b
  github.com/pingcap/tidb/session.GetRows4Test()
      /go/tidb/session/tidb.go:325 +0xea
  github.com/pingcap/tidb/session.ResultSetToStringSlice()
      /go/tidb/session/tidb.go:343 +0xb4
  github.com/pingcap/tidb/testkit.(*TestKit).ResultSetToResultWithCtx()
      /go/tidb/testkit/testkit.go:175 +0xbc
  github.com/pingcap/tidb/testkit.(*TestKit).ResultSetToResult()
      /go/tidb/testkit/testkit.go:170 +0x26a
  github.com/pingcap/tidb/testkit.(*TestKit).MustQuery()
      /go/tidb/testkit/testkit.go:110 +0x270
  github.com/pingcap/tidb/table/tables_test.TestLocatePartition.func1()
      /go/tidb/table/tables/partition_test.go:430 +0x64
  github.com/pingcap/tidb/table/tables_test.TestLocatePartition.func2.1()
      /go/tidb/table/tables/partition_test.go:436 +0x3e
  github.com/pingcap/tidb/util.(*WaitGroupWrapper).Run.func1()
      /go/tidb/util/wait_group_wrapper.go:33 +0x7e
Goroutine 82 (running) created at:
  github.com/pingcap/tidb/util.(*WaitGroupWrapper).Run()
      /go/tidb/util/wait_group_wrapper.go:31 +0xde
  github.com/pingcap/tidb/table/tables_test.TestLocatePartition.func2()
      /go/tidb/table/tables/partition_test.go:435 +0x126
  github.com/pingcap/tidb/table/tables_test.TestLocatePartition()
      /go/tidb/table/tables/partition_test.go:440 +0x2eb
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run路dwrap路21()
      /usr/local/go/src/testing/testing.go:1306 +0x47
Goroutine 165 (running) created at:
  github.com/pingcap/tidb/util.(*WaitGroupWrapper).Run()
      /go/tidb/util/wait_group_wrapper.go:31 +0xde
  github.com/pingcap/tidb/table/tables_test.TestLocatePartition.func2()
      /go/tidb/table/tables/partition_test.go:435 +0x126
  github.com/pingcap/tidb/table/tables_test.TestLocatePartition()
      /go/tidb/table/tables/partition_test.go:440 +0x2eb
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1259 +0x22f
  testing.(*T).Run路dwrap路21()
      /usr/local/go/src/testing/testing.go:1306 +0x47
================== 
```

### 2. What did you expect to see? (Required)

### 3. What did you see instead (Required)

### 4. What is your TiDB version? (Required)

<!-- Paste the output of SELECT tidb_version() -->

