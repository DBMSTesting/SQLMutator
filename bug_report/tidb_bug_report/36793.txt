ID: 36793
Title: tidb panic at graceful shutdown
Description:
## Bug Report

Please answer these questions before submitting your issue. Thanks!

### 1. Minimal reproduce step (Required)
use `systemctl stop tidb-4000` to stop a tidb-server during a sysbench test

<!-- a step by step guide for reproducing the bug. -->

### 2. What did you expect to see? (Required)
TiDB should stop gracefully

### 3. What did you see instead (Required)
There is a panic with following stacktrace:
```
fatal error: concurrent map read and map write

goroutine 383 [running]:
runtime.throw({0x3bdd127?, 0xc002831380?})
..../usr/local/go/src/runtime/panic.go:992 +0x71 fp=0xc0168f57d8 sp=0xc0168f57a8 pc=0x13808f1
runtime.mapaccess1_faststr(0xc015484fc0?, 0xc010983f40?, {0xc002831380, 0x7f})
..../usr/local/go/src/runtime/map_faststr.go:22 +0x3a5 fp=0xc0168f5840 sp=0xc0168f57d8 pc=0x135b045
github.com/pingcap/tidb/util/kvcache.(*SimpleLRUCache).Delete(0xc00173a280, {0x4134ae0?, 0xc015484fc0?})
..../data4/gl/tidb/util/kvcache/simple_lru.go:163 +0x70 fp=0xc0168f58a0 sp=0xc0168f5840 pc=0x1991070
github.com/pingcap/tidb/server.(*TiDBStatement).Close(0xc00450bb90)
..../data4/gl/tidb/server/driver_tidb.go:177 +0x185 fp=0xc0168f5918 sp=0xc0168f58a0 pc=0x32bb2a5
github.com/pingcap/tidb/server.(*TiDBStatement).Close-fm()
....<autogenerated>:1 +0x26 fp=0xc0168f5930 sp=0xc0168f5918 pc=0x32f52e6
github.com/pingcap/tidb/parser/terror.Call(0xc0168f5a98?)
..../data4/gl/tidb/parser/terror/terror.go:304 +0x31 fp=0xc0168f5a70 sp=0xc0168f5930 pc=0x173f4d1
github.com/pingcap/tidb/server.(*TiDBContext).Close(0xc002246270)
..../data4/gl/tidb/server/driver_tidb.go:247 +0x90 fp=0xc0168f5b08 sp=0xc0168f5a70 pc=0x32bb850
github.com/pingcap/tidb/server.closeConn(0xc001012b00, 0xc00134cb40?)
..../data4/gl/tidb/server/conn.go:354 +0x1dc fp=0xc0168f5be8 sp=0xc0168f5b08 pc=0x32a191c
github.com/pingcap/tidb/server.(*clientConn).Close(0xc001012b00)
..../data4/gl/tidb/server/conn.go:338 +0x89 fp=0xc0168f5c18 sp=0xc0168f5be8 pc=0x32a1709
github.com/pingcap/tidb/server.(*Server).kickIdleConnection(0xc00064ba40)
..../data4/gl/tidb/server/server.go:804 +0x1e5 fp=0xc0168f5d90 sp=0xc0168f5c18 pc=0x32df8c5
github.com/pingcap/tidb/server.(*Server).GracefulDown(0x0?, {0x4154e60, 0xc00019a000}, 0x32dc020?)
..../data4/gl/tidb/server/server.go:772 +0xf8 fp=0xc0168f5e70 sp=0xc0168f5d90 pc=0x32df4b8
main.cleanup(0xc00064ba40?, {0x41758d8, 0xc0012bb3b0}, 0x0?, 0x0?)
..../data4/gl/tidb/tidb-server/main.go:788 +0x5a fp=0xc0168f5eb0 sp=0xc0168f5e70 pc=0x34a01ba
main.main.func1(0x20?)
..../data4/gl/tidb/tidb-server/main.go:217 +0x6f fp=0xc0168f5f18 sp=0xc0168f5eb0 pc=0x349bd4f
github.com/pingcap/tidb/util/signal.SetupSignalHandler.func2()
..../data4/gl/tidb/util/signal/signal_posix.go:55 +0x202 fp=0xc0168f5fe0 sp=0xc0168f5f18 pc=0x3496e22
runtime.goexit()
..../usr/local/go/src/runtime/asm_amd64.s:1571 +0x1 fp=0xc0168f5fe8 sp=0xc0168f5fe0 pc=0x13b4bc1
created by github.com/pingcap/tidb/util/signal.SetupSignalHandler
..../data4/gl/tidb/util/signal/signal_posix.go:52 +0x19f

goroutine 1 [chan receive]:
main.main()
..../data4/gl/tidb/tidb-server/main.go:223 +0x41d
...
```

I think the root cause  is that `clientconn.Close` is called twice at:
https://github.com/pingcap/tidb/blob/34d877ad2d0f505076c056d526537037b27205fb/server/server.go#L539-L542  

and 

https://github.com/pingcap/tidb/blob/34d877ad2d0f505076c056d526537037b27205fb/server/server.go#L792-L809

### 4. What is your TiDB version? (Required)
nightly

<!-- Paste the output of SELECT tidb_version() -->

