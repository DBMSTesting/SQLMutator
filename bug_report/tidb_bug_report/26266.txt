ID: 26266
Title: v4.0.1 upgrade to 4.0.14, panic in the recoverable goroutine, report invalid memory address or nil pointer dereference
Description:
## Bug Report

Please answer these questions before submitting your issue. Thanks!

### 1. Minimal reproduce step (Required)

```[2021/07/15 12:35:43.746 +08:00] [ERROR] [misc.go:91] ["panic in the recoverable goroutine"] [r="\"invalid memory address or nil pointer dereference\""] ["stack trace"="github.com/pingcap/tidb/util.WithRecovery.func1\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/util/misc.go:93\nruntime.gopanic\n\t/usr/local/go/src/runtime/panic.go:679\nruntime.panicmem\n\t/usr/local/go/src/runtime/panic.go:199\nruntime.sigpanic\n\t/usr/local/go/src/runtime/signal_unix.go:394\ngithub.com/pingcap/parser/model.(*ColumnInfo).GetOriginDefaultValue\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/pkg/mod/github.com/pingcap/parser@v0.0.0-20210421190550-451a84cf120a/model/model.go:147\ngithub.com/pingcap/tidb/table.GetColOriginDefaultValue\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/table/column.go:461\ngithub.com/pingcap/tidb/executor.NewRowDecoder.func2\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/executor/builder.go:3079\ngithub.com/pingcap/tidb/util/rowcodec.(*ChunkDecoder).DecodeToChunk\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/util/rowcodec/decoder.go:249\ngithub.com/pingcap/tidb/executor.DecodeRowValToChunk\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/executor/point_get.go:375\ngithub.com/pingcap/tidb/executor.(*BatchPointGetExec).Next\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/executor/batch_point_get.go:108\ngithub.com/pingcap/tidb/executor.Next\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/executor/executor.go:262\ngithub.com/pingcap/tidb/executor.(*HashJoinExec).fetchBuildSideRows\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/executor/join.go:266\ngithub.com/pingcap/tidb/executor.(*HashJoinExec).fetchAndBuildHashTable.func2\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/executor/join.go:699\ngithub.com/pingcap/tidb/util.WithRecovery\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/util/misc.go:96"]
[2021/07/15 12:35:43.748 +08:00] [WARN] [session.go:1384] ["run statement failed"] [conn=20] [schemaVersion=153] [error="runtime error: invalid memory address or nil pointer dereference"] [session="{\n  \"currDBName\": \"db1__5cbb8343_58ea_46ff_86eb_62f278576eed\",\n  \"id\": 20,\n  \"status\": 3,\n  \"strictMode\": true,\n  \"txn\": \"426331011443589126\",\n  \"user\": {\n    \"Username\": \"root\",\n    \"Hostname\": \"10.0.2.178\",\n    \"CurrentUser\": false,\n    \"AuthUsername\": \"root\",\n    \"AuthHostname\": \"%\"\n  }\n}"]
[2021/07/15 12:35:43.748 +08:00] [INFO] [conn.go:800] ["command dispatched failed"] [conn=20] [connInfo="id:20, addr:10.0.2.178:49106 status:11, collation:utf8mb4_general_ci, user:root"] [command=Query] [status="inTxn:1, autocommit:1"] [sql="(select  * from t1, t2 where t1.c_str = 'fervent tereshkova' ) union all (select /*+ HASH_JOIN(t1,t2) */  * from t1 join t2 on t1.c_int = t2.c_int where t2.c_int in (5, 9, 10) for update)"] [txn_mode=PESSIMISTIC] [err="runtime error: invalid memory address or nil pointer dereference\ngithub.com/pingcap/tidb/executor.(*HashJoinExec).fetchAndBuildHashTable.func3\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/executor/join.go:703\ngithub.com/pingcap/tidb/util.WithRecovery.func1\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/util/misc.go:88\nruntime.gopanic\n\t/usr/local/go/src/runtime/panic.go:679\nruntime.panicmem\n\t/usr/local/go/src/runtime/panic.go:199\nruntime.sigpanic\n\t/usr/local/go/src/runtime/signal_unix.go:394\ngithub.com/pingcap/parser/model.(*ColumnInfo).GetOriginDefaultValue\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/pkg/mod/github.com/pingcap/parser@v0.0.0-20210421190550-451a84cf120a/model/model.go:147\ngithub.com/pingcap/tidb/table.GetColOriginDefaultValue\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/table/column.go:461\ngithub.com/pingcap/tidb/executor.NewRowDecoder.func2\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/executor/builder.go:3079\ngithub.com/pingcap/tidb/util/rowcodec.(*ChunkDecoder).DecodeToChunk\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/util/rowcodec/decoder.go:249\ngithub.com/pingcap/tidb/executor.DecodeRowValToChunk\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/executor/point_get.go:375\ngithub.com/pingcap/tidb/executor.(*BatchPointGetExec).Next\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/executor/batch_point_get.go:108\ngithub.com/pingcap/tidb/executor.Next\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/executor/executor.go:262\ngithub.com/pingcap/tidb/executor.(*HashJoinExec).fetchBuildSideRows\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/executor/join.go:266\ngithub.com/pingcap/tidb/executor.(*HashJoinExec).fetchAndBuildHashTable.func2\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/executor/join.go:699\ngithub.com/pingcap/tidb/util.WithRecovery\n\t/home/jenkins/agent/workspace/optimization-build-tidb-linux-amd/go/src/github.com/pingcap/tidb/util/misc.go:96\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1357"]

[2021/07/15 12:02:05.276 +08:00] [ERROR] [conn.go:728] ["command dispatched failed"] [conn=61] [connInfo="id:61, addr:10.0.2.178:57980 status:11, collation:utf8mb4_general_ci, user:root"] [command=Query] [status="inTxn:1, autocommit:1"] [sql="insert into t (c_int, c_str, c_datetime, c_double) values (11, 'hopeful heyrovsky', '2020-03-17 01:02:17', 38.955678)"] [txn_mode=PESSIMISTIC] [err="[kv:1062]Duplicate entry '11' for key 'c_int'"]
[2021/07/15 12:02:05.469 +08:00] [WARN] [session.go:1040] ["run statement failed"] [conn=61] [schemaVersion=49] [error="cannot convert <nil>(type <nil>) to string"] [session="{\n  \"currDBName\": \"db1__3913ad88_67bc_4794_8c0e_cf40cf67068e\",\n  \"id\": 61,\n  \"status\": 3,\n  \"strictMode\": true,\n  \"txn\": \"426330482298847233\",\n  \"user\": {\n    \"Username\": \"root\",\n    \"Hostname\": \"10.0.2.178\",\n    \"CurrentUser\": false,\n    \"AuthUsername\": \"root\",\n    \"AuthHostname\": \"%\"\n  }\n}"]
@  

[2021/07/15 12:02:05.469 +08:00] [ERROR] [conn.go:728] ["command dispatched failed"] [conn=61] [connInfo="id:61, addr:10.0.2.178:57980 status:11, collation:utf8mb4_general_ci, user:root"] [command=Query] [status="inTxn:1, autocommit:1"] [sql="update t set c_datetime = c_timestamp, c_timestamp = '2020-01-05 13:36:43' where c_str in (null, 'vigorous bell', 'youthful tharp')"] [txn_mode=PESSIMISTIC] [err="cannot convert <nil>(type <nil>) to string\ngithub.com/pingcap/tidb/types.(*Datum).ToString\n\t/home/jenkins/agent/workspace/build-linux-amd64-4.0-githash/go/src/github.com/pingcap/tidb/types/datum.go:1671\ngithub.com/pingcap/tidb/executor.encodeIndexKey\n\t/home/jenkins/agent/workspace/build-linux-amd64-4.0-githash/go/src/github.com/pingcap/tidb/executor/point_get.go:310\ngithub.com/pingcap/tidb/executor.(*BatchPointGetExec).initialize\n\t/home/jenkins/agent/workspace/build-linux-amd64-4.0-githash/go/src/github.com/pingcap/tidb/executor/batch_point_get.go:152\ngithub.com/pingcap/tidb/executor.(*BatchPointGetExec).Next\n\t/home/jenkins/agent/workspace/build-linux-amd64-4.0-githash/go/src/github.com/pingcap/tidb/executor/batch_point_get.go:89\ngithub.com/pingcap/tidb/executor.Next\n\t/home/jenkins/agent/workspace/build-linux-amd64-4.0-githash/go/src/github.com/pingcap/tidb/executor/executor.go:248\ngithub.com/pingcap/tidb/executor.(*UpdateExec).updateRows\n\t/home/jenkins/agent/workspace/build-linux-amd64-4.0-githash/go/src/github.com/pingcap/tidb/executor/update.go:157\ngithub.com/pingcap/tidb/executor.(*UpdateExec).Next\n\t/home/jenkins/agent/workspace/build-linux-amd64-4.0-githash/go/src/github.com/pingcap/tidb/executor/update.go:125\ngithub.com/pingcap/tidb/executor.Next\n\t/home/jenkins/agent/workspace/build-linux-amd64-4.0-githash/go/src/github.com/pingcap/tidb/executor/executor.go:248\ngithub.com/pingcap/tidb/executor.(*ExecStmt).handleNoDelayExecutor\n\t/home/jenkins/agent/workspace/build-linux-amd64-4.0-githash/go/src/github.com/pingcap/tidb/executor/adapter.go:507\ngithub.com/pingcap/tidb/executor.(*ExecStmt).handlePessimisticDML\n\t/home/jenkins/agent/workspace/build-linux-amd64-4.0-githash/go/src/github.com/pingcap/tidb/executor/adapter.go:526\ngithub.com/pingcap/tidb/executor.(*ExecStmt).handleNoDelay\n\t/home/jenkins/agent/workspace/build-linux-amd64-4.0-githash/go/src/github.com/pingcap/tidb/executor/adapter.go:387\ngithub.com/pingcap/tidb/executor.(*ExecStmt).Exec\n\t/home/jenkins/agent/workspace/build-linux-amd64-4.0-githash/go/src/github.com/pingcap/tidb/executor/adapter.go:357\ngithub.com/pingcap/tidb/session.runStmt\n\t/home/jenkins/agent/workspace/build-linux-amd64-4.0-githash/go/src/github.com/pingcap/tidb/session/tidb.go:276\ngithub.com/pingcap/tidb/session.(*session).executeStatement\n\t/home/jenkins/agent/workspace/build-linux-amd64-4.0-githash/go/src/github.com/pingcap/tidb/session/session.go:1037\ngithub.com/pingcap/tidb/session.(*session).execute\n\t/home/jenkins/agent/workspace/build-linux-amd64-4.0-githash/go/src/github.com/pingcap/tidb/session/session.go:1150\ngithub.com/pingcap/tidb/session.(*session).Execute\n\t/home/jenkins/agent/workspace/build-linux-amd64-4.0-githash/go/src/github.com/pingcap/tidb/session/session.go:1080\ngithub.com/pingcap/tidb/server.(*TiDBContext).Execute\n\t/home/jenkins/agent/workspace/build-linux-amd64-4.0-githash/go/src/github.com/pingcap/tidb/server/driver_tidb.go:248\ngithub.com/pingcap/tidb/server.(*clientConn).handleQuery\n\t/home/jenkins/agent/workspace/build-linux-amd64-4.0-githash/go/src/github.com/pingcap/tidb/server/conn.go:1265\ngithub.com/pingcap/tidb/server.(*clientConn).dispatch\n\t/home/jenkins/agent/workspace/build-linux-amd64-4.0-githash/go/src/github.com/pingcap/tidb/server/conn.go:899\ngithub.com/pingcap/tidb/server.(*clientConn).Run\n\t/home/jenkins/agent/workspace/build-linux-amd64-4.0-githash/go/src/github.com/pingcap/tidb/server/conn.go:713\ngithub.com/pingcap/tidb/server.(*Server).onConn\n\t/home/jenkins/agent/workspace/build-linux-amd64-4.0-githash/go/src/github.com/pingcap/tidb/server/server.go:415\nruntime.goexit\n\t/usr/local/go/src/runtime/asm_amd64.s:1357"]
 ```                                                                                                   
### 2. What did you expect to see? (Required)

### 3. What did you see instead (Required)

### 4. What is your TiDB version? (Required)

<!-- Paste the output of SELECT tidb_version() -->

