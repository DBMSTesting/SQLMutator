ID: 2158
Title: Local store related panic that can not be easily reproduce.
Description:
During a unit test, a panic occurred with this stack.
It appears that local store transaction has been commited more than one time.

```
[stream 0] panic: assignment to entry in nil map
[stream 0] 
[stream 0] goroutine 38 [running]:
[stream 0] panic(0x1004b20, 0xc42076bd60)
[stream 0] 	/usr/local/go/src/runtime/panic.go:500 +0x1ae
[stream 0] github.com/pingcap/tidb/store/localstore.(*dbTxn).LockKeys(0xc4207a4e80, 0xc4201198f8, 0x1, 0x1, 0x5f17a9, 0xc4207ca100)
[stream 0] 	/home/jenkins/workspace/BUILD_TIDB_WORKFLOW/go/src/github.com/pingcap/tidb/store/localstore/txn.go:132 +0xde
[stream 0] github.com/pingcap/tidb/store/localstore.(*dbTxn).doCommit.func1(0xc4207c7000, 0x13, 0x1000, 0xc4207c7013, 0xc, 0xfed, 0x0, 0x0)
[stream 0] 	/home/jenkins/workspace/BUILD_TIDB_WORKFLOW/go/src/github.com/pingcap/tidb/store/localstore/txn.go:94 +0xb9
[stream 0] github.com/pingcap/tidb/kv.(*BufferStore).WalkBuffer(0xc4207aeb60, 0xc42076bd50, 0x0, 0x0)
[stream 0] 	/home/jenkins/workspace/BUILD_TIDB_WORKFLOW/go/src/github.com/pingcap/tidb/kv/buffer_store.go:89 +0x183
[stream 0] github.com/pingcap/tidb/kv.(*unionStore).WalkBuffer(0xc4207c41b0, 0xc42076bd50, 0x0, 0xc420119a28)
[stream 0] 	<autogenerated>:59 +0x6e
[stream 0] github.com/pingcap/tidb/store/localstore.(*dbTxn).doCommit(0xc4207a4e80, 0x12a26f8, 0xc4207a4e80)
[stream 0] 	/home/jenkins/workspace/BUILD_TIDB_WORKFLOW/go/src/github.com/pingcap/tidb/store/localstore/txn.go:96 +0x13c
[stream 0] github.com/pingcap/tidb/store/localstore.(*dbTxn).Commit(0xc4207a4e80, 0x0, 0x0)
[stream 0] 	/home/jenkins/workspace/BUILD_TIDB_WORKFLOW/go/src/github.com/pingcap/tidb/store/localstore/txn.go:113 +0x13a
[stream 0] github.com/pingcap/tidb/util/mock.(*Context).finishTxn(0xc42030eb80, 0x100000000000000, 0x0, 0x0)
[stream 0] 	/home/jenkins/workspace/BUILD_TIDB_WORKFLOW/go/src/github.com/pingcap/tidb/util/mock/context.go:96 +0x10e
[stream 0] github.com/pingcap/tidb/util/mock.(*Context).CommitTxn(0xc42030eb80, 0x16b9540, 0xc42030eb80)
[stream 0] 	/home/jenkins/workspace/BUILD_TIDB_WORKFLOW/go/src/github.com/pingcap/tidb/util/mock/context.go:101 +0x3e
[stream 0] github.com/pingcap/tidb/ddl.(*testColumnChangeSuite).checkAddPublic(0xc420223d20, 0xc4201de000, 0x16b9540, 0xc42030eb80, 0x16be600, 0xc4200d69c0, 0x16be600, 0xc4200d7a00, 0xc420119ce8, 0x43dfa3)
[stream 0] 	/home/jenkins/workspace/BUILD_TIDB_WORKFLOW/go/src/github.com/pingcap/tidb/ddl/column_change_test.go:274 +0x830
[stream 0] github.com/pingcap/tidb/ddl.(*testColumnChangeSuite).TestColumnChange.func1(0xc420083c20)
[stream 0] 	/home/jenkins/workspace/BUILD_TIDB_WORKFLOW/go/src/github.com/pingcap/tidb/ddl/column_change_test.go:108 +0x314
[stream 0] github.com/pingcap/tidb/ddl.(*testDDLCallback).OnJobUpdated(0xc420316340, 0xc420083c20)
[stream 0] 	/home/jenkins/workspace/BUILD_TIDB_WORKFLOW/go/src/github.com/pingcap/tidb/ddl/callback_test.go:41 +0x7c
[stream 0] github.com/pingcap/tidb/ddl.(*ddl).handleDDLJobQueue(0xc4201de000, 0xc42019c780, 0x0)
[stream 0] 	/home/jenkins/workspace/BUILD_TIDB_WORKFLOW/go/src/github.com/pingcap/tidb/ddl/ddl_worker.go:303 +0x1ec
[stream 0] github.com/pingcap/tidb/ddl.(*ddl).onDDLWorker(0xc4201de000)
[stream 0] 	/home/jenkins/workspace/BUILD_TIDB_WORKFLOW/go/src/github.com/pingcap/tidb/ddl/ddl_worker.go:50 +0x2a4
[stream 0] created by github.com/pingcap/tidb/ddl.(*ddl).start
[stream 0] 	/home/jenkins/workspace/BUILD_TIDB_WORKFLOW/go/src/github.com/pingcap/tidb/ddl/ddl.go:228 +0xed
```

