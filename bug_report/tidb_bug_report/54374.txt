ID: 54374
Title: DATA RACE at the github.com/tikv/client-go/v2/txnkv/transaction.(*KVTxn).StartTS()
Description:
## Bug Report

Please answer these questions before submitting your issue. Thanks!

### 1. Minimal reproduce step (Required)

<!-- a step by step guide for reproducing the bug. -->

### 2. What did you expect to see? (Required)

### 3. What did you see instead (Required)

```
==================
WARNING: DATA RACE
Read at 0x00c0017247a0 by goroutine 33385:
  github.com/tikv/client-go/v2/txnkv/transaction.(*KVTxn).StartTS()
      external/com_github_tikv_client_go_v2/txnkv/transaction/txn.go:1635 +0x4c
  github.com/pingcap/tidb/pkg/store/driver/txn.(*tikvTxn).StartTS()
      <autogenerated>:1 +0x17
  github.com/pingcap/tidb/pkg/session.(*LazyTxn).StartTS()
      <autogenerated>:1 +0x46
  github.com/pingcap/tidb/pkg/testkit.(*MockSessionManager).GetInternalSessionStartTSList()
      pkg/testkit/mocksessionmanager.go:165 +0x2d5
  github.com/pingcap/tidb/pkg/domain/infosync.(*InfoSyncer).ReportMinStartTS()
      pkg/domain/infosync/info.go:756 +0x8b
  github.com/pingcap/tidb/pkg/domain.(*Domain).infoSyncerKeeper()
      pkg/domain/domain.go:743 +0x564
  github.com/pingcap/tidb/pkg/domain.(*Domain).infoSyncerKeeper-fm()
      <autogenerated>:1 +0x33
  github.com/pingcap/tidb/pkg/util.(*WaitGroupEnhancedWrapper).Run.func1()
      pkg/util/wait_group_wrapper.go:99 +0xd2
Previous write at 0x00c0017247a0 by goroutine 33382:
  github.com/tikv/client-go/v2/txnkv/transaction.NewTiKVTxn()
      external/com_github_tikv_client_go_v2/txnkv/transaction/txn.go:175 +0xb6
  github.com/tikv/client-go/v2/tikv.(*KVStore).Begin()
      external/com_github_tikv_client_go_v2/tikv/kv.go:382 +0x419
  github.com/pingcap/tidb/pkg/store/mockstore/mockstorage.(*mockStorage).Begin()
      pkg/store/mockstore/mockstorage/storage.go:81 +0x57
  github.com/pingcap/tidb/pkg/session.(*txnFuture).wait()
      pkg/session/txn.go:713 +0xd43
  github.com/pingcap/tidb/pkg/session.(*LazyTxn).changePendingToValid()
      pkg/session/txn.go:297 +0x186
  github.com/pingcap/tidb/pkg/session.(*LazyTxn).Wait()
      pkg/session/txn.go:615 +0x279
  github.com/pingcap/tidb/pkg/sessiontxn/isolation.(*baseTxnContextProvider).ActivateTxn()
      pkg/sessiontxn/isolation/base.go:290 +0x176
  github.com/pingcap/tidb/pkg/sessiontxn/isolation.(*baseTxnContextProvider).GetStmtReadTS()
      pkg/sessiontxn/isolation/base.go:186 +0x2e
  github.com/pingcap/tidb/pkg/sessiontxn/isolation.(*OptimisticTxnContextProvider).GetStmtReadTS()
      pkg/sessiontxn/isolation/optimistic.go:100 +0x64
  github.com/pingcap/tidb/pkg/session.(*txnManager).GetStmtReadTS()
      pkg/session/txnmanager.go:98 +0x117
  github.com/pingcap/tidb/pkg/executor.(*executorBuilder).getSnapshotTS()
      pkg/executor/builder.go:2024 +0x149
  github.com/pingcap/tidb/pkg/executor.buildNoRangeTableReader()
      pkg/executor/builder.go:3432 +0x3d9
  github.com/pingcap/tidb/pkg/executor.(*executorBuilder).buildTableReader()
      pkg/executor/builder.go:3579 +0x993
  github.com/pingcap/tidb/pkg/executor.(*executorBuilder).build()
      pkg/executor/builder.go:288 +0x1744
  github.com/pingcap/tidb/pkg/executor.(*ExecStmt).buildExecutor()
      pkg/executor/adapter.go:1211 +0x3cd
  github.com/pingcap/tidb/pkg/executor.(*ExecStmt).Exec()
      pkg/executor/adapter.go:560 +0xdb4
  github.com/pingcap/tidb/pkg/session.runStmt()
      pkg/session/session.go:2296 +0x5d3
  github.com/pingcap/tidb/pkg/session.(*session).ExecuteStmt()
      pkg/session/session.go:2157 +0x1ac4
  github.com/pingcap/tidb/pkg/session.(*session).ExecuteInternalStmt()
      pkg/session/session.go:2009 +0x1e9
  github.com/pingcap/tidb/pkg/session.(*session).ExecRestrictedSQL.func1()
      pkg/session/session.go:1974 +0x2d7
  github.com/pingcap/tidb/pkg/session.(*session).withRestrictedSQLExecutor()
      pkg/session/session.go:1960 +0x3b6
  github.com/pingcap/tidb/pkg/session.(*session).ExecRestrictedSQL()
      pkg/session/session.go:1964 +0x144
  github.com/pingcap/tidb/pkg/domain.(*Domain).refreshMDLCheckTableInfo()
      pkg/domain/domain.go:822 +0x4ec
  github.com/pingcap/tidb/pkg/domain.(*Domain).loadSchemaInLoop()
      pkg/domain/domain.go:977 +0x166
  github.com/pingcap/tidb/pkg/domain.(*Domain).Init.func2()
      pkg/domain/domain.go:1310 +0x54
  github.com/pingcap/tidb/pkg/util.(*WaitGroupEnhancedWrapper).Run.func1()
      pkg/util/wait_group_wrapper.go:99 +0xd2
Goroutine 33385 (running) created at:
  github.com/pingcap/tidb/pkg/util.(*WaitGroupEnhancedWrapper).Run()
      pkg/util/wait_group_wrapper.go:94 +0x145
  github.com/pingcap/tidb/pkg/domain.(*Domain).Init()
      pkg/domain/domain.go:1315 +0x20af
  github.com/pingcap/tidb/pkg/session.(*domainMap).Get.func1()
      pkg/session/tidb.go:92 +0x559
  github.com/pingcap/tidb/pkg/util.RunWithRetry()
      pkg/util/misc.go:70 +0x84
  github.com/pingcap/tidb/pkg/session.(*domainMap).Get()
      pkg/session/tidb.go:79 +0x2eb
  github.com/pingcap/tidb/pkg/session.createSessionWithOpt()
      pkg/session/session.go:3696 +0x6c
  github.com/pingcap/tidb/pkg/session.createSession()
      pkg/session/session.go:3688 +0x35
  github.com/pingcap/tidb/pkg/session.createSessionsImpl()
      pkg/session/session.go:3673 +0x81
  github.com/pingcap/tidb/pkg/session.createSessions()
      pkg/session/session.go:3660 +0x44
  github.com/pingcap/tidb/pkg/session.bootstrapSessionImpl()
      pkg/session/session.go:3444 +0x4cd
  github.com/pingcap/tidb/pkg/session.BootstrapSession()
      pkg/session/session.go:3376 +0xad
  github.com/pingcap/tidb/pkg/testkit.bootstrap()
      pkg/testkit/mockstore.go:254 +0x94
  github.com/pingcap/tidb/pkg/testkit.CreateMockStoreAndDomain()
      pkg/testkit/mockstore.go:225 +0xd2
  github.com/pingcap/tidb/pkg/testkit.CreateMockStore()
      pkg/testkit/mockstore.go:70 +0x3dd
  github.com/pingcap/tidb/pkg/planner/core_test.TestTooLongBinaryPlan()
      pkg/planner/core/binary_plan_test.go:125 +0x2f5
  testing.tRunner()
      GOROOT/src/testing/testing.go:1595 +0x261
  testing.(*T).Run.func1()
      GOROOT/src/testing/testing.go:1648 +0x44
Goroutine 33382 (running) created at:
  github.com/pingcap/tidb/pkg/util.(*WaitGroupEnhancedWrapper).Run()
      pkg/util/wait_group_wrapper.go:94 +0x145
  github.com/pingcap/tidb/pkg/domain.(*Domain).Init()
      pkg/domain/domain.go:1309 +0x1ea4
  github.com/pingcap/tidb/pkg/session.(*domainMap).Get.func1()
      pkg/session/tidb.go:92 +0x559
  github.com/pingcap/tidb/pkg/util.RunWithRetry()
      pkg/util/misc.go:70 +0x84
  github.com/pingcap/tidb/pkg/session.(*domainMap).Get()
      pkg/session/tidb.go:79 +0x2eb
  github.com/pingcap/tidb/pkg/session.createSessionWithOpt()
      pkg/session/session.go:3696 +0x6c
  github.com/pingcap/tidb/pkg/session.createSession()
      pkg/session/session.go:3688 +0x35
  github.com/pingcap/tidb/pkg/session.createSessionsImpl()
      pkg/session/session.go:3673 +0x81
  github.com/pingcap/tidb/pkg/session.createSessions()
      pkg/session/session.go:3660 +0x44
  github.com/pingcap/tidb/pkg/session.bootstrapSessionImpl()
      pkg/session/session.go:3444 +0x4cd
  github.com/pingcap/tidb/pkg/session.BootstrapSession()
      pkg/session/session.go:3376 +0xad
  github.com/pingcap/tidb/pkg/testkit.bootstrap()
      pkg/testkit/mockstore.go:254 +0x94
  github.com/pingcap/tidb/pkg/testkit.CreateMockStoreAndDomain()
      pkg/testkit/mockstore.go:225 +0xd2
  github.com/pingcap/tidb/pkg/testkit.CreateMockStore()
      pkg/testkit/mockstore.go:70 +0x3dd
  github.com/pingcap/tidb/pkg/planner/core_test.TestTooLongBinaryPlan()
      pkg/planner/core/binary_plan_test.go:125 +0x2f5
  testing.tRunner()
      GOROOT/src/testing/testing.go:1595 +0x261
  testing.(*T).Run.func1()
      GOROOT/src/testing/testing.go:1648 +0x44
================== 
```
### 4. What is your TiDB version? (Required)

<!-- Paste the output of SELECT tidb_version() -->

