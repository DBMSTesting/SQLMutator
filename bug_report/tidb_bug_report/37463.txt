ID: 37463
Title: DATA RACE in the TestInitMetaTable
Description:
## Bug Report

Please answer these questions before submitting your issue. Thanks!

### 1. Minimal reproduce step (Required)

```
 WARNING: DATA RACE
Write at 0x00c0012c4d00 by goroutine 1047412:
  github.com/pingcap/tidb/session_test.TestInitMetaTable()
      session/session_test.go:49 +0x358
  testing.tRunner()
      GOROOT/src/testing/testing.go:1446 +0x216
  testing.(*T).Run.func1()
      GOROOT/src/testing/testing.go:1493 +0x47
Previous read at 0x00c0012c4d00 by goroutine 1057452:
  github.com/pingcap/tidb/infoschema.(*infoSchema).SchemaByTable()
      infoschema/infoschema.go:241 +0x188
  github.com/pingcap/tidb/planner/core.(*preprocessor).handleTableName()
      planner/core/preprocess.go:1485 +0x51d
  github.com/pingcap/tidb/planner/core.(*preprocessor).Leave()
      planner/core/preprocess.go:513 +0xfe
  github.com/pingcap/tidb/parser/ast.(*TableName).Accept()
      parser/ast/dml.go:439 +0x1e3
  github.com/pingcap/tidb/parser/ast.(*TableSource).Accept()
      parser/ast/dml.go:591 +0x9a
  github.com/pingcap/tidb/parser/ast.(*Join).Accept()
      parser/ast/dml.go:241 +0xc7
  github.com/pingcap/tidb/parser/ast.(*TableRefsClause).Accept()
      parser/ast/dml.go:792 +0x95
  github.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept()
      parser/ast/dml.go:1449 +0x514
  github.com/pingcap/tidb/parser/ast.(*SubqueryExpr).Accept()
      parser/ast/expressions.go:396 +0xa7
  github.com/pingcap/tidb/parser/ast.(*PatternInExpr).Accept()
      parser/ast/expressions.go:761 +0x21e
  github.com/pingcap/tidb/parser/ast.(*BinaryOperationExpr).Accept()
      parser/ast/expressions.go:211 +0xa7
  github.com/pingcap/tidb/parser/ast.(*SelectStmt).Accept()
      parser/ast/dml.go:1457 +0x5ce
  github.com/pingcap/tidb/planner/core.Preprocess()
      planner/core/preprocess.go:121 +0x367
  github.com/pingcap/tidb/executor.(*Compiler).Compile()
      executor/compiler.go:61 +0x395
  github.com/pingcap/tidb/session.(*session).ExecuteStmt()
      session/session.go:2025 +0x7d4
  github.com/pingcap/tidb/session.(*session).ExecuteInternal()
      session/session.go:1539 +0x471
  github.com/pingcap/tidb/ddl.(*session).execute()
      ddl/ddl.go:1643 +0x1ee
  github.com/pingcap/tidb/ddl.(*ddl).getJob()
      ddl/job_table.go:98 +0x1aa
  github.com/pingcap/tidb/ddl.(*ddl).getReorgJob()
      ddl/job_table.go:146 +0x69
  github.com/pingcap/tidb/ddl.(*ddl).getReorgJob-fm()
      <autogenerated>:1 +0x44
  github.com/pingcap/tidb/ddl.(*ddl).loadDDLJobAndRun()
      ddl/job_table.go:204 +0x41d
  github.com/pingcap/tidb/ddl.(*ddl).startDispatchLoop()
      ddl/job_table.go:189 +0xb05
  github.com/pingcap/tidb/ddl.(*ddl).startDispatchLoop-fm()
      <autogenerated>:1 +0x39
  github.com/pingcap/tidb/util.(*WaitGroupWrapper).Run.func1()
      util/wait_group_wrapper.go:33 +0x73
Goroutine 1047412 (running) created at:
  testing.(*T).Run()
      GOROOT/src/testing/testing.go:1493 +0x75d
  testing.runTests.func1()
      GOROOT/src/testing/testing.go:1846 +0x99
  testing.tRunner()
      GOROOT/src/testing/testing.go:1446 +0x216
  testing.runTests()
      GOROOT/src/testing/testing.go:1844 +0x7ec
  testing.(*M).Run()
      GOROOT/src/testing/testing.go:1726 +0xa84
  github.com/pingcap/tidb/testkit/testmain.(*testingM).Run()
      testkit/testmain/wrapper.go:27 +0x42
  go.uber.org/goleak.VerifyTestMain()
      external/org_uber_go_goleak/testmain.go:53 +0x59
  github.com/pingcap/tidb/session.TestMain()
      session/main_test.go:77 +0xe19
  main.main()
      bazel-out/k8-fastbuild/bin/session/session_test_/testmain.go:328 +0x5e8
Goroutine 1057452 (running) created at:
  github.com/pingcap/tidb/util.(*WaitGroupWrapper).Run()
      util/wait_group_wrapper.go:31 +0xe4
  github.com/pingcap/tidb/ddl.(*ddl).prepareWorkers4ConcurrencyDDL()
      ddl/ddl.go:624 +0x45e
  github.com/pingcap/tidb/ddl.(*ddl).Start()
      ddl/ddl.go:660 +0x5f4
  github.com/pingcap/tidb/domain.(*Domain).Init()
      domain/domain.go:891 +0x134c
  github.com/pingcap/tidb/session.(*domainMap).Get.func1()
      session/tidb.go:93 +0x6c4
  github.com/pingcap/tidb/util.RunWithRetry()
      util/misc.go:69 +0x93
  github.com/pingcap/tidb/session.(*domainMap).Get()
      session/tidb.go:76 +0x258
  github.com/pingcap/tidb/session.createSessionWithOpt()
      session/session.go:2946 +0x75
  github.com/pingcap/tidb/session.createSession()
      session/session.go:2942 +0x84
  github.com/pingcap/tidb/session.createSessions()
      session/session.go:2931 +0x6e
  github.com/pingcap/tidb/session.BootstrapSession()
      session/session.go:2809 +0x317
  github.com/pingcap/tidb/testkit.bootstrap()
      testkit/mockstore.go:69 +0x8c
  github.com/pingcap/tidb/testkit.CreateMockStoreAndDomain()
      testkit/mockstore.go:63 +0x10f
  github.com/pingcap/tidb/testkit.CreateMockStore()
      testkit/mockstore.go:55 +0x356
  github.com/pingcap/tidb/session_test.TestInitMetaTable()
      session/session_test.go:28 +0x58
  testing.tRunner()
      GOROOT/src/testing/testing.go:1446 +0x216
  testing.(*T).Run.func1()
      GOROOT/src/testing/testing.go:1493 +0x47 
```
<!-- a step by step guide for reproducing the bug. -->

### 2. What did you expect to see? (Required)

### 3. What did you see instead (Required)

### 4. What is your TiDB version? (Required)

<!-- Paste the output of SELECT tidb_version() -->

