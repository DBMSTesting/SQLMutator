ID: 37927
Title: DATA RACE in the metadatalocktest
Description:
## Bug Report

Please answer these questions before submitting your issue. Thanks!

### 1. Minimal reproduce step (Required)

```
==================
WARNING: DATA RACE
Read at 0x00c006c54f90 by goroutine 10335:
  github.com/pingcap/tidb/sessionctx/variable.(*SessionVars).GetRelatedTableForMDL()
      sessionctx/variable/session.go:3055 +0x116
  github.com/pingcap/tidb/session.RemoveLockDDLJobs()
      session/session.go:3539 +0x93
  github.com/pingcap/tidb/server.(*Server).CheckOldRunningTxn()
      server/server.go:881 +0x1f6
  github.com/pingcap/tidb/domain.(*Domain).mdlCheckLoop()
      domain/domain.go:692 +0x6ea
  github.com/pingcap/tidb/domain.(*Domain).mdlCheckLoop-fm()
      <autogenerated>:1 +0x39
  github.com/pingcap/tidb/util.(*WaitGroupWrapper).Run.func1()
      util/wait_group_wrapper.go:33 +0x73
Previous write at 0x00c006c54f90 by goroutine 81:
  github.com/pingcap/tidb/sessionctx/variable.(*TransactionContext).Cleanup()
      sessionctx/variable/session.go:328 +0x1cb
  github.com/pingcap/tidb/session.(*session).CommitTxn()
      session/session.go:1018 +0x466
  github.com/pingcap/tidb/session.autoCommitAfterStmt()
      session/tidb.go:283 +0x3da
  github.com/pingcap/tidb/session.finishStmt()
      session/tidb.go:249 +0x3ab
  github.com/pingcap/tidb/session.runStmt()
      session/session.go:2215 +0x9ae
  github.com/pingcap/tidb/session.(*session).ExecuteStmt()
      session/session.go:2068 +0x1005
  github.com/pingcap/tidb/testkit.(*TestKit).ExecWithContext()
      testkit/testkit.go:278 +0x5bb
  github.com/pingcap/tidb/testkit.(*TestKit).MustExecWithContext()
      testkit/testkit.go:118 +0xb7
  github.com/pingcap/tidb/testkit.(*TestKit).MustExec()
      testkit/testkit.go:113 +0x95b
  ddl/metadatalocktest/metadatalocktest_test.TestMDLBasicSelect()
      ddl/metadatalocktest/mdl_test.go:63 +0x91f
  testing.tRunner()
      GOROOT/src/testing/testing.go:1446 +0x216
  testing.(*T).Run.func1()
      GOROOT/src/testing/testing.go:1493 +0x47
Goroutine 10335 (running) created at:
  github.com/pingcap/tidb/util.(*WaitGroupWrapper).Run()
      util/wait_group_wrapper.go:31 +0xe4
  github.com/pingcap/tidb/domain.(*Domain).Init()
      domain/domain.go:1026 +0x14fb
  github.com/pingcap/tidb/session.(*domainMap).Get.func1()
      session/tidb.go:93 +0x6c4
  github.com/pingcap/tidb/util.RunWithRetry()
      util/misc.go:69 +0x93
  github.com/pingcap/tidb/session.(*domainMap).Get()
      session/tidb.go:76 +0x258
  github.com/pingcap/tidb/session.createSessionWithOpt()
      session/session.go:2882 +0x75
  github.com/pingcap/tidb/session.createSession()
      session/session.go:2878 +0x84
  github.com/pingcap/tidb/session.createSessions()
      session/session.go:2867 +0x6e
  github.com/pingcap/tidb/session.BootstrapSession()
      session/session.go:2743 +0x337
  github.com/pingcap/tidb/testkit.bootstrap()
      testkit/mockstore.go:72 +0x8c
  github.com/pingcap/tidb/testkit.CreateMockStoreAndDomain()
      testkit/mockstore.go:63 +0xe9
  ddl/metadatalocktest/metadatalocktest_test.TestMDLBasicSelect()
      ddl/metadatalocktest/mdl_test.go:32 +0x58
  testing.tRunner()
      GOROOT/src/testing/testing.go:1446 +0x216
  testing.(*T).Run.func1()
      GOROOT/src/testing/testing.go:1493 +0x47
Goroutine 81 (running) created at:
  testing.(*T).Run()
      GOROOT/src/testing/testing.go:1493 +0x75d
  testing.runTests.func1()
      GOROOT/src/testing/testing.go:1846 +0x99
  testing.tRunner()
      GOROOT/src/testing/testing.go:1446 +0x216
  testing.runTests()
      GOROOT/src/testing/testing.go:1844 +0x7ec
  testing.(*M).Run()
      GOROOT/src/testing/testing.go:1726 +0xa84
  go.uber.org/goleak.VerifyTestMain()
      external/org_uber_go_goleak/testmain.go:53 +0x59
  ddl/metadatalocktest/metadatalocktest_test.TestMain()
      ddl/metadatalocktest/main_test.go:43 +0x338
  main.main()
      bazel-out/k8-fastbuild/bin/ddl/metadatalocktest/metadatalocktest_test_/testmain.go:146 +0x5e8
================== 
```
<!-- a step by step guide for reproducing the bug. -->

### 2. What did you expect to see? (Required)

### 3. What did you see instead (Required)

### 4. What is your TiDB version? (Required)

<!-- Paste the output of SELECT tidb_version() -->

