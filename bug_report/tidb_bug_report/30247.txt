ID: 30247
Title: Unstable test ```planner/core/integration_partition_test.go``` when ```make race ```
Description:
## Bug Report

Please answer these questions before submitting your issue. Thanks!

### 1. Minimal reproduce step (Required)

make race
<!-- a step by step guide for reproducing the bug. -->

### 2. What did you expect to see? (Required)

Nothing
### 3. What did you see instead (Required)

```
 WARNING: DATA RACE
Read at 0x00c000fd6230 by goroutine 280:
  github.com/pingcap/tidb/sessionctx/stmtctx.(*StatementContext).GetResourceGroupTagByLabel()
      /go/tidb/sessionctx/stmtctx/stmtctx.go:308 +0x8c
  github.com/pingcap/tidb/sessionctx/stmtctx.(*StatementContext).GetResourceGroupTagger.func1()
      /go/tidb/sessionctx/stmtctx/stmtctx.go:294 +0xa4
  github.com/tikv/client-go/v2/txnkv/transaction.actionCommit.handleSingleBatch()
      /home/prow/go/pkg/mod/github.com/tikv/client-go/v2@v2.0.0-alpha.0.20211118154139-b11da6307c6f/txnkv/transaction/commit.go:77 +0x2c64
  github.com/tikv/client-go/v2/txnkv/transaction.(*actionCommit).handleSingleBatch()
      <autogenerated>:1 +0xe6
  github.com/tikv/client-go/v2/txnkv/transaction.(*batchExecutor).startWorker.func1()
      /home/prow/go/pkg/mod/github.com/tikv/client-go/v2@v2.0.0-alpha.0.20211118154139-b11da6307c6f/txnkv/transaction/2pc.go:1804 +0x533
Previous write at 0x00c000fd6230 by goroutine 191:
  github.com/pingcap/tidb/sessionctx/stmtctx.(*StatementContext).SetPlanDigest()
      /go/tidb/sessionctx/stmtctx/stmtctx.go:314 +0x1a4
  github.com/pingcap/tidb/executor.getPlanDigest()
      /go/tidb/executor/adapter.go:1101 +0x111
  github.com/pingcap/tidb/executor.(*ExecStmt).LogSlowQuery()
      /go/tidb/executor/adapter.go:986 +0x96d
  github.com/pingcap/tidb/executor.(*ExecStmt).FinishExecuteStmt()
      /go/tidb/executor/adapter.go:897 +0x1e7
  github.com/pingcap/tidb/session.runStmt()
      /go/tidb/session/session.go:1717 +0x6ba
  github.com/pingcap/tidb/session.(*session).ExecuteStmt()
      /go/tidb/session/session.go:1582 +0xc50
  github.com/pingcap/tidb/session.(*session).ExecuteInternal()
      /go/tidb/session/session.go:1295 +0x284
  github.com/pingcap/tidb/session.doDMLWorks()
      /go/tidb/session/bootstrap.go:1775 +0x1dd2
  github.com/pingcap/tidb/session.bootstrap()
      /go/tidb/session/bootstrap.go:383 +0x1c4
  github.com/pingcap/tidb/session.runInBootstrapSession()
      /go/tidb/session/session.go:2597 +0xe7
  github.com/pingcap/tidb/session.BootstrapSession()
      /go/tidb/session/session.go:2446 +0xfd
  github.com/pingcap/tidb/testkit.bootstrap()
      /go/tidb/testkit/mockstore.go:49 +0x84
  github.com/pingcap/tidb/testkit.CreateMockStoreAndDomain()
      /go/tidb/testkit/mockstore.go:42 +0x114
  github.com/pingcap/tidb/testkit.CreateMockStore()
      /go/tidb/testkit/mockstore.go:34 +0x84
  github.com/pingcap/tidb/planner/core_test.TestIssue27493()
      /go/tidb/planner/core/integration_partition_test.go:1099 +0x56
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:1193 +0x202 
```
### 4. What is your TiDB version? (Required)

master
<!-- Paste the output of SELECT tidb_version() -->

