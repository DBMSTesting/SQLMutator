{
    "pattern": "CREATE TABLE test_txn_schd_queue_tbl (txn_id bigint(16) NOT NULL, col1 varchar(100), col2 varchar(100), override_routing_no_upd varchar(1) CHARACTER SET utf8 COLLATE utf8_bin DEFAULT <dml_values_parameter>, schld_id bigint(16) DEFAULT <dml_values_parameter>, schld_row_id bigint(16) DEFAULT <dml_values_parameter>, outbound_file_id bigint(12) DEFAULT <dml_values_parameter>, outbound_file_type int(4) DEFAULT <dml_values_parameter>, txn_status_code int(3) DEFAULT <dml_values_parameter>, txn_sub_status_code int(4) DEFAULT <dml_values_parameter>, partner_id bigint(12) DEFAULT <dml_values_parameter>, txn_schld_date datetime DEFAULT <dml_values_parameter>, PRIMARY KEY (txn_id), KEY test_txn_schd_queue_tbl_rtno_idx (override_routing_no_upd), KEY test_txn_schd_queue_tbl_idx1 (schld_id,schld_row_id), KEY test_txn_schd_queue_tbl_idx2 (outbound_file_id), KEY test_txn_schd_queue_tbl_idx3 (outbound_file_type,txn_status_code,txn_sub_status_code), KEY test_txn_schd_queue_tbl_idx4 (partner_id,txn_schld_date)) ENGINE=InnoDB DEFAULT CHARSET=utf8; INSERT INTO test_txn_main_tbl(txn_id, col1, col2, override_routing_no_upd, outbound_file_id, outbound_file_type, txn_status_code, txn_sub_status_code, partner_id, txn_schld_date) VALUES(<dml_values_parameter>); INSERT INTO test_txn_schd_queue_tbl(txn_id, col1, col2, override_routing_no_upd, schld_id, schld_row_id, outbound_file_id, outbound_file_type, txn_status_code, txn_sub_status_code, partner_id, txn_schld_date) SELECT txn_id, col1, col2, override_routing_no_upd, 9974590 as schld_id, (@ROWNUM:=@ROWNUM+1) as schld_row_id, outbound_file_id, outbound_file_type, txn_status_code, txn_sub_status_code, partner_id, txn_schld_date FROM test_txn_main_tbl, (SELECT @ROWNUM:=0) a WHERE txn_id IN (<dml_values_parameter>); BEGIN; INSERT INTO test_txn_schd_queue_tbl(txn_id, col1, col2, override_routing_no_upd, schld_id, schld_row_id, outbound_file_id, outbound_file_type, txn_status_code, txn_sub_status_code, partner_id, txn_schld_date) SELECT txn_id, col1, col2, override_routing_no_upd, 9974687 as schld_id, (@ROWNUM:=@ROWNUM+1) as schld_row_id, outbound_file_id, outbound_file_type, txn_status_code, txn_sub_status_code, partner_id, txn_schld_date FROM test_txn_main_tbl, (SELECT @ROWNUM:=0) a WHERE txn_id NOT IN (<dml_values_parameter>); UPDATE test_txn_schd_queue_tbl SET col1 = <dml_values_parameter> WHERE schld_id = <dml_values_parameter> and schld_row_id <comparison_operator_replace> <dml_values_parameter>;",
    "applied_rules": [
        "<dml_values_parameter>",
        "<comparison_operator_replace>"
    ],
    "Affected Elements": "UPDATE statements, WHERE clauses involving non-unique keys",
    "Root Cause Analysis": "InnoDB's handling of locks in the presence of uncommitted transactions, specifically around gap locking behavior when using non-unique indexes."
}