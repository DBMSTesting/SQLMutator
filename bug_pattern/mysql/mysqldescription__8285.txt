{
    "pattern": "CREATE DATABASE my_test_db; USE my_test_db; CREATE TABLE `a` (`_id` bigint(20) NOT NULL AUTO_INCREMENT, `col_int_1` int(11) NOT NULL DEFAULT <dml_values_parameter>, `col_int_2` int(11) DEFAULT <dml_values_parameter>, PRIMARY KEY (`_id`), KEY `key` (`col_int_1`)) ENGINE = <object_dependency_replace>; CREATE TABLE `b` (`_id` bigint(20) NOT NULL AUTO_INCREMENT, `col_bigint` bigint(20) DEFAULT <dml_values_parameter>, `col_char_1` char(255) DEFAULT <dml_values_parameter>, `col_char_2` char(255) DEFAULT <dml_values_parameter>, PRIMARY KEY (`_id`), KEY `key` (`col_bigint`)) ENGINE = <object_dependency_replace> DEFAULT CHARSET = <dml_values_parameter>; INSERT INTO a (_id) VALUES (NULL), (NULL), (NULL); DELIMITER // CREATE PROCEDURE insert_multi_and_select(in x <dml_values_parameter>) BEGIN DECLARE i <dml_values_parameter>; SET i = <dml_values_parameter>; WHILE i < x DO SET i = i + <dml_values_parameter>; INSERT INTO b SET _id=NULL; END WHILE; SELECT DISTINCT b._id, b.col_char_1, b.col_char_2 FROM b INNER JOIN a ON b.col_bigint = a._id AND a.col_int_1 = <dml_values_parameter> ORDER BY b._id <order_by_parameter> LIMIT <dml_values_parameter>, <dml_values_parameter>; END // DELIMITER ; CALL insert_multi_and_select(<dml_values_parameter>); ANALYZE TABLE b; SELECT DISTINCT b._id, b.col_char_1, b.col_char_2 FROM b INNER JOIN a ON b.col_bigint = a._id AND a.col_int_1 = <dml_values_parameter> ORDER BY b._id <order_by_parameter> LIMIT <dml_values_parameter>, <dml_values_parameter>; DROP DATABASE my_test_db;",
    "applied_rules": [
        "<dml_values_parameter>",
        "<object_dependency_replace>",
        "<order_by_parameter>"
    ],
    "Affected Elements": "ORDER BY, DISTINCT",
    "Root Cause Analysis": "The bug appears to be a regression introduced in MySQL 5.7.9 that affects the sorting behavior of queries involving DISTINCT after performing ANALYZE TABLE."
}