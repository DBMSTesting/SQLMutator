{
    "pattern": "CREATE TABLE `project` (`user_id` int(11) <constraint_type_parameter>, `report_date_minute` datetime <constraint_type_parameter>, `report_date_hourly` datetime GENERATED ALWAYS AS (date_format(`report_date_minute`,_utf8mb4'%Y-%m-%d %H:00:00')) VIRTUAL, PRIMARY KEY (`user_id`,`report_date_minute`) <constraint_enforce_replace>) ENGINE=<object_dependency_replace> DEFAULT CHARSET=<object_dependency_replace> ROW_FORMAT=<object_dependency_replace> /*!50500 PARTITION BY RANGE COLUMNS(report_date_minute) SUBPARTITION BY KEY (user_id) (PARTITION `p_2019-09-24` VALUES LESS THAN ('2019-09-25') (SUBPARTITION `p_2019-09-24_s1` ENGINE = <object_dependency_replace>, SUBPARTITION `p_2019-09-24_s2` ENGINE = <object_dependency_replace>, SUBPARTITION `p_2019-09-24_s3` ENGINE = <object_dependency_replace>, SUBPARTITION `p_2019-09-24_s4` ENGINE = <object_dependency_replace>, SUBPARTITION `p_2019-09-24_s5` ENGINE = <object_dependency_replace>, SUBPARTITION `p_2019-09-24_s6` ENGINE = <object_dependency_replace>, SUBPARTITION `p_2019-09-24_s7` ENGINE = <object_dependency_replace>), PARTITION `p_2019-09-25` VALUES LESS THAN ('2019-09-26') (SUBPARTITION `p_2019-09-25_s1` ENGINE = <object_dependency_replace>, SUBPARTITION `p_2019-09-25_s2` ENGINE = <object_dependency_replace>, SUBPARTITION `p_2019-09-25_s3` ENGINE = <object_dependency_replace>, SUBPARTITION `p_2019-09-25_s4` ENGINE = <object_dependency_replace>, SUBPARTITION `p_2019-09-25_s5` ENGINE = <object_dependency_replace>, SUBPARTITION `p_2019-09-25_s6` ENGINE = <object_dependency_replace>, SUBPARTITION `p_2019-09-25_s7` ENGINE = <object_dependency_replace>)) */; INSERT INTO `project`(`user_id`, `report_date_minute`) VALUES (<dml_values_parameter>); INSERT INTO `project`(`user_id`, `report_date_minute`) VALUES (<dml_values_parameter>); CREATE TABLE `user` (`uid` int(8) unsigned <constraint_type_parameter>, PRIMARY KEY (`uid`) <constraint_enforce_replace>) ENGINE=<object_dependency_replace> DEFAULT CHARSET=<object_dependency_replace>; INSERT INTO `user`(`uid`) VALUES (<dml_values_parameter>); SELECT COUNT(*) AS C FROM user AS u <join_operator_replace> `project` AS p ON p.user_id = u.uid WHERE p.report_date_minute IN (<dml_condition_replace>) AND u.uid = <dml_condition_replace>;",
    "applied_rules": [
        "<constraint_type_parameter>",
        "<constraint_enforce_replace>",
        "<object_dependency_replace>",
        "<dml_values_parameter>",
        "<dml_condition_replace>",
        "<join_operator_replace>"
    ],
    "Affected Elements": "JOIN clause, IN condition, datatype comparison (string vs. integer)",
    "Root Cause Analysis": "The bug is caused by a mismatch in the order of primary key fields in the partitioned table compared to the order of the combined primary key, leading to incorrect row retrieval when the query spans partitions."
}