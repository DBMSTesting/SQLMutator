{
    "pattern": "SET sql_mode=''; DROP TABLE IF EXISTS t; CREATE TABLE `t` ( `a` VARCHAR(100) NOT NULL DEFAULT '' <constraint_enforce_replace>, `b` VARCHAR(50) NOT NULL DEFAULT '' <constraint_enforce_replace>, `c` VARCHAR(5000) DEFAULT NULL <constraint_enforce_replace>, `d` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP <constraint_enforce_replace>, `e` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP <constraint_enforce_replace>, `f` BIGINT(25) NOT NULL AUTO_INCREMENT <constraint_type_parameter>, PRIMARY KEY (`f`) ) ENGINE=INNODB DEFAULT CHARSET=latin1; INSERT INTO t(a,b,c) VALUES (UUID(),UUID(),UUID()),(UUID(),UUID(),UUID()),(UUID(),UUID(),UUID()),(UUID(),UUID(),UUID()),(UUID(),UUID(),UUID()); INSERT INTO t(a,b,c) SELECT CONCAT(RAND(),UUID()),CONCAT(RAND(),UUID()),CONCAT(RAND(),UUID()) FROM t a,t b,t c,t d,t e,t f,t g,t h,t i,t j; ANALYZE TABLE t; SHOW TABLE STATUS LIKE 't'; SELECT COUNT(*) FROM t; SELECT data_length+index_length,data_length,index_length FROM information_schema.tables WHERE table_schema='test' AND table_name='t'; UPDATE t SET c = REPEAT('a',FLOOR(100*RAND())) WHERE b LIKE '0.1%'; UPDATE t SET c = REPEAT('b',FLOOR(500*RAND())) WHERE b LIKE '0.5%'; DELETE FROM t WHERE b LIKE '0.7%'; ANALYZE TABLE t; SHOW TABLE STATUS LIKE 't'; SELECT COUNT(*) FROM t; SELECT data_length+index_length,data_length,index_length FROM information_schema.tables WHERE table_schema='test' AND table_name='t'; ALTER TABLE t ENGINE=INNODB, ALGORITHM=<alter_algorithm_parameter>, LOCK=<lock_type_parameter>; ANALYZE TABLE t; SHOW TABLE STATUS LIKE 't'; SELECT COUNT(*) FROM t; SELECT data_length+index_length,data_length,index_length FROM information_schema.tables WHERE table_schema='test' AND table_name='t'; ALTER TABLE t ENGINE=INNODB, ALGORITHM=<alter_algorithm_parameter>, LOCK=<lock_type_parameter>; ANALYZE TABLE t; SHOW TABLE STATUS LIKE 't'; SELECT COUNT(*) FROM t; SELECT data_length+index_length,data_length,index_length FROM information_schema.tables WHERE table_schema='test' AND table_name='t';",
    "applied_rules": [
        "<constraint_enforce_replace>",
        "<constraint_type_parameter>",
        "<alter_algorithm_parameter>",
        "<lock_type_parameter>"
    ],
    "Affected Elements": "alter table, algorithm, analyze table, show table status, information_schema.tables",
    "Root Cause Analysis": "The use of the 'inplace' algorithm during the table rebuild is causing unexpected table size increase due to fragmentation not being handled as effectively as with the 'copy' algorithm."
}