{
    "pattern": "CREATE TABLE IF NOT EXISTS `in_docs` (`id` int(11) <constraint_type_parameter>, `doc_type` smallint(6) <constraint_type_parameter>, `sender_code` varchar(10) COLLATE utf8_unicode_ci <constraint_type_parameter>, `orig_reg_number` varchar(25) COLLATE utf8_unicode_ci <constraint_type_parameter>, `orig_sent_date` date <constraint_type_parameter>, `followup_doc_id` int(11) <constraint_type_parameter>, `reg_year` char(2) COLLATE utf8_unicode_ci <constraint_type_parameter>, `reg_number` int(11) <constraint_type_parameter>, `paper_reg_number` varchar(25) COLLATE utf8_unicode_ci <constraint_type_parameter>, `title` text COLLATE utf8_unicode_ci <constraint_type_parameter>, `contact_id` int(11) <constraint_type_parameter>, `contact_info` varchar(255) COLLATE utf8_unicode_ci <constraint_type_parameter>, `reg_date` date <constraint_type_parameter>, `deadline` date <constraint_type_parameter>, `ext_response_status` enum('none','accept','reject') COLLATE utf8_unicode_ci <constraint_type_parameter>, `deadline_notes` varchar(255) COLLATE utf8_unicode_ci <constraint_type_parameter>, `creator_user_id` smallint(11) <constraint_type_parameter>, `access_level_id` smallint(6) <constraint_type_parameter>, `fully_electronic` tinyint(1) <constraint_type_parameter>, `media_type_id` smallint(6) <constraint_type_parameter>, `modified` timestamp <constraint_type_parameter>, `created` timestamp <constraint_type_parameter>, PRIMARY KEY (`id`), UNIQUE KEY `reg_year_and_number` (`reg_year`,`reg_number`), KEY `reg_date` (`reg_date`), KEY `orig_reg_number` (`orig_reg_number`), KEY `contact_info` (`contact_info`), KEY `title` (`title`(333)), KEY `followup_doc_id` (`followup_doc_id`)) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci PACK_KEYS=0 COMMENT='Incoming Documents' AUTO_INCREMENT=31824; INSERT INTO `in_docs` <dml_values_parameter>; SELECT IF(MAX(reg_number) <= 0, 1, MAX(reg_number) + 1) FROM in_docs WHERE reg_year=<where_parameter>;",
    "applied_rules": [
        "<constraint_type_parameter>",
        "<dml_values_parameter>",
        "<where_parameter>"
    ],
    "Affected Elements": "SELECT, IF, MAX, WHERE",
    "Root Cause Analysis": "The bug arises from an incorrect assumption that the query would return a meaningful value when no matching rows exist for the specified reg_year."
}