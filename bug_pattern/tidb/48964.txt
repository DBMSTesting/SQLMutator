{
    "pattern": "CREATE TABLE `t` ( `id` bigint(20) NOT NULL <constraint_type_parameter>, `name` varchar(100) DEFAULT NULL, `code` varchar(100) DEFAULT NULL, `period` varchar(100) DEFAULT NULL, `station_num` decimal(32,6) DEFAULT NULL, `ljtx_num` decimal(32,6) DEFAULT NULL, `price` decimal(32,6) DEFAULT NULL, `a_value` decimal(32,6) DEFAULT NULL, `t_value` decimal(32,6) DEFAULT NULL, `car_type` varchar(100) DEFAULT NULL, `s_code` varchar(100) DEFAULT NULL, `s_name` varchar(100) DEFAULT NULL, `ptc` varchar(100) DEFAULT NULL, `ptc_code` varchar(100) DEFAULT NULL, `e_name` varchar(100) DEFAULT NULL, `e_code` varchar(100) DEFAULT NULL, `pqe_code` varchar(100) DEFAULT NULL, `pqe_name` varchar(100) DEFAULT NULL, `p_code` varchar(100) DEFAULT NULL, `p_name` varchar(100) DEFAULT NULL, `twll_amount` decimal(32,6) DEFAULT NULL, `twll_spje` decimal(32,6) DEFAULT NULL, `quantity` decimal(32,6) DEFAULT NULL, `dt` varchar(100) DEFAULT NULL, `start_time` varchar(100) DEFAULT NULL, `end_time` varchar(100) DEFAULT NULL, `problem_description` varchar(2000) DEFAULT NULL, `department` varchar(100) DEFAULT NULL, `workshop` varchar(100) DEFAULT NULL, `linename` varchar(100) DEFAULT NULL, `station_name` varchar(100) DEFAULT NULL, `flag` varchar(100) DEFAULT NULL, `cpv` varchar(100) DEFAULT NULL, `h_status` varchar(100) DEFAULT NULL, `hd_code` varchar(100) DEFAULT NULL, `pstatus` varchar(100) DEFAULT NULL, `model_no` varchar(100) DEFAULT NULL, `factory` varchar(100) DEFAULT NULL, `factory_code_v1` varchar(50) DEFAULT NULL, <constraint_enforce_replace>, KEY `IDX_inplant_percar_cost_daily_df_period` (`period`), KEY `IDX_inplant_percar_cost_daily_df_dt` (`dt`)) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin AUTO_INCREMENT=<auto_increment_parameter>; SELECT count(`序号`) AS 'sum(条数)', round(sum(`总价`), 2) AS 'sum(总数)' FROM (SELECT @i:=@i+1 AS 序号, ttt1.* FROM (SELECT factory, model_no, period, hd_code, '' AS 原始单号, s_name, s_code, p_code, p_name, ptc, station_num, round(price, 2), pqe_name, e_name, '' AS 备注, round(a_value, 2) AS 总价 FROM test.t WHERE dt = date_format(date_add(now(), INTERVAL -1 day), '%Y-%m-%d') AND code = '连带料废' AND date_format(period, '%Y-%m-%d') >= date_format('2023-07-01', '%Y-%m-%d') AND date_format(period, '%Y-%m-%d') <= date_format('2023-11-20', '%Y-%m-%d') AND s_name = 'xxx' AND model_no IN (<dml_values_parameter>)) ttt1 LEFT JOIN (SELECT @i:=0) ttt2 ON <comparison_operator_replace> 1=<comparison_operator_parameter>) T;",
    "applied_rules": [
        "<constraint_type_parameter>",
        "<constraint_enforce_replace>",
        "<auto_increment_parameter>",
        "<dml_values_parameter>",
        "<comparison_operator_replace>"
    ],
    "Affected Elements": "SELECT, COUNT, ROUND, LEFT JOIN",
    "Root Cause Analysis": "在执行查询时，可能由于子查询返回的结果集为空，导致在聚合操作中出现索引超出范围的错误。"
}