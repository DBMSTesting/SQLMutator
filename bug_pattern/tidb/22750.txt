{
    "pattern": "CREATE DATABASE <database_name_parameter>; USE <database_name_parameter>; CREATE TABLE `ci_data` ( `job` varchar(100) NOT NULL, `job_id` int(10) unsigned NOT NULL, `status` enum(<enum_values_parameter>) NOT NULL, `duration` int(10) unsigned DEFAULT NULL, `time` datetime DEFAULT NULL, `commit` varchar(100) DEFAULT NULL, `branch` varchar(100) DEFAULT NULL, `comment` text, `analysis_res` json DEFAULT NULL, `description` json DEFAULT NULL, `repo` varchar(100) DEFAULT NULL, PRIMARY KEY (`job`,`job_id`), KEY `status` (`status`), KEY `job` (`job`), KEY `time` (`time`), KEY `duration` (`duration`), KEY `branch` (`branch`), KEY `repo` (`repo`)); CREATE VIEW unstable_cases AS SELECT `case_count`.`c` AS `c` FROM (SELECT `pr_case`.`c` AS `c`, COUNT(0) AS `cnt` FROM (SELECT DISTINCT JSON_EXTRACT(`sync_ci_data`.`ci_data`.`description`, '$.ghprbPullLink') AS `pr`, JSON_EXTRACT(`sync_ci_data`.`ci_data`.`analysis_res`, '$.case') AS `c` FROM `sync_ci_data`.`ci_data` WHERE ((`sync_ci_data`.`ci_data`.`time` >= (CURDATE() - INTERVAL <interval_days_parameter>)) AND (JSON_LENGTH(JSON_EXTRACT(`sync_ci_data`.`ci_data`.`analysis_res`, '$.case')) > 0) AND (JSON_EXTRACT(`sync_ci_data`.`ci_data`.`description`, '$.ghprbPullLink') <> '') AND (`sync_ci_data`.`ci_data`.`status` <status_parameter>))) `pr_case` GROUP BY `pr_case`.`c`) `case_count` WHERE (`case_count`.`cnt` >= <min_count_parameter>) UNION ALL SELECT JSON_EXTRACT(`sync_ci_data`.`ci_data`.`analysis_res`, '$.case') AS `c` FROM `sync_ci_data`.`ci_data` WHERE ((JSON_EXTRACT(`sync_ci_data`.`ci_data`.`description`, '$.ghprbPullLink') = '') AND (`sync_ci_data`.`ci_data`.`status` <status_parameter> ) AND (JSON_LENGTH(JSON_EXTRACT(`sync_ci_data`.`ci_data`.`analysis_res`, '$.case')) > 0) AND (`sync_ci_data`.`ci_data`.`time` >= (CURDATE() - INTERVAL <interval_days_parameter>))); SELECT * FROM unstable_cases;",
    "applied_rules": [
        "<database_name_parameter>",
        "<enum_values_parameter>",
        "<interval_days_parameter>",
        "<status_parameter>",
        "<min_count_parameter>"
    ],
    "Affected Elements": "CREATE VIEW, SELECT, JSON_EXTRACT, JSON_LENGTH, UNION ALL",
    "Root Cause Analysis": "The error seems to stem from the complexity of the view definition, particularly around the use of JSON functions and potentially incorrect handling of data types or syntax in the SQL statement."
}