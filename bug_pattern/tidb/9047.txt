{
    "pattern": "SELECT d.* FROM (SELECT t1.classid AS classid, t1.author, t1.createtime, t1.years, t1.sx AS sx, t2.classid AS mobile_classid, t2.sx AS mobile_sx, t1.url, t1.title, t1.pc_week2 AS week2, t1.pc_last_year_week AS last_year_week, t1.pc_last_week AS last_week, IF(t2.mobile_week2 IS NULL, '0|0|0|0|0', t2.mobile_week2) AS mobile_field, IF(t2.mobile_last_year_week IS NULL, '0|0|0|0|0', t2.mobile_last_year_week) AS mobile_last_year_week, t1.sortField, IF(t2.mobile_last_week IS NULL, '0|0|0|0|0', t2.mobile_last_week) AS mobile_last_week FROM (SELECT a.classid, c.sx, a.createtime, a.years, a.author, c.classpath AS url, a.dn, c.classname AS title, a.device, a.week2 AS pc_week2, b.week2 AS pc_last_year_week, a.week1 AS pc_last_week, CAST(SUBSTRING_INDEX(SUBSTRING_INDEX(a.week2, '|', 2), '|', -1) AS SIGNED) AS sortField FROM (SELECT * FROM news_class_data_week WHERE dn = <dml_condition_replace> AND years = <dml_condition_replace> AND device = <dml_condition_replace>) a <join_operator_replace> (SELECT * FROM news_class_data_week WHERE dn = <dml_condition_replace> AND years = <dml_condition_replace> AND device = <dml_condition_replace>) b ON a.url = b.url <join_operator_replace> (SELECT * FROM news_class WHERE dn = <dml_condition_replace> AND device = <dml_condition_replace>) c ON a.classid = c.classid WHERE 1 = 1) t1 <join_operator_replace> (SELECT a.classid, c.sx, a.url AS url, a.dn, a.device, a.week2 AS mobile_week2, b.week2 AS mobile_last_year_week, a.week1 AS mobile_last_week, CAST(SUBSTRING_INDEX(SUBSTRING_INDEX(a.week2, '|', 2), '|', -1) AS SIGNED) AS sortField FROM (SELECT * FROM news_class_data_week WHERE dn = <dml_condition_replace> AND years = <dml_condition_replace> AND device = <dml_condition_replace>) a <join_operator_replace> (SELECT * FROM news_class_data_week WHERE dn = <dml_condition_replace> AND years = <dml_condition_replace> AND device = <dml_condition_replace>) b ON a.url = b.url <join_operator_replace> (SELECT * FROM news_class WHERE dn = <dml_condition_replace> AND device = <dml_condition_replace>) c ON a.classid = c.classid) t2 ON t1.url = t2.url AND t1.dn = t2.dn GROUP BY t1.url, t1.title ORDER BY t1.sortField <arithmetic_operator_replace> <numeric_parameter> DESC) d WHERE d.url LIKE CONCAT('%', <string_parameter>, '%') LIMIT <numeric_parameter>, <numeric_parameter>",
    "applied_rules": [
        "<dml_condition_replace>",
        "<join_operator_replace>",
        "<arithmetic_operator_replace>",
        "<numeric_parameter>",
        "<string_parameter>"
    ],
    "Affected Elements": "GROUP BY, ORDER BY, IF function usage",
    "Root Cause Analysis": "The query may trigger a connection loss due to excessive resource consumption or a bug in the TiDB server when processing large or complex result sets, leading to an 'index out of range' panic."
}