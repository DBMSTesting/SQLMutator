{
    "pattern": "CREATE TABLE table_3_utf8_undef (`pk` INT <constraint_type_parameter>, `col_double_key_unsigned` BIGINT UNSIGNED, `col_char(20)_key_signed` CHAR(20)); INSERT INTO table_3_utf8_undef <dml_values_parameter>; CREATE TABLE table_7_utf8_undef (`pk` INT <constraint_type_parameter>, `col_double_key_unsigned` BIGINT UNSIGNED, `col_char(20)_key_signed` CHAR(20)); INSERT INTO table_7_utf8_undef <dml_values_parameter>; WITH `MYWITH` AS ((SELECT (REPEAT(`f6`, 8)) AS `f1`, (DATE_ADD(~0, INTERVAL 1 HOUR_MICROSECOND)) AS `f2`, (0) AS `f3` FROM (SELECT `col_double_key_unsigned` AS `f4`, `col_varchar(20)_key_signed` AS `f5`, `col_char(20)_key_signed` AS `f6` FROM `table_7_utf8_undef` USE INDEX (`col_float_key_signed`, `col_decimal(40, 20)_key_signed`)) AS `t1` ORDER BY `f5`) UNION ALL (SELECT (COLLATION(`f8`)) AS `f1`, (`f7` + SIGN(0.02087047389286014)) AS `f2`, (DATE_ADD(NULL, INTERVAL 1 HOUR_SECOND)) AS `f3` FROM (SELECT `col_bigint_key_signed` AS `f7`, `col_double_key_signed` AS `f8`, `col_double_key_unsigned` AS `f9` FROM `table_7_utf8_undef` USE INDEX (`col_float_key_unsigned`)) AS `t2` WHERE ((((-`f8`) <= ANY (SELECT `col_char(20)_key_signed` FROM `table_3_utf8_undef` IGNORE INDEX (`col_double_key_unsigned`, `col_decimal(40, 20)_key_unsigned`))) IS TRUE) AND (NOT ((DATE_SUB(`f9`, INTERVAL 1 YEAR)) >= (DATE_SUB(`f8`, INTERVAL 1 HOUR_MINUTE)))) AND ((CAST((`f8`) AS CHAR) NOT LIKE _UTF8MB4 '%0%') IS FALSE)) IS FALSE HAVING ((((DATE_ADD(`f3`, INTERVAL 1 DAY_HOUR)) IN (LOG10(-7692179927919504847), LTRIM(`f1`), COT(-6524291123097959596))) IS FALSE) OR (((`f3`) != (CHARSET(`f3`))) IS FALSE) AND ((FROM_DAYS(8527277907550850100)) < ALL (SELECT `col_char(20)_key_signed` FROM `table_3_utf8_undef` USE INDEX (`col_float_key_unsigned`, `col_varchar(20)_key_signed`)))) IS FALSE)) SELECT * FROM `MYWITH`; WITH `MYWITH` AS ((SELECT (REPEAT(`f6`, 8)) AS `f1`, (DATE_ADD(~0, INTERVAL 1 HOUR_MICROSECOND)) AS `f2`, (0) AS `f3` FROM (SELECT `col_double_key_unsigned` AS `f4`, `col_varchar(20)_key_signed` AS `f5`, `col_char(20)_key_signed` AS `f6` FROM `table_7_utf8_undef` USE INDEX (`col_float_key_signed`, `col_decimal(40, 20)_key_signed`)) AS `t1` ORDER BY `f5`) UNION ALL (SELECT (COLLATION(`f8`)) AS `f1`, (`f7` + SIGN(0.02087047389286014)) AS `f2`, (DATE_ADD(NULL, INTERVAL 1 HOUR_SECOND)) AS `f3` FROM (SELECT `col_bigint_key_signed` AS `f7`, `col_double_key_signed` AS `f8`, `col_double_key_unsigned` AS `f9` FROM `table_7_utf8_undef` USE INDEX (`col_float_key_unsigned`)) AS `t2` WHERE ((((-`f8`) = ANY (SELECT `col_char(20)_key_signed` FROM `table_3_utf8_undef` IGNORE INDEX (`col_double_key_unsigned`, `col_decimal(40, 20)_key_unsigned`))) IS TRUE) AND (NOT ((DATE_SUB(`f9`, INTERVAL 1 YEAR)) >= (DATE_SUB(`f8`, INTERVAL 1 HOUR_MINUTE)))) AND ((CAST((`f8`) AS CHAR) NOT LIKE _UTF8MB4 '%0%') IS FALSE)) IS FALSE HAVING ((((DATE_ADD(`f3`, INTERVAL 1 DAY_HOUR)) IN (LOG10(-7692179927919504847), LTRIM(`f1`), COT(-6524291123097959596))) IS FALSE) OR (((`f3`) != (CHARSET(`f3`))) IS FALSE) AND ((FROM_DAYS(8527277907550850100)) < ALL (SELECT `col_char(20)_key_signed` FROM `table_3_utf8_undef` USE INDEX (`col_float_key_unsigned`, `col_varchar(20)_key_signed`)))) IS FALSE)) SELECT * FROM `MYWITH`;",
    "applied_rules": [
        "<constraint_type_parameter>",
        "<dml_values_parameter>",
        "<comparison_operator_replace>",
        "<dml_condition_replace>",
        "<object_dependency_replace>"
    ],
    "Affected Elements": "使用了不当的比较运算符（= 和 <=），导致查询结果不一致",
    "Root Cause Analysis": "查询逻辑中对条件的理解错误，导致更严格的条件未能正确限制结果集"
}