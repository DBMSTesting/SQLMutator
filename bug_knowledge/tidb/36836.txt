{
    "sql": "CREATE TABLE `lineorder` ( `LO_ORDERKEY` int(11) NOT NULL, `LO_LINENUMBER` int(11) NOT NULL, `LO_CUSTKEY` int(11) DEFAULT NULL, `LO_PARTKEY` int(11) DEFAULT NULL, `LO_SUPPKEY` int(11) DEFAULT NULL, `LO_ORDERDATE` int(11) DEFAULT NULL, `LO_ORDPRIORITY` char(15) DEFAULT NULL, `LO_SHIPPRIORITY` char(1) DEFAULT NULL, `LO_QUANTITY` int(11) DEFAULT NULL, `LO_EXTENDEDPRICE` decimal(10,0) DEFAULT NULL, `LO_DISCOUNT` int(11) DEFAULT NULL, `LO_REVENUE` decimal(10,0) DEFAULT NULL, `LO_SUPPLYCOST` decimal(10,0) DEFAULT NULL, `LO_TAX` int(11) DEFAULT NULL, `LO_COMMITDATE` int(11) DEFAULT NULL, `LO_SHIPMODE` char(10) DEFAULT NULL, KEY `idx_lo_custkey` (`LO_CUSTKEY`), UNIQUE KEY `UK_ORDR_LINE` ((tidb_shard(`LO_ORDERKEY`)),`LO_ORDERKEY`,`LO_LINENUMBER`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin; CREATE TABLE `date` ( `D_DATEKEY` int(11) NOT NULL, `D_DATE` varchar(18) DEFAULT NULL, `D_DATEOFWEEK` varchar(9) DEFAULT NULL, `D_MONTH` varchar(9) DEFAULT NULL, `D_YEAR` int(11) DEFAULT NULL, `D_YEARMONTHNUM` int(11) DEFAULT NULL, `D_YEARMONTH` char(7) DEFAULT NULL, `D_DAYNUMINWEEK` int(11) DEFAULT NULL, `D_DAYNUMINMONTH` int(11) DEFAULT NULL, `D_DAYNUMINYEAR` int(11) DEFAULT NULL, `D_MONTHNUMINYEAR` int(11) DEFAULT NULL, `D_WEEKNUMINYEAR` int(11) DEFAULT NULL, `D_SELLINGSEASON` char(15) DEFAULT NULL, `D_LASTDAYINWEEKFL` tinyint(1) DEFAULT NULL, `D_LASTDAYINMONTHFL` tinyint(1) DEFAULT NULL, `D_HOLIDAYFL` tinyint(1) DEFAULT NULL, `D_WEEKDAYFL` tinyint(1) DEFAULT NULL, PRIMARY KEY (`D_DATEKEY`), KEY `idx_d_date` (`D_DATE`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin; alter table `lineorder` set tiflash replica 1; alter table `date` set tiflash replica 1; explain SELECT SUM(LO_EXTENDEDPRICE*LO_DISCOUNT) AS REVENUE FROM `lineorder`, `date` WHERE LO_ORDERDATE = D_DATEKEY AND D_YEAR = 1993 AND LO_DISCOUNT BETWEEN 1 AND 3 AND LO_QUANTITY<25;",
    "Affected Elements": "INSERT, SELECT, TIFLASH, JOIN",
    "Root Cause Analysis": "The query planner is not utilizing the MPP plan for the specified query due to configuration or optimization issues with the Tiflash replication."
}