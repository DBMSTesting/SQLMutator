{
    "sql": "drop table if exists t; create table t (id int primary key, v int) partition by range (id) (partition p0 values less than (4), partition p_rest values less than maxvalue); insert into t values (1, 10); begin; insert into t values (1, 11) on duplicate key update id = values(id), v = values(v); alter table t drop partition p0; insert into t values (1, 12) on duplicate key update id = values(id), v = values(v); select * from t for update; commit; drop table if exists t; create table t (id int primary key, v int) partition by range (id) (partition p0 values less than (4), partition p1 values less than (6)); insert into t values (1, 10), (3, 30), (5, 50); begin; alter table t add partition (partition p2 values less than (8)); insert into t values (6, 60); insert into t values (4, 40); select * from t for update; commit;",
    "Affected Elements": "INSERT, ALTER TABLE, SELECT FOR UPDATE",
    "Root Cause Analysis": "并发执行的悲观事务在进行分区DDL时可能导致读取不一致的数据。"
}