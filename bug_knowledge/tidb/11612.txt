{
    "sql": "CREATE TABLE `testtable` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT,\n  `deleted` smallint(6) NOT NULL,\n  `m_id` bigint(20) DEFAULT NULL,\n  `title` varchar(250) NOT NULL,\n  `seq` bigint(20) DEFAULT '0',\n  `val` varchar(64) DEFAULT '31',\n  `online` smallint(6) DEFAULT '1',\n  PRIMARY KEY (`id`),\n  KEY `ix_testtable_deleted` (`deleted`),\n  KEY `testtable_mid_seq` (`m_id`,`seq`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin;\nINSERT INTO `testtable` VALUES (1000,0,1001,'last',330,'330',1),(1001,0,1001,'',329,'329',1),(1002,0,1001,'',328,'328',1),(1003,0,1001,'',327,'328',1),(1004,0,1001,'',326,'328',1),(1005,0,1001,'',325,'328',1),(1006,0,1001,'x',324,'328',1),(1007,0,1001,'x',323,'328',1),(1008,0,1001,'x22',322,'328',1),(1009,0,1001,'x21',321,'328',1),(1010,0,1001,'x20',320,'328',1),(1011,0,1001,'x19',319,'328',1),(1012,0,1001,'x18',318,'328',1),(1013,0,1001,'x17',317,'328',1),(1014,0,1001,'x16',316,'328',1),(1015,0,1001,'x15',315,'328',1),(1016,0,1001,'x14',314,'328',1),(1017,0,1001,'x13',313,'328',1),(1018,0,1001,'x12',312,'328',1),(1019,0,1001,'x11',311,'328',1),(1020,0,1001,'x10',310,'328',1),(1021,0,1001,'x09',309,'328',1),(1022,0,1001,'x08',308,'328',1),(1023,0,1001,'x08',307,'328',1),(1024,0,1001,'x07',307,'328',1),(1025,0,1001,'x06',306,'328',1),(1026,0,1001,'x04',305,'328',1),(1027,0,1001,'x044',304,'328',1),(1028,0,1001,'x03',303,'328',1),(1029,0,1001,'x02',302,'328',1),(1030,0,1001,'x01',301,'328',1),(1031,0,1001,'x00',300,'328',1),(1032,0,1001,'x299',299,'328',1),(1033,0,1001,'x298',298,'328',1),(31034,0,1000,'abc',390,'399',1),(31035,0,1000,'abcd',391,'399',1),(31036,0,1000,'abcde',377,'309',1),(31037,0,1000,'abcde',499,'309',1),(31038,0,1000,'abcdef',499,'309',1),(31039,0,1000,'abcdefg',499,'319',1),(31040,0,1003,'aa',298,'328',1),(31041,0,1003,'aa',298,'328',1),(31042,0,1003,'aa',298,'328',1),(31043,0,1004,'a4',300,'328',1),(31044,0,1004,'a4',298,'328',1);\nSELECT p.id, p.title, p.seq, p.m_id, p.val, row_number() OVER(PARTITION BY p.m_id ORDER BY p.seq DESC) AS row_num FROM testtable p WHERE p.deleted = 0 AND p.online = 1 AND p.m_id IN (1000, 1001, 1002, 1003, 1004);",
    "Affected Elements": "ROW_NUMBER() OVER(PARTITION BY ..., ORDER BY ...)",
    "Root Cause Analysis": "The incorrect row number assignment is likely due to the way the window function is processing the partitions and their order, possibly caused by duplicate values in the partitioning or ordering criteria."
}