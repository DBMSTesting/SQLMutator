{
    "sql": "CREATE DATABASE partSchemaVer; USE partSchemaVer; SET @@global.tidb_enable_metadata_lock = ON; CREATE TABLE t (a INT PRIMARY KEY, b VARCHAR(255), KEY (b)) PARTITION BY HASH (a) PARTITIONS 3; INSERT INTO t VALUES (1, '1'); ANALYZE TABLE t; BEGIN; SELECT * FROM t; INSERT INTO t VALUES (2, '2'); ALTER TABLE t ADD PARTITION PARTITIONS 1; SELECT * FROM t; INSERT INTO t VALUES (3, '3'); COMMIT; SELECT * FROM t; INSERT INTO t VALUES (4, '4'); COMMIT; SELECT * FROM t; INSERT INTO t VALUES (5, '5'); COMMIT; SELECT * FROM t; INSERT INTO t VALUES (6, '6'); COMMIT; SELECT * FROM t;",
    "Affected Elements": "INSERT statements, ALTER TABLE statement, BEGIN/COMMIT transactions",
    "Root Cause Analysis": "The bug arises from incorrect handling of partitioning during concurrent writes, leading to duplicate rows being inserted into the wrong partition due to the old partitioning structure being referenced."
}