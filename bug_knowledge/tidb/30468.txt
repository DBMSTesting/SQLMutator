{
    "sql": "drop table if exists t; create table t (id varchar(64) primary key, v int); insert into t values ('1', 10), ('2', 20), ('3', 30), ('4', 40), ('5', 50), ('6', 60), ('7', 70), ('8', 90); set @@tidb_index_join_batch_size = 1; explain update /*+ INL_JOIN(t) */ t join (select '1' as id, 1 as diff union select '2' as id, 1 as diff union select '3' as id, 1 as diff union select '4' as id, 1 as diff) as b on t.id = b.id set t.v = t.v + b.diff; update /*+ INL_JOIN(t) */ t join (select '1' as id, 1 as diff union select '2' as id, 1 as diff union select '3' as id, 1 as diff union select '4' as id, 1 as diff) as b on t.id = b.id set t.v = t.v + b.diff;",
    "Affected Elements": "IndexLookUpJoin, concurrent execution, transaction handling",
    "Root Cause Analysis": "Data race condition arises from the IndexLookUpJoin executor attempting to build inner executors concurrently without ensuring that the transaction snapshot is retrieved, leading to invalid transaction states."
}