{
    "sql": "USE test; DROP TABLE IF EXISTS test_myisam; DROP TABLE IF EXISTS test_innodb; DROP TABLE IF EXISTS test_heap; CREATE TABLE test_myisam (id int auto_increment, nr int, primary key(id), unique key (nr)) ENGINE MyISAM AUTO_INCREMENT=1000; CREATE TABLE test_innodb (id int auto_increment, nr int, primary key(id), unique key (nr)) ENGINE InnoDB AUTO_INCREMENT=2000; CREATE TABLE test_heap (id int auto_increment, nr int, primary key(id), unique key (nr)) ENGINE Heap AUTO_INCREMENT=3000; INSERT IGNORE INTO test_myisam (nr) VALUES (9); SELECT LAST_INSERT_ID() as mysiam1; INSERT IGNORE INTO test_myisam (nr) VALUES (9); SELECT LAST_INSERT_ID() as myisam2; INSERT IGNORE INTO test_innodb (nr) VALUES (9); SELECT LAST_INSERT_ID() as innodb1; INSERT IGNORE INTO test_innodb (nr) VALUES (9); SELECT LAST_INSERT_ID() as innodb2; INSERT IGNORE INTO test_heap (nr) VALUES (9); SELECT LAST_INSERT_ID() as heap1; INSERT IGNORE INTO test_heap (nr) VALUES (9); SELECT LAST_INSERT_ID() as heap2;",
    "Affected Elements": "INSERT IGNORE, LAST_INSERT_ID()",
    "Root Cause Analysis": "The behavior of LAST_INSERT_ID() not returning 0 after an INSERT IGNORE where no row is inserted is inconsistent with the MySQL manual's documentation."
}