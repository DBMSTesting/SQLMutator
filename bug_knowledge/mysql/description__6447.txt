{
    "sql": "create table client (id int(10) unsigned NOT NULL, name varchar(255) NOT NULL, PRIMARY KEY (id)) ENGINE=InnoDB; create table client_user (id int(10) unsigned NOT NULL, client_id int(10) unsigned NOT NULL, user_name varchar(255) NOT NULL, PRIMARY KEY (id), CONSTRAINT client_user_fk FOREIGN KEY (client_id) REFERENCES client (id) ON DELETE CASCADE) ENGINE=InnoDB; create table client_record (id int(10) unsigned NOT NULL, client_id int(10) unsigned NOT NULL, created_by_id int(10) unsigned DEFAULT NULL, some_text_value varchar(255) NOT NULL, PRIMARY KEY (id), CONSTRAINT client_record_fk FOREIGN KEY (client_id) REFERENCES client (id) ON DELETE CASCADE, CONSTRAINT cr_created_by_fk FOREIGN KEY (created_by_id) REFERENCES client_user (id) ON DELETE SET NULL) ENGINE=InnoDB; create table client_record_child (id int(10) unsigned NOT NULL, client_record_id int(10) unsigned NOT NULL, created_by_id int(10) unsigned DEFAULT NULL, some_text_value varchar(255) NOT NULL, PRIMARY KEY (id), CONSTRAINT client_record_child_fk FOREIGN KEY (client_record_id) REFERENCES client_record (id) ON DELETE CASCADE, CONSTRAINT crc_created_by_fk FOREIGN KEY (created_by_id) REFERENCES client_user (id) ON DELETE SET NULL) ENGINE=InnoDB; insert into client (id, name) values (1, 'Acme Ltd'); insert into client_user (id, client_id, user_name) values (1, 1, 'john_smith'); insert into client_record (id, client_id, created_by_id, some_text_value) values (1, 1, 1, 'Lorem Ipsum'); insert into client_record_child (id, client_record_id, created_by_id, some_text_value) values (1, 1, 1, 'Lorem Ipsum'); delete from client where id=1; select * from client_record_child; select * from client_record_child where client_record_id = 1; select * from client_record_child use index () where client_record_id = 1;",
    "Affected Elements": "ON DELETE CASCADE, ON DELETE SET NULL",
    "Root Cause Analysis": "The cascade delete behavior is not functioning correctly when foreign key relationships involve both ON DELETE CASCADE and ON DELETE SET NULL, leading to unexpected retention of child records."
}