{
    "sql": "create table t1(a int, b blob); drop procedure if exists test; delimiter $ create procedure test() begin declare i int default 1; while i<=30000 do insert into t1 values(i, concat('123', i)); set i=i+1; end while; end $ delimiter ; call test(); set tmp_table_size=1024; Show global status like '%Created_tmp%'; Select count(distinct b) from t1; Show global status like '%Created_tmp%'; set session optimizer_trace='enabled=on', end_markers_in_json=on; Select count(distinct b) from t1; SELECT * from information_schema.optimizer_trace limit 1\\G",
    "Affected Elements": "create table, drop procedure, create procedure, insert into, set, Show global status, Select count(distinct), set session optimizer_trace, SELECT * from information_schema.optimizer_trace",
    "Root Cause Analysis": "The issue arises from the incorrect handling of the temporary table's database type during the creation process, preventing the counter for disk-based temporary tables from incrementing when expected."
}