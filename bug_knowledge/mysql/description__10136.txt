{
    "sql": "CALL mtr.add_suppression('\\[Warning\\] .*MY-\\d+.* \\[Server\\] Plugin mysqlx reported.*'); SET @old_rpl_semi_sync_slave_enabled = @@GLOBAL.rpl_semi_sync_slave_enabled; SET GLOBAL rpl_semi_sync_slave_enabled = ON; SET @old_rpl_semi_sync_master_enabled = @@GLOBAL.rpl_semi_sync_master_enabled; SET GLOBAL rpl_semi_sync_master_enabled = ON; SET @old_rpl_semi_sync_master_timeout = @@GLOBAL.rpl_semi_sync_master_timeout; SET GLOBAL rpl_semi_sync_master_timeout = 1000000000; CREATE DATABASE tt; USE tt; CREATE TABLE t1(id int); INSERT INTO t1 VALUES(0); INSERT INTO t1 VALUES(1); INSERT INTO t1 VALUES(2); FLUSH BINARY LOGS; INSERT INTO t1 VALUES(3); INSERT INTO t1 VALUES(4); DROP TABLE t1; DROP DATABASE tt; SET GLOBAL rpl_semi_sync_master_timeout = @old_rpl_semi_sync_master_timeout; SET GLOBAL rpl_semi_sync_master_enabled = @old_rpl_semi_sync_master_enabled; SET GLOBAL rpl_semi_sync_slave_enabled = @old_rpl_semi_sync_slave_enabled;",
    "Affected Elements": "SET GLOBAL, INSERT INTO, FLUSH BINARY LOGS",
    "Root Cause Analysis": "The bug is caused by incorrect transaction binlog position comparison during semi-synchronous replication."
}