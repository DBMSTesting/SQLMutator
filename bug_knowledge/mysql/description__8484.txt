{
    "sql": "CREATE TABLE `data_user_test` ( `user_id` int(11) NOT NULL, `country` varchar(20) NOT NULL DEFAULT '', `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP , `update_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP , PRIMARY KEY (`user_id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4; INSERT INTO data_user_test VALUES (1, '中国', NOW(), NOW()), (2, '日本', NOW(), NOW()), (3, '中国', NOW(), NOW()), (4, '韩国', NOW(), NOW()); SET @@collation_connection='utf8mb4_unicode_ci'; SELECT IF(country='中国', '国内', '国外') country_type, COUNT(DISTINCT du.user_id) FROM data_user_test du GROUP BY 1;",
    "Affected Elements": "SET @@collation_connection, IF, GROUP BY",
    "Root Cause Analysis": "The mismatch in result is caused by the collation settings affecting string comparison in the GROUP BY clause."
}