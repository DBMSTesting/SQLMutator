{
    "sql": "CREATE TABLE IF NOT EXISTS tf (id int(10) unsigned NOT NULL AUTO_INCREMENT, sid int(10) unsigned NOT NULL DEFAULT '0', tp char(10) NOT NULL DEFAULT '0', fn varchar(50) NOT NULL DEFAULT '0', PRIMARY KEY (id), UNIQUE KEY uni (sid,fn), KEY sid (sid)) ENGINE=InnoDB DEFAULT CHARSET=utf8; CREATE TABLE IF NOT EXISTS tm (id int(10) unsigned NOT NULL AUTO_INCREMENT, fid int(10) unsigned NOT NULL DEFAULT '0', ts int(10) unsigned NOT NULL DEFAULT '999999999', te int(10) unsigned NOT NULL DEFAULT '999999999', sc varchar(50) NOT NULL DEFAULT '0', ky varchar(50) NOT NULL DEFAULT '0', PRIMARY KEY (id), UNIQUE KEY uni (fid,te,ts,sc,ky), KEY ts (ts), KEY te (te)) ENGINE=InnoDB DEFAULT CHARSET=utf8; INSERT INTO tf (id, sid, tp, fn) VALUES(1001, 302, '29278', 'fn1'); INSERT IGNORE INTO tm (id, fid, ts, te, sc, ky) VALUES (7654322, 1001, 1, 999999990, 'sc1001', 'ky7654322'); INSERT IGNORE INTO tm (id, fid, ts, te, sc, ky) VALUES (7658322, 1003, 1, 999999990, 'sc1003', 'ky7658322'); INSERT IGNORE INTO tm (id, fid, ts, te, sc, ky) VALUES (7660322, 1004, 1, 999999990, 'sc1004', 'ky7660322'); INSERT IGNORE INTO tm (id, fid, ts, te, sc, ky) VALUES (7662322, 1005, 1, 999999990, 'sc1005', 'ky7662322'); INSERT IGNORE INTO tm (id, fid, ts, te, sc, ky) VALUES (7664322, 1006, 1, 999999990, 'sc1006', 'ky7662322'); INSERT IGNORE INTO tm (id, fid, ts, te, sc, ky) VALUES (7666322, 1007, 1, 999999990, 'sc1007', 'ky7662322'); INSERT IGNORE INTO tm (id, fid, ts, te, sc, ky) VALUES (7668322, 1008, 1, 999999990, 'sc1008', 'ky7662322'); INSERT IGNORE INTO tm (id, fid, ts, te, sc, ky) VALUES (7670322, 1009, 1, 999999990, 'sc1009', 'ky7670322'); DELETE FROM tm WHERE id IN ('7672322', '7672323', '7672324', '7672325', '7690319', '7690320', '7690321'); SELECT count(*) FROM tf INNER JOIN tm ON tf.id = tm.fid WHERE tf.sid = 302 AND tf.fn = 'fn1' AND tm.ts <= 999999990 AND tm.te >= 999999990;",
    "Affected Elements": "SELECT, INNER JOIN, COUNT, WHERE, INSERT IGNORE, DELETE",
    "Root Cause Analysis": "The bug is likely due to issues in the optimizer or caching mechanism that causes incorrect results to be returned immediately after a series of DML statements without sufficient wait time."
}