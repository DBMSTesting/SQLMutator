{
    "sql": "DROP DATABASE IF EXISTS shared; CREATE DATABASE shared; CREATE TABLE shared.shared_table (SharedID INT PRIMARY KEY); INSERT INTO shared.shared_table VALUES(1); DROP DATABASE IF EXISTS a; CREATE DATABASE a; CREATE TABLE a.t (ID INT, SharedID INT); ALTER TABLE a.t ADD CONSTRAINT FK_a_SharedID FOREIGN KEY (SharedID) REFERENCES shared.shared_table (SharedID) ON UPDATE CASCADE ON DELETE CASCADE; DROP DATABASE IF EXISTS b; CREATE DATABASE b; CREATE TABLE b.t (ID INT, SharedID INT); ALTER TABLE b.t ADD CONSTRAINT FK_b_SharedID FOREIGN KEY (SharedID) REFERENCES shared.shared_table (SharedID) ON UPDATE CASCADE ON DELETE CASCADE; SELECT SLEEP(60) FROM shared.shared_table; ALTER TABLE b.t DROP FOREIGN KEY FK_b_SharedID;",
    "Affected Elements": "ALTER TABLE, DROP FOREIGN KEY, SLEEP()",
    "Root Cause Analysis": "The long-running query causes a metadata lock on the parent table, preventing concurrent DDL operations."
}