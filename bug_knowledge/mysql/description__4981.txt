{
    "sql": "DROP TABLE IF EXISTS `source_table`; DROP TABLE IF EXISTS `target_table`; CREATE TABLE `source_table` (`id` INT UNSIGNED NOT NULL AUTO_INCREMENT, `mysql_version` VARCHAR(50) NOT NULL, PRIMARY KEY (`id`)); CREATE TABLE `target_table` (`value_new_id` INT NOT NULL, `value_last_insert_id` INT NOT NULL); DELIMITER // CREATE TRIGGER `trgaitest` AFTER INSERT ON `source_table` FOR EACH ROW BEGIN INSERT INTO `target_table` (`value_new_id`, `value_last_insert_id`) VALUES (NEW.`id`, LAST_INSERT_ID()); END// DELIMITER ; INSERT INTO `source_table` (`mysql_version`) VALUES (VERSION()); SELECT `value_new_id`, `value_last_insert_id` FROM `target_table`;",
    "Affected Elements": "LAST_INSERT_ID() function within triggers, AFTER INSERT trigger syntax",
    "Root Cause Analysis": "The change in behavior of LAST_INSERT_ID() from MySQL version 5.0 to 5.1+ causes it to return unexpected results within trigger contexts."
}