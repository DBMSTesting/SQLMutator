{
    "sql": "DROP DATABASE IF EXISTS FTSBug; CREATE SCHEMA FTSBug DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci; USE FTSBug; DROP TABLE IF EXISTS `Test`; CREATE TABLE `Test` ( f21 varchar(16) GENERATED ALWAYS AS ('') VIRTUAL, f22 varchar(16) GENERATED ALWAYS AS ('') VIRTUAL, f20 text, KEY `IX_Test_r3` (`f22`) ) ENGINE=InnoDB; INSERT INTO Test (f20) VALUES(null); CREATE FULLTEXT INDEX IX_DocTract_Test_f20 ON Test(f20); INSERT INTO Test (f20) VALUES('one'); INSERT INTO Test (f20) VALUES('two'); ALTER TABLE `Test` ADD COLUMN d varchar(128) GENERATED ALWAYS AS ('hi') VIRTUAL NULL; INSERT INTO Test (f20) VALUES('three');",
    "Affected Elements": "FULLTEXT INDEX, VIRTUAL COLUMN, INSERT statement",
    "Root Cause Analysis": "The INNODB_FT_INDEX_CACHE is cleared and not written to INNODB_FT_INDEX_TABLE when a VIRTUAL column is added, leading to duplicate key errors on subsequent inserts."
}