{
    "sql": "create table t1 (a int, b int, c int); insert into t1 values(1,1,1),(2,2,2),(3,3,3); insert into t1 select a, b * 2, c from t1; create index idx_b on t1(b); create table t2 (a int, b int, c int); insert into t2 values(1,1,1),(2,2,2),(3,3,3); create table inner_t (a int, start_time datetime, expires_time datetime); insert into inner_t values(3, date_add(sysdate(), interval 1 hour), '2023-09-01 00:00:00'), (2, date_add(sysdate(), interval 1 hour), '2023-09-01 00:00:00'), (3, date_sub(sysdate(), interval 1 hour), date_add(sysdate(), interval 1 hour)); set optimizer_switch='materialization=off'; select * from t1 left join t2 on t1.a = t2.a where t1.b in (select a from inner_t where sysdate() between start_time and expires_time);",
    "Affected Elements": "non-deterministic expressions, semi-join, optimizer_switch",
    "Root Cause Analysis": "The query produces incorrect results when using a semi-join without materialization due to the optimizer's handling of non-deterministic expressions."
}