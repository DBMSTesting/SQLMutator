{
    "sql": "DROP VIEW IF EXISTS v1; DROP TABLE IF EXISTS m1; DROP TABLE IF EXISTS m2; CREATE TABLE `m1` (`a` int(11) NOT NULL, `b` int(11) NOT NULL, `c` int(11) NOT NULL, `d` varchar(1) DEFAULT NULL, PRIMARY KEY (`a`,`b`)) ENGINE=InnoDB; CREATE TABLE `m2` (`a` int(11) NOT NULL, `b` int(11) NOT NULL, `c` int(11) NOT NULL, PRIMARY KEY (`a`,`b`,`c`)) ENGINE=InnoDB; INSERT INTO m1 VALUES (0,0,0,'A'),(0,1,0,'B'),(1,0,1,'A'),(1,1,1,'B'); INSERT INTO m2 VALUES (0,0,0),(0,0,1),(1,0,0),(1,0,1); CREATE ALGORITHM=MERGE VIEW v1 AS SELECT m1.a, m1.b, m1.d FROM m1 JOIN m2 on m1.a=m2.a AND m1.b = m2.b AND m1.c = m2.c; EXPLAIN SELECT count(*) FROM v1 WHERE a=0 AND d='A'; EXPLAIN SELECT @a:=count(*) FROM v1 WHERE a=0 AND d='A';",
    "Affected Elements": "User-defined variables, ALGORITHM=MERGE",
    "Root Cause Analysis": "The optimizer's heuristic for handling user-defined variables in version 5.7 is conflicting with the expected behavior of the MERGE algorithm for views."
}