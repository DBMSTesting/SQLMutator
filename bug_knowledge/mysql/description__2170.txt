{
    "sql": "SELECT * FROM merlintest.agentlist WHERE id NOT IN (SELECT SUBSTR(o.value, 1, 10) AS agentID FROM mem.dc_ng_string_now AS o JOIN mem.inventory_instance_attributes AS iia USING (instance_attribute_id) JOIN mem.inventory_instances USING (instance_id) JOIN (SELECT inventory_attributes.attribute_id, attribute_name, instance_attribute_id, MAX(end_time) AS _end_time FROM mem.dc_ng_string_now JOIN mem.inventory_instance_attributes USING (instance_attribute_id) JOIN mem.inventory_instances USING (instance_id) JOIN mem.inventory_attributes USING (attribute_id) WHERE attribute_name = 'example' GROUP BY instance_attribute_id) AS i ON o.instance_attribute_id = i.instance_attribute_id AND o.end_time = i._end_time) ORDER BY id;",
    "Affected Elements": "NOT IN clause, SUBSTR function",
    "Root Cause Analysis": "The SQL formatter fails to correctly parse and format queries containing NOT IN clauses and SUBSTR due to mishandling of the unary NOT operator and nested subqueries."
}