{
    "sql": "CREATE TABLE `products` (`id` int(11) NOT NULL AUTO_INCREMENT, `run_flat` tinyint(1) NOT NULL DEFAULT '0', PRIMARY KEY (`id`), KEY `run_flat` (`run_flat`)) ENGINE=InnoDB AUTO_INCREMENT=11 DEFAULT CHARSET=latin1; CREATE TABLE `products_mapping` (`id` int(10) unsigned NOT NULL AUTO_INCREMENT, `product_id` int(10) unsigned NOT NULL, PRIMARY KEY (`id`), KEY `product_id` (`product_id`)) ENGINE=InnoDB AUTO_INCREMENT=25 DEFAULT CHARSET=latin1; INSERT INTO products VALUES (NULL, 0); INSERT INTO products VALUES (NULL, 0); INSERT INTO products VALUES (NULL, 0); INSERT INTO products VALUES (NULL, 0); INSERT INTO products VALUES (NULL, 0); INSERT INTO products VALUES (NULL, 0); INSERT INTO products VALUES (NULL, 0); INSERT INTO products VALUES (NULL, 0); INSERT INTO products VALUES (NULL, 0); INSERT INTO products VALUES (NULL, 0); INSERT INTO products_mapping VALUES (NULL, 1); INSERT INTO products_mapping VALUES (NULL, 1); INSERT INTO products_mapping VALUES (NULL, 2); INSERT INTO products_mapping VALUES (NULL, 2); INSERT INTO products_mapping VALUES (NULL, 3); INSERT INTO products_mapping VALUES (NULL, 3); INSERT INTO products_mapping VALUES (NULL, 3); INSERT INTO products_mapping VALUES (NULL, 3); INSERT INTO products_mapping VALUES (NULL, 3); INSERT INTO products_mapping VALUES (NULL, 3); INSERT INTO products_mapping VALUES (NULL, 4); INSERT INTO products_mapping VALUES (NULL, 5); INSERT INTO products_mapping VALUES (NULL, 6); INSERT INTO products_mapping VALUES (NULL, 6); INSERT INTO products_mapping VALUES (NULL, 6); INSERT INTO products_mapping VALUES (NULL, 6); INSERT INTO products_mapping VALUES (NULL, 7); INSERT INTO products_mapping VALUES (NULL, 7); INSERT INTO products_mapping VALUES (NULL, 8); INSERT INTO products_mapping VALUES (NULL, 9); INSERT INTO products_mapping VALUES (NULL, 10); INSERT INTO products_mapping VALUES (NULL, 10); INSERT INTO products_mapping VALUES (NULL, 10); ANALYZE TABLE products; SHOW INDEXES FROM products; EXPLAIN EXTENDED SELECT product_id FROM products_mapping JOIN products ON products.id = products_mapping.product_id;",
    "Affected Elements": "JOIN, INDEX, ANALYZE TABLE, EXPLAIN",
    "Root Cause Analysis": "The optimizer incorrectly chooses a secondary index with low cardinality instead of the primary index for an index scan, leading to performance degradation."
}