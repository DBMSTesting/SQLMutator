{
    "sql": "CREATE TABLE simple_table (id VARCHAR(20) PRIMARY KEY, unique_col VARCHAR(20), status VARCHAR(20), UNIQUE INDEX idx_unique_col (unique_col)); START TRANSACTION; SELECT * FROM simple_table WHERE unique_col = 'unique1'; START TRANSACTION; INSERT INTO simple_table (id, unique_col, status) VALUES ('id1', 'unique1', 'in_progress') ON DUPLICATE KEY UPDATE unique_col = VALUES(unique_col); COMMIT; INSERT INTO simple_table (id, unique_col, status) VALUES ('id2', 'unique1', 'in_progress') ON DUPLICATE KEY UPDATE unique_col = VALUES(unique_col); SELECT * FROM simple_table WHERE unique_col = 'unique1'; COMMIT; SELECT * FROM simple_table WHERE unique_col = 'unique1'; DROP TABLE simple_table;",
    "Affected Elements": "INSERT INTO ... ON DUPLICATE KEY UPDATE, REPEATABLE_READ isolation level",
    "Root Cause Analysis": "The MVCC appears to not handle the semantics of no-op upserts correctly, leading to read-after-write inconsistencies when no actual modification is made to the row."
}