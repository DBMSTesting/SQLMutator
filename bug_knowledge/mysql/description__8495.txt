{
    "sql": "set global rpl_semi_sync_master_timeout = 86400000; create database test_jfg; create table test_jfg.t(id int not null auto_increment primary key, v int); stop slave; change master to MASTER_HEARTBEAT_PERIOD = 0; start slave; iptables -A INPUT -p tcp --dport 3306 -j DROP; insert into test_jfg.t(v) values(0); show processlist; select @@global.gtid_executed; show slave status\\G; sleep 120; iptables -F INPUT; insert into test_jfg.t(v) values(0); flush binary logs; set global rpl_semi_sync_master_enabled = off;",
    "Affected Elements": "set global; create database; create table; stop slave; change master; iptables; insert into; show processlist; select; show slave status; flush binary logs; set global rpl_semi_sync_master_enabled;",
    "Root Cause Analysis": "The replicas do not acknowledge the blocked transaction upon reconnection due to having already received it, causing the primary to indefinitely wait for a semi-sync ACK."
}