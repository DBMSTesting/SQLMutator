{
    "sql": "CREATE DATABASE my_test_db; USE my_test_db; CREATE TABLE `a` (`_id` bigint(20) NOT NULL AUTO_INCREMENT, `col_int_1` int(11) NOT NULL DEFAULT '1', `col_int_2` int(11) DEFAULT '1', PRIMARY KEY (`_id`), KEY `key` (`col_int_1`)) ENGINE = InnoDB; CREATE TABLE `b` (`_id` bigint(20) NOT NULL AUTO_INCREMENT, `col_bigint` bigint(20) DEFAULT 1, `col_char_1` char(255) DEFAULT 'hello', `col_char_2` char(255) DEFAULT 'world', PRIMARY KEY (`_id`), KEY `key` (`col_bigint`)) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4; INSERT INTO a (_id) VALUES (NULL), (NULL), (NULL); DELIMITER // CREATE PROCEDURE insert_multi_and_select(in x int) BEGIN DECLARE i int; SET i = 0; WHILE i < x DO SET i = i + 1; INSERT INTO b SET _id=NULL; END WHILE; SELECT DISTINCT b._id, b.col_char_1, b.col_char_2 FROM b INNER JOIN a ON b.col_bigint = a._id AND a.col_int_1 = 1 ORDER BY b._id DESC LIMIT 0, 21; END // DELIMITER ; CALL insert_multi_and_select(10000); ANALYZE TABLE b; SELECT DISTINCT b._id, b.col_char_1, b.col_char_2 FROM b INNER JOIN a ON b.col_bigint = a._id AND a.col_int_1 = 1 ORDER BY b._id DESC LIMIT 0, 21; DROP DATABASE my_test_db;",
    "Affected Elements": "ORDER BY, DISTINCT",
    "Root Cause Analysis": "The bug appears to be a regression introduced in MySQL 5.7.9 that affects the sorting behavior of queries involving DISTINCT after performing ANALYZE TABLE."
}