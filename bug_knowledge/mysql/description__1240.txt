{
    "sql": "create table lmo (timestamp datetime, price DOUBLE, bar_date DATE, bar_id INT, bar_ts INT); LOAD DATA INFILE '/tmp/lmo.txt' INTO TABLE lmo FIELDS TERMINATED BY ',' LINES TERMINATED BY '\\n'; create index ix1 on lmo(bar_date, bar_id, bar_ts); select count(1) from (SELECT bar_date, bar_id, max(bar_ts) FROM lmo where bar_date='2003-03-25' GROUP BY bar_date, bar_id) I1; alter table lmo modify bar_ts int not null; select count(1) from (SELECT bar_date, bar_id, max(bar_ts) FROM lmo where bar_date='2003-03-25' GROUP BY bar_date, bar_id) I1;",
    "Affected Elements": "GROUP BY, derived tables, NOT NULL constraint",
    "Root Cause Analysis": "The addition of the NOT NULL constraint on 'bar_ts' resulted in a change in the underlying data integrity, which affected the results of the aggregate query."
}