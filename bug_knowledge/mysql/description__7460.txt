{
    "sql": "CREATE DATABASE test_jfg; SET GLOBAL innodb_default_row_format='dynamic'; CREATE TABLE test_jfg.t1 (id bigint unsigned NOT NULL AUTO_INCREMENT, created_at datetime NOT NULL, str1 varchar(50) DEFAULT NULL, PRIMARY KEY (id, created_at)) PARTITION BY RANGE (MONTH(created_at)) (PARTITION p1 VALUES LESS THAN (2), PARTITION p2 VALUES LESS THAN (3)); ALTER TABLE test_jfg.t1 ADD PARTITION (PARTITION p3 VALUES LESS THAN (4)); SET GLOBAL innodb_default_row_format='compact'; ALTER TABLE test_jfg.t1 ADD PARTITION (PARTITION p4 VALUES LESS THAN (5)); SET GLOBAL innodb_default_row_format='redundant'; ALTER TABLE test_jfg.t1 ADD PARTITION (PARTITION p5 VALUES LESS THAN (6)); SELECT TABLE_SCHEMA, TABLE_NAME, ROW_FORMAT FROM information_schema.TABLES WHERE TABLE_SCHEMA = 'test_jfg'; CREATE TABLE test_jfg.t2 LIKE test_jfg.t1; SELECT NAME, FILE_FORMAT, ROW_FORMAT FROM information_schema.INNODB_SYS_TABLES WHERE NAME LIKE 'test_jfg%t2%'; ALTER TABLE test_jfg.t2 REMOVE PARTITIONING; SELECT NAME, FILE_FORMAT, ROW_FORMAT FROM information_schema.INNODB_SYS_TABLES WHERE NAME LIKE 'test_jfg%t2%'; ALTER TABLE test_jfg.t1 EXCHANGE PARTITION p2 WITH TABLE test_jfg.t2; ALTER TABLE test_jfg.t2 ROW_FORMAT='Dynamic'; ALTER TABLE test_jfg.t1 EXCHANGE PARTITION p2 WITH TABLE test_jfg.t2; ALTER TABLE test_jfg.t1 EXCHANGE PARTITION p5 WITH TABLE test_jfg.t2;",
    "Affected Elements": "ALTER TABLE, EXCHANGE PARTITION, ROW_FORMAT",
    "Root Cause Analysis": "The system incorrectly enforces a check that prevents partition exchange between tables with different ROW_FORMATs, despite the fact that the partitioned table can contain partitions with differing ROW_FORMATs."
}