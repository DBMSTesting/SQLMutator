{
    "sql": "DROP TABLE IF EXISTS t; CREATE TABLE t (c1 BIGINT NOT NULL, c2 BIGINT NOT NULL, c3 BIGINT NOT NULL, c4 TIMESTAMP NOT NULL, c5 SMALLINT(6), c6 VARCHAR(255), c7 INT, PRIMARY KEY (c1, c7), KEY c4 (c4), KEY c5 (c5)) ENGINE=InnoDB PARTITION BY RANGE COLUMNS(c7) (PARTITION p0 VALUES LESS THAN (10), PARTITION p1 VALUES LESS THAN (20), PARTITION p2 VALUES LESS THAN (30), PARTITION p3 VALUES LESS THAN (40), PARTITION p4 VALUES LESS THAN (50), PARTITION p5 VALUES LESS THAN (60), PARTITION p6 VALUES LESS THAN (70), PARTITION p7 VALUES LESS THAN (80), PARTITION p8 VALUES LESS THAN (90), PARTITION p9 VALUES LESS THAN (MAXVALUE)); SET autocommit = 1; SET GLOBAL innodb_flush_log_at_trx_commit = 0; TRUNCATE TABLE t; INSERT INTO t (c1, c2, c3, c4, c5, c6, c7) VALUES (UUID_SHORT(), UUID_SHORT(), UUID_SHORT(), NOW(), 1, LPAD(RAND() * 1000, 100, '0'), RAND() * 100); INSERT INTO t (c1, c2, c3, c4, c5, c6, c7) VALUES (UUID_SHORT(), UUID_SHORT(), UUID_SHORT(), NOW(), 1, LPAD(RAND() * 1000, 100, '0'), RAND() * 100); REPLACE INTO t (c1, c2, c3, c4, c5, c6, c7) SELECT UUID_SHORT(), UUID_SHORT(), UUID_SHORT(), NOW(), 1, LPAD(RAND() * 1000, 100, '0'), RAND() * 100 FROM t t1, t t2, t t3, t t4, t t5, t t6, t t7, t t8, t t9, t t10, t t11, t t12, t t13, t t14, t t15, t t16, t t17, t t18, t t19, t t20; ALTER TABLE t REBUILD PARTITION p0; INSERT INTO t (c1, c2, c3, c4, c5, c6, c7) VALUES (UUID_SHORT(), UUID_SHORT(), UUID_SHORT(), NOW(), 1, LPAD(RAND() * 1000, 100, '0'), 100);",
    "Affected Elements": "ALTER TABLE, REBUILD PARTITION, INSERT",
    "Root Cause Analysis": "The ALTER TABLE command holds a metadata lock on the entire table instead of just the affected partition, preventing concurrent DML operations on unaffected partitions."
}