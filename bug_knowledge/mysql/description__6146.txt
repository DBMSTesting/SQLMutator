{
    "sql": "--source include/have_innodb.inc;\ncreate table t3\n(\n  key1 int not null,\n  key2 int not null,\n  INDEX i1(key1),\n  INDEX i2(key2)\n) engine=InnoDB;\ninsert into t3 values (1,1),(2,2);\nlet $1=9;\nset @d=2;\nwhile ($1)\n{\n  eval insert into t3 select key1+@d, key2+@d from t3;\n  eval set @d=@d*2;\n  dec $1;\n}\nanalyze table t3;\nalter table t3 add keyC int not null, add index iC(keyC);\nupdate t3 set keyC=key1;\nanalyze table t3;\nexplain select * from t3 where key1=1 or key2=2 or keyC=12;\nSET DEBUG_SYNC = 'btr_estimate_n_rows_in_range_between_dives SIGNAL estimate_ready WAIT_FOR estimate_finish';\nsend explain select * from t3 where key1=1 or key2=2 or keyC=12;\nSET @@GLOBAL.innodb_purge_run_now=TRUE;\ndrop table t3;",
    "Affected Elements": "EXPLAIN, INSERT, UPDATE, ANALYZE, ALTER TABLE",
    "Root Cause Analysis": "The bug is caused by the failure of the index dive mechanism to detect concurrent modifications to the index tree, leading to inaccurate row estimates and suboptimal query execution plans."
}