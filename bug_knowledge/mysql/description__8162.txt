{
    "sql": "drop table if exists tags; drop table if exists cpu; create table tags (hostname varchar(256), id int primary key); create table cpu (tags_id int not null, ts int not null); insert into tags(hostname, id) values ('h1', 1), ('h2', 2), ('h3', 3), ('h4', 4), ('h5', 5); insert into cpu(tags_id, ts) values (1,1), (1,2), (1,3), (1,4), (1,5); insert into cpu(tags_id, ts) values (2,1), (2,2), (2,3), (2,4), (2,5); insert into cpu(tags_id, ts) values (3,1), (3,2), (3,3), (3,4), (3,5); insert into cpu(tags_id, ts) values (4,1), (4,2), (4,3), (4,4), (4,5); create index x on tags(hostname); analyze table tags; create index id_ts on cpu(tags_id, ts); analyze table cpu; explain select * from cpu where ts > 1 and ts < 4 and tags_id in (select id from tags where hostname = 'h1')\\G; set optimizer_trace=\"enabled=on\"; select * from cpu where ts > 1 and ts < 4 and tags_id in (select id from tags where hostname = 'h1'); select * from information_schema.optimizer_trace\\G; set optimizer_trace=\"enabled=off\";",
    "Affected Elements": "SELECT, WHERE, IN, EXPLAIN, optimizer_trace",
    "Root Cause Analysis": "The optimizer is not utilizing the index effectively for subqueries unless a unique index is present, leading to suboptimal query performance."
}