{
    "sql": "CREATE TABLE lignes ( vente int DEFAULT NULL, CodeMag char(10) CHARACTER SET latin1 COLLATE latin1_bin DEFAULT '', famille char(20) CHARACTER SET latin1 COLLATE latin1_bin DEFAULT '', stockID int DEFAULT NULL, quantite decimal(10,3) DEFAULT '0.000', barcode char(20) CHARACTER SET latin1 COLLATE latin1_bin DEFAULT '', KEY ParStockID (stockID), KEY ParVente (vente), KEY ParCodeMag (CodeMag), KEY Parfamille (famille)) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_bin; CREATE TABLE ventes ( vente int NOT NULL DEFAULT '0', nature char(20) CHARACTER SET latin1 COLLATE latin1_bin DEFAULT 'VENTE', KEY ParNature (nature), KEY ParVente (vente)) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_bin; CREATE TEMPORARY TABLE query1 AS SELECT lignes.stockID, SUM(lignes.quantite) AS SumQte, lignes.barcode FROM lignes JOIN ventes ON (lignes.vente = ventes.vente) WHERE (lignes.famille NOT LIKE '~%') AND (ventes.nature IN ('VENTE', 'AVOIR', 'REGUL', 'RESA', 'MOUVEMENT') OR ventes.nature LIKE '-> %') AND (lignes.CodeMag = 'MERCI111') GROUP BY lignes.stockID; SELECT * FROM query1 WHERE barcode = 'H19127003';",
    "Affected Elements": "SUM, GROUP BY, JOIN",
    "Root Cause Analysis": "The bug may be related to the handling of aggregate functions with GROUP BY in MySQL 5.7.29, leading to incorrect aggregation results."
}