{
    "sql": "CREATE TABLE type1(c1 bit(8), c2 json, c3 int, c4 json); INSERT INTO type1 VALUES(b'1010', '{\"key1\": \"value1\", \"key2\": \"value2\"}', 1, '[\"key1\"]'); INSERT INTO type1 VALUES(b'1011', '{\"key1\": \"value1\", \"key2\": \"value2\"}', 2, '[\"key2\", \"key22\"]'); INSERT INTO type1 VALUES(b'1111', '{\"key3\": \"value3\", \"key3\": \"value3\"}', 3, '{\"key3\": 3}'); INSERT INTO type1 VALUES(null, null, null, '[\"key4\"]'); CREATE TABLE type2(c1 bit(8), c2 json, c3 int, c4 varchar(20)); INSERT INTO type2 VALUES(b'1010', '{\"key1\": \"value1\", \"key2\": \"value2\"}', 1, 'key1'); INSERT INTO type2 VALUES(b'1100', '{\"key2\": \"value2\", \"key2\": \"value2\"}', 2, 'key2'); INSERT INTO type2 VALUES(b'1100', '{\"key2\": \"value2\", \"key2\": \"value2\"}', 2, 'key22'); INSERT INTO type2 VALUES(b'1111', '{\"key3\": \"value3\", \"key3\": \"value3\"}', 3, 'key3'); INSERT INTO type2 VALUES(null, null, null, 'key4'); SELECT BIN(c1), c3 FROM type1 WHERE c2 = (SELECT var_pop(c2) FROM type2 WHERE type2.c1 = type1.c1); SET @@optimizer_switch='subquery_to_derived=on'; SELECT BIN(c1), c3 FROM type1 WHERE c2 = (SELECT var_pop(c2) FROM type2 WHERE type2.c1 = type1.c1);",
    "Affected Elements": "Subquery, JOIN, var_pop function, optimizer switch for subquery_to_derived",
    "Root Cause Analysis": "The issue arises from the difference in execution plans and result sets when using the 'subquery_to_derived' optimizer switch, leading to mismatched results."
}