{
    "sql": "CREATE TABLE t1 (t1_id INT UNSIGNED, PRIMARY KEY(t1_id)) Engine=MyISAM; INSERT INTO t1 (t1_id) VALUES (1), (2), (3), (4), (5); CREATE TABLE t2 SELECT * FROM t1; CREATE TABLE t3 (t3_id INT UNSIGNED AUTO_INCREMENT, t1_id INT UNSIGNED, amount DECIMAL(16,2), PRIMARY KEY(t3_id), KEY(t1_id)) Engine=MyISAM; INSERT INTO t3 (t1_id, t3_id, amount) VALUES (1, 1, 100.00), (2, 2, 200.00), (4, 4, 400.00); SELECT t1.t1_id, IFNULL((SELECT SUM(amount) FROM t3 WHERE t3.t1_id=t1.t1_id), 0) AS total_amount FROM t1 LEFT JOIN t2 ON t2.t1_id=t1.t1_id GROUP BY t1.t1_id; ALTER TABLE t2 ADD PRIMARY KEY(t1_id); SELECT t1.t1_id, IFNULL((SELECT SUM(amount) FROM t3 WHERE t3.t1_id=t1.t1_id), 0) AS total_amount FROM t1 LEFT JOIN t2 ON t2.t1_id=t1.t1_id GROUP BY t1.t1_id;",
    "Affected Elements": "IFNULL, GROUP BY, LEFT JOIN",
    "Root Cause Analysis": "The presence of a primary key on table t2 changes the result type of IFNULL, causing zero values to be formatted incorrectly."
}