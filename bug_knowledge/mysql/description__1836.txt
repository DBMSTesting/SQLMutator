{
    "sql": "USE test; DROP TABLE IF EXISTS t2, t1; DROP PROCEDURE IF EXISTS p; SET @@storage_engine = falcon; CREATE TABLE t1 (s1 INT PRIMARY KEY); CREATE TRIGGER t1_ai AFTER INSERT ON t1 FOR EACH ROW INSERT INTO t2 VALUES (new.s1); CREATE TABLE t2 (s1 INT, key (s1)); DELIMITER // CREATE PROCEDURE P () BEGIN DECLARE v INT DEFAULT 0; DECLARE v2 INT; SET @@autocommit = 0; WHILE v < 1000000 DO IF v MOD 1000 = 0 THEN SELECT v; END IF; BEGIN DECLARE CONTINUE HANDLER FOR SQLEXCEPTION BEGIN END; SET v2 = RAND() * 1000; INSERT INTO t1 VALUES (v2); END; BEGIN DECLARE CONTINUE HANDLER FOR SQLEXCEPTION BEGIN END; UPDATE t1 SET s1 = s1 - 1; UPDATE t2 SET s1 = s1 - 1; END; BEGIN DECLARE CONTINUE HANDLER FOR SQLEXCEPTION BEGIN END; SET v2 = RAND() * 1000; DELETE FROM t1 WHERE s1 = v2; DELETE FROM t2 WHERE s1 = v2; END; COMMIT; IF (SELECT COUNT(*) FROM t1 WHERE s1 NOT IN (SELECT s1 FROM t2)) > 0 THEN SET @a:=1; END IF; ROLLBACK; IF (SELECT COUNT(*) FROM t2 WHERE s1 NOT IN (SELECT s1 FROM t1)) > 0 THEN SET @a:=1; END IF; ROLLBACK; SET v = v + 1; END WHILE; END// DELIMITER ; CALL p();",
    "Affected Elements": "CREATE PROCEDURE, INSERT, UPDATE, DELETE, SELECT, ROLLBACK, COMMIT",
    "Root Cause Analysis": "The crash is likely caused by issues related to item cleanup in stored routines when multiple connections are executing DML operations simultaneously."
}