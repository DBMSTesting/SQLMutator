{
    "sql": "DROP FUNCTION IF EXISTS f_insert_into_table; DROP FUNCTION IF EXISTS f_update_table; DROP FUNCTION IF EXISTS f_select_from_table; CREATE FUNCTION `f_insert_into_table`() RETURNS BOOL LANGUAGE SQL DETERMINISTIC MODIFIES SQL DATA BEGIN INSERT INTO TEMP_test (id) VALUES (1); RETURN TRUE; END; CREATE FUNCTION `f_update_table`() RETURNS BOOL LANGUAGE SQL DETERMINISTIC MODIFIES SQL DATA BEGIN IF (f_insert_into_table()) THEN UPDATE TEMP_test SET id = 2; RETURN TRUE; END IF; RETURN FALSE; END; CREATE FUNCTION `f_select_from_table`() RETURNS INT UNSIGNED LANGUAGE SQL DETERMINISTIC MODIFIES SQL DATA BEGIN DECLARE val INT UNSIGNED DEFAULT 0; CREATE TEMPORARY TABLE IF NOT EXISTS TEMP_test (id INT UNSIGNED); IF (f_update_table()) THEN SELECT id INTO val FROM TEMP_test LIMIT 1; END IF; DROP TEMPORARY TABLE TEMP_test; RETURN val; END; SELECT f_select_from_table(); CREATE TEMPORARY TABLE TEMP_test(id INT UNSIGNED); SELECT f_select_from_table(); DROP TEMPORARY TABLE IF EXISTS TEMP_test; SELECT f_select_from_table();",
    "Affected Elements": "TEMPORARY TABLE, CREATE TEMPORARY TABLE, SELECT INTO",
    "Root Cause Analysis": "The inconsistency in behavior regarding the reuse of TEMPORARY TABLES in stored functions when created outside versus inside the function."
}