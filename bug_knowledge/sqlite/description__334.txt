{
    "sql": "CREATE TABLE t1(a INTEGER PRIMARY KEY, b); INSERT INTO t1(a,b) VALUES(1,1),(2,NULL),(3,NULL); CREATE VIEW err AS SELECT a FROM t1 X WHERE 2 > (SELECT COUNT(*) FROM t1 Y WHERE (X.b IS NOT NULL AND Y.b IS NULL) OR (Y.b < X.b) OR (X.b IS Y.b AND Y.a > X.a)); SELECT * FROM err; CREATE INDEX t1b ON t1(b); SELECT * FROM err; CREATE TABLE t2(aa INTEGER PRIMARY KEY, bb); INSERT INTO t2(aa,bb) VALUES(1,1),(2,NULL),(3,NULL); CREATE VIEW err AS SELECT (SELECT COUNT(*) FROM t2 WHERE (t1.b IS NOT NULL AND t2.bb IS NULL) OR (t2.bb < t1.b) OR (t1.b IS t2.bb AND t2.aa > t1.a)) FROM t1; SELECT * FROM err; CREATE INDEX t2b ON t2(bb); SELECT * FROM err;",
    "Affected Elements": "WHERE clause, COUNT function, IS NULL, IS, OR, CREATE INDEX",
    "Root Cause Analysis": "The issue arises from the interaction of the STAT4 optimization and the complex conditions in the WHERE clause, leading to inconsistent query results based on the presence of an index."
}