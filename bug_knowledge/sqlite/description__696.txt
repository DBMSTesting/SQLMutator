{
    "sql": "CREATE TABLE currency (cur CHAR(3), PRIMARY KEY (cur)); CREATE TABLE exchange (cur1 CHAR(3), cur2 CHAR(3), rate REAL, PRIMARY KEY (cur1, cur2)); INSERT INTO currency (cur) VALUES ('EUR'); INSERT INTO currency (cur) VALUES ('GBP'); INSERT INTO currency (cur) VALUES ('USD'); INSERT INTO exchange (cur1, cur2, rate) VALUES ('EUR', 'GBP', 0.85); INSERT INTO exchange (cur1, cur2, rate) VALUES ('GBP', 'EUR', 1/0.85); SELECT c1.cur cur1, c2.cur cur2, COALESCE(self.rate, x.rate) rate FROM currency c1 CROSS JOIN currency c2 LEFT JOIN exchange x ON x.cur1=c1.cur AND x.cur2=c2.cur LEFT JOIN (SELECT 1 rate) self ON c1.cur=c2.cur;",
    "Affected Elements": "LEFT JOIN, ON clause",
    "Root Cause Analysis": "The ON clause is incorrectly placed, causing incorrect results in the LEFT JOIN operation."
}