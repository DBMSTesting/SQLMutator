{
    "sql": "CREATE TABLE IF NOT EXISTS flows (Date Date, TimeReceived DateTime, SrcAS UInt32, Bytes UInt64) ENGINE = MergeTree() PARTITION BY Date ORDER BY TimeReceived; INSERT INTO flows VALUES (toDate('2022-03-16 15:04:00'), toDateTime('2022-03-16 15:04:00'), 15169, 83948), (toDate('2022-03-16 15:04:00'), toDateTime('2022-03-16 15:04:00'), 12322, 98989), (toDate('2022-03-16 15:04:00'), toDateTime('2022-03-16 15:04:00'), 60068, 99990), (toDate('2022-03-16 15:04:00'), toDateTime('2022-03-16 15:04:00'), 15169, 89898), (toDate('2022-03-16 15:05:00'), toDateTime('2022-03-16 15:05:00'), 15169, 83948), (toDate('2022-03-16 15:05:00'), toDateTime('2022-03-16 15:05:00'), 15169, 89898), (toDate('2022-03-16 15:06:00'), toDateTime('2022-03-16 15:06:00'), 15169, 83948), (toDate('2022-03-16 15:07:00'), toDateTime('2022-03-16 15:07:00'), 15169, 89898), (toDate('2022-03-16 15:08:00'), toDateTime('2022-03-16 15:08:00'), 15169, 83948), (toDate('2022-03-16 15:09:00'), toDateTime('2022-03-16 15:09:00'), 15169, 89898), (toDate('2022-03-16 15:10:00'), toDateTime('2022-03-16 15:10:00'), 15169, 83948), (toDate('2022-03-16 15:11:00'), toDateTime('2022-03-16 15:11:00'), 15169, 89898); SELECT toStartOfInterval(toDateTime(TimeReceived), INTERVAL 20 second) AS TimeReceived, if(SrcAS in (SELECT SrcAS FROM flows GROUP BY SrcAS ORDER BY SUM(Bytes) DESC LIMIT 10), SrcAS, 33) AS SrcAS FROM flows WHERE 1=1;",
    "Affected Elements": "IF function, Subquery, WHERE clause",
    "Root Cause Analysis": "The inclusion of a trivial WHERE clause modifies the behavior of the IF function and the subquery, leading to unexpected results."
}