{
    "sql": "CREATE TABLE local_bitmap_test (`a` String, `bitmap_test` AggregateFunction(groupBitmap, UInt64)) ENGINE = MergeTree() ORDER BY a; INSERT INTO local_bitmap_test SELECT t.a, groupBitmapState(t.b) FROM (SELECT 1 AS a, arrayJoin([toUInt64OrZero('8630813000994270'), toUInt64OrZero('8630994000211317'), toUInt64OrZero('3178034573935828'), toUInt64OrZero('3178031534666807'), toUInt64OrZero('3178033622808270'), toUInt64OrZero('3178034550055260'), toUInt64OrZero('8630024000631450'), toUInt64OrZero('3178000017393691'), toUInt64OrZero('3178031149129043'), toUInt64OrZero('3178031971147688'), toUInt64OrZero('8630021008046840'), toUInt64OrZero('8630028000185530'), toUInt64OrZero('8630028002758364'), toUInt64OrZero('8630451002581613'), toUInt64OrZero('8630467000315768'), toUInt64OrZero('8630724004229549'), toUInt64OrZero('3178033591774415'), toUInt64OrZero('8630913002204450'), toUInt64OrZero('3178032906031441'), toUInt64OrZero('8630734002077087'), toUInt64OrZero('8630883000004428'), toUInt64OrZero('3178032002347392'), toUInt64OrZero('3178034339471920'), toUInt64OrZero('3178001216952245'), toUInt64OrZero('8630028003564303'), toUInt64OrZero('8630310000212770'), toUInt64OrZero('8630476000874760'), toUInt64OrZero('8630891000764221'), toUInt64OrZero('8630738001578162'), toUInt64OrZero('3178002190944264'), toUInt64OrZero('3178031887934903'), toUInt64OrZero('3178032419396547')]) AS b) t GROUP BY t.a; INSERT INTO local_bitmap_test SELECT t.a, groupBitmapState(t.b) FROM (SELECT 1 AS a, arrayJoin([toUInt64OrZero('8630813000994270'), toUInt64OrZero('8630994000211317'), toUInt64OrZero('3178034573935828'), toUInt64OrZero('3178031534666807'), toUInt64OrZero('3178033622808270'), toUInt64OrZero('3178034550055260'), toUInt64OrZero('8630024000631450'), toUInt64OrZero('3178000017393691'), toUInt64OrZero('3178031149129043'), toUInt64OrZero('3178031971147688'), toUInt64OrZero('8630021008046840'), toUInt64OrZero('8630028000185530'), toUInt64OrZero('8630028002758364'), toUInt64OrZero('8630451002581613'), toUInt64OrZero('8630467000315768'), toUInt64OrZero('8630724004229549'), toUInt64OrZero('3178033591774415'), toUInt64OrZero('8630913002204450'), toUInt64OrZero('3178032906031441'), toUInt64OrZero('8630734002077087'), toUInt64OrZero('8630883000004428'), toUInt64OrZero('3178032002347392'), toUInt64OrZero('3178034339471920'), toUInt64OrZero('3178001216952245'), toUInt64OrZero('8630028003564303'), toUInt64OrZero('8630310000212770'), toUInt64OrZero('8630476000874760'), toUInt64OrZero('8630891000764221'), toUInt64OrZero('8630738001578162'), toUInt64OrZero('3178002190944264'), toUInt64OrZero('3178031887934903'), toUInt64OrZero('3178032419396547'), toUInt64OrZero('3178030894444403')]) AS b) t GROUP BY t.a; SELECT arrayJoin(bitmapToArray(bitmap_test)) FROM local_bitmap_test;",
    "Affected Elements": "groupBitmapState, bitmapToArray",
    "Root Cause Analysis": "The bug occurs when inserting a bitmap with more than 32 elements, leading to incorrect results due to an internal limitation or incorrect handling of bitmap data in the aggregate function."
}