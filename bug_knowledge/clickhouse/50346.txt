{
    "sql": "CREATE TABLE test (uid String, version UInt32, is_deleted UInt8) ENGINE = ReplicatedReplacingMergeTree('/test/jhbsavk', '1', version, is_deleted) ORDER BY (uid) SETTINGS clean_deleted_rows='Always'; CREATE TABLE test2 (uid String, version UInt32, is_deleted UInt8) ENGINE = ReplicatedReplacingMergeTree('/test/jhbsavk', '2', version, is_deleted) ORDER BY (uid) SETTINGS clean_deleted_rows='Always'; SYSTEM STOP REPLICATED SENDS test2; INSERT INTO test VALUES (1, 1, 0); INSERT INTO test2 VALUES (2, 1, 0); INSERT INTO test VALUES (1, 2, 0); INSERT INTO test VALUES (1, 3, 1); SELECT *, _part FROM test; SELECT * FROM test FINAL; OPTIMIZE TABLE test; SELECT * FROM test FINAL; SELECT *, _part FROM test;",
    "Affected Elements": "CREATE TABLE, INSERT, SELECT, OPTIMIZE TABLE",
    "Root Cause Analysis": "The `clean_deleted_rows='Always'` setting does not work as expected in conjunction with the `ReplicatedReplacingMergeTree`, leading to incorrect results after optimization."
}