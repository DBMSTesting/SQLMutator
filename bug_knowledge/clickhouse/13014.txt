{
    "sql": "CREATE TABLE userid_set(userid UInt64, name String) ENGINE = Set; INSERT INTO userid_set VALUES (1, 'Mary'),(2, 'Jane'),(3, 'Mary'),(4, 'Jack'); CREATE TABLE userid_test (userid UInt64, name String) ENGINE = MergeTree() PARTITION BY (intDiv(userid, 500)) ORDER BY (userid) SETTINGS index_granularity = 8192; INSERT INTO userid_test VALUES (1, 'Jack'),(2, 'Mary'),(3, 'Mary'),(4, 'John'),(5, 'Mary'); SELECT * FROM userid_test WHERE (userid, name) IN (SELECT userid, name FROM userid_set); SELECT * FROM userid_test WHERE (name, userid) IN (SELECT userid, name FROM userid_set); CREATE TABLE userid_set2(userid UInt64, name String, birthdate Date) ENGINE = Set; INSERT INTO userid_set2 VALUES (1, 'John', '1990-01-01'); WITH 'John' AS name, toDate('1990-01-01') AS birthdate SELECT * FROM numbers(10) WHERE (number, name, birthdate) IN (SELECT userid, name, birthdate FROM userid_set2); WITH 'John' AS name, toDate('1990-01-01') AS birthdate SELECT * FROM numbers(10) WHERE (birthdate, name, number) IN (SELECT userid, name, birthdate FROM userid_set2);",
    "Affected Elements": "IN clause, column order in tuples",
    "Root Cause Analysis": "The Set engine is enforcing a specific column order for tuple comparisons, causing queries with a different order to fail."
}