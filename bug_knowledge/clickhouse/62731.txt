{
    "sql": "SET asterisk_include_materialized_columns = 1; CREATE TABLE elements (date Date, id UInt32, `nested.key` Array(String), `nested.value` Array(String), `nested.key_hashed` Array(UInt64) MATERIALIZED arrayMap(key -> sipHash64(key), `nested.key`)) ENGINE = Memory; INSERT INTO elements (date,id,`nested.key`,`nested.value`) VALUES ('2023-02-14', 5555, ['hello', 'moto'],['chocolatine', 'croissant']); ALTER TABLE elements UPDATE `nested.key` = arrayFilter((c, k, v) -> NOT (match(k, '.*') AND match(v, 'chocolatine')), `nested.key`, `nested.key`, `nested.value`), `nested.value` = arrayFilter((c, k, v) -> NOT (match(k, '.*') AND match(v, 'chocolatine')), `nested.value`, `nested.key`, `nested.value`) WHERE id = 5555 AND date = '2023-02-14' AND 1=1 SETTINGS mutations_sync = 1;",
    "Affected Elements": "ALTER TABLE; UPDATE; arrayFilter; match; SETTINGS mutations_sync",
    "Root Cause Analysis": "The bug is related to size mismatches in nested arrays during updates in ClickHouse, specifically when materialized columns are involved."
}