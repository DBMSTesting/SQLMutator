{
    "sql": "CREATE TABLE default.test ( `key` UInt32, `ts` DateTime CODEC(DoubleDelta, LZ4), `db_time` DateTime DEFAULT now() COMMENT 'spout-ignore' CODEC(DoubleDelta, LZ4) ) ENGINE = MergeTree PARTITION BY toStartOfTenMinutes(db_time) ORDER BY (key, ts) TTL db_time + toIntervalHour(3) SETTINGS index_granularity = 8192, merge_with_ttl_timeout = 3600, min_rows_for_compact_part = 1000000, min_bytes_for_compact_part = 200000000, in_memory_parts_enable_wal = 0; INSERT INTO test(key, ts) SELECT number % 1000, now() + intDiv(number,1000) FROM numbers(500); DETACH TABLE test; ATTACH TABLE test; SELECT * FROM test;",
    "Affected Elements": "DETACH TABLE, ATTACH TABLE, in_memory_parts_enable_wal = 0",
    "Root Cause Analysis": "In-memory parts are not being persisted to disk upon table detach and reattach due to the 'in_memory_parts_enable_wal' setting being disabled."
}