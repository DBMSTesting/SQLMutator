{
    "sql": "CREATE TABLE `tc` ( `id` bigint unsigned NOT NULL COMMENT '主键ID', `merchant_id` int unsigned NOT NULL COMMENT '商户ID', `user_id` int unsigned NOT NULL COMMENT '用户ID', `mid` SMALLINT UNSIGNED GENERATED ALWAYS AS ( (id & 992) >> 5 ) VIRTUAL, `uid` TINYINT UNSIGNED GENERATED ALWAYS AS ( id & 31 ) VIRTUAL, PRIMARY KEY (`id`) USING BTREE ) DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci PARTITION BY LIST (mid) SUBPARTITION BY HASH (uid) SUBPARTITIONS 32 (PARTITION P0 VALUES IN ( 0 ), PARTITION P1 VALUES IN ( 1 ), PARTITION P2 VALUES IN ( 2 ), PARTITION P3 VALUES IN ( 3 ), PARTITION P4 VALUES IN ( 4 ), PARTITION P5 VALUES IN ( 5 ), PARTITION P6 VALUES IN ( 6 ), PARTITION P7 VALUES IN ( 7 ), PARTITION P8 VALUES IN ( 8 ), PARTITION P9 VALUES IN ( 9 ), PARTITION P10 VALUES IN ( 10 ), PARTITION P11 VALUES IN ( 11 ), PARTITION P12 VALUES IN ( 12 ), PARTITION P13 VALUES IN ( 13 ), PARTITION P14 VALUES IN ( 14 ), PARTITION P15 VALUES IN ( 15 ), PARTITION P16 VALUES IN ( 16 ), PARTITION P17 VALUES IN ( 17 ), PARTITION P18 VALUES IN ( 18 ), PARTITION P19 VALUES IN ( 19 ), PARTITION P20 VALUES IN ( 20 ), PARTITION P21 VALUES IN ( 21 ), PARTITION P22 VALUES IN ( 22 ), PARTITION P23 VALUES IN ( 23 ), PARTITION P24 VALUES IN ( 24 ), PARTITION P25 VALUES IN ( 25 ), PARTITION P26 VALUES IN ( 26 ), PARTITION P27 VALUES IN ( 27 ), PARTITION P28 VALUES IN ( 28 ), PARTITION P29 VALUES IN ( 29 ), PARTITION P30 VALUES IN ( 30 ), PARTITION P31 VALUES IN ( 31 )); ALTER TABLE tc ADD CONSTRAINT cst_tc_uid CHECK ( uid = (user_id & 31) ); ALTER TABLE tc ADD CONSTRAINT cst_tc_mid CHECK ( mid = (merchant_id & 31) ); INSERT INTO tc (id, merchant_id, user_id) VALUES ( 77550436302718261,329,684021 ); INSERT INTO tc (id, merchant_id, user_id) VALUES ( 77550436302783728,7,179376 ); INSERT INTO tc (id, merchant_id, user_id) VALUES ( 77550436302849858,218,506178 ); INSERT INTO tc (id, merchant_id, user_id) VALUES ( 77550436302915290,918,240506 ); INSERT INTO tc (id, merchant_id, user_id) VALUES ( 77550436302980209,35,743057 ); INSERT INTO tc (id, merchant_id, user_id) VALUES ( 77550436303046502,955,477094 ); INSERT INTO tc (id, merchant_id, user_id) VALUES ( 77550436303111186,480,124594 ); INSERT INTO tc (id, merchant_id, user_id) VALUES ( 77550436303176752,33,361264 ); INSERT INTO tc (id, merchant_id, user_id) VALUES ( 77550436303243014,824,969254 ); INSERT INTO tc (id, merchant_id, user_id) VALUES ( 77550436303307883,163,267083 ); EXPLAIN SELECT * FROM tc WHERE merchant_id = 329 AND user_id = 684021; EXPLAIN SELECT * FROM tc WHERE merchant_id = 918 AND user_id = 240506;",
    "Affected Elements": "PARTITION BY, SUBPARTITION BY, CHECK CONSTRAINTS",
    "Root Cause Analysis": "The partition pruning optimization logic may be incorrectly implemented, causing the query to access more partitions than necessary."
}