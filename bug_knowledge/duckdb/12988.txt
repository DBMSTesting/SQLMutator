{
    "sql": "create table customers (name varchar, age integer, something_easy_to_type_wrong integer, city varchar); create table zipcodes (city varchar, zipcode varchar); insert into customers values ('Alice', 24, 7, 'Seattle'), ('Bob', 34, 2, 'Portland'), ('Charlie', 23, 3, 'Seattle'), ('David', 36, 9, 'Portland'), ('Sam', 35, 5, 'Seattle'); insert into zipcodes values ('Seattle', '98101'), ('Portland', '97201'); with cte as ( select *, rank() over (order by something_easy_to_type_wrong) as rk from customers where age <= 42 ) select * from zipcodes join cte using (city);",
    "Affected Elements": "LATERAL join, window functions, rank()",
    "Root Cause Analysis": "The error occurs because a LATERAL join is not allowed to contain window functions, leading to a misleading error message when the subquery is on the right side of the join."
}